(this.webpackJsonpvotencrypt=this.webpackJsonpvotencrypt||[]).push([[0],{47:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n(529);t.Voting=c,t.packageId="5ea1b66908dcd5d9a7a2e7417b1c1a22a1ed31a424113939d3478c2e94172e73"},525:function(e,t,n){},529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(530))},530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n(184),a=n(239),r=(n(140),n(531));t.Vote={decoder:a.lazyMemo((function(){return c.object({voter:a.Party.decoder,vote:a.Text.decoder,unixTime:a.Int.decoder})})),encode:function(e){return{voter:a.Party.encode(e.voter),vote:a.Text.encode(e.vote),unixTime:a.Int.encode(e.unixTime)}}},t.Voting={templateId:"5ea1b66908dcd5d9a7a2e7417b1c1a22a1ed31a424113939d3478c2e94172e73:Voting:Voting",keyDecoder:a.lazyMemo((function(){return a.lazyMemo((function(){return a.Party.decoder}))})),keyEncode:function(e){return a.Party.encode(e)},decoder:a.lazyMemo((function(){return c.object({username:a.Party.decoder,deadLine:a.Text.decoder,voters:a.List(a.Party).decoder,votes:a.List(a.Text).decoder,voted:a.List(a.Party).decoder,voteTimes:a.List(a.Int).decoder,options:a.List(a.Text).decoder,subject:a.Text.decoder})})),encode:function(e){return{username:a.Party.encode(e.username),deadLine:a.Text.encode(e.deadLine),voters:a.List(a.Party).encode(e.voters),votes:a.List(a.Text).encode(e.votes),voted:a.List(a.Party).encode(e.voted),voteTimes:a.List(a.Int).encode(e.voteTimes),options:a.List(a.Text).encode(e.options),subject:a.Text.encode(e.subject)}},Archive:{template:function(){return t.Voting},choiceName:"Archive",argumentDecoder:a.lazyMemo((function(){return r.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return r.DA.Internal.Template.Archive.encode(e)},resultDecoder:a.lazyMemo((function(){return a.Unit.decoder})),resultEncode:function(e){return a.Unit.encode(e)}},Vote:{template:function(){return t.Voting},choiceName:"Vote",argumentDecoder:a.lazyMemo((function(){return t.Vote.decoder})),argumentEncode:function(e){return t.Vote.encode(e)},resultDecoder:a.lazyMemo((function(){return a.ContractId(t.Voting).decoder})),resultEncode:function(e){return a.ContractId(t.Voting).encode(e)}}},a.registerTemplate(t.Voting),t.User={templateId:"5ea1b66908dcd5d9a7a2e7417b1c1a22a1ed31a424113939d3478c2e94172e73:Voting:User",keyDecoder:a.lazyMemo((function(){return a.lazyMemo((function(){return a.Party.decoder}))})),keyEncode:function(e){return a.Party.encode(e)},decoder:a.lazyMemo((function(){return c.object({username:a.Party.decoder})})),encode:function(e){return{username:a.Party.encode(e.username)}},Archive:{template:function(){return t.User},choiceName:"Archive",argumentDecoder:a.lazyMemo((function(){return r.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return r.DA.Internal.Template.Archive.encode(e)},resultDecoder:a.lazyMemo((function(){return a.Unit.decoder})),resultEncode:function(e){return a.Unit.encode(e)}}},a.registerTemplate(t.User)},531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n(532);t.DA=c,t.packageId="d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662"},532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n(533);t.Internal=c},533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n(534);t.Template=c},534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(535))},535:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=n(184),a=n(239);n(140);t.Archive={decoder:a.lazyMemo((function(){return c.object({})})),encode:function(e){return{}}}},541:function(e,t){},543:function(e,t){},554:function(e,t){},556:function(e,t){},582:function(e,t){},584:function(e,t){},585:function(e,t){},590:function(e,t){},592:function(e,t){},598:function(e,t){},600:function(e,t){},619:function(e,t){},631:function(e,t){},634:function(e,t){},888:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n.n(a),o=n(59),i=n.n(o),s=(n(525),n(8)),l=n(19),j=n(35),d=n(991),u=n(998),b=n(992),h=n(993),x=n(980),O=n(1002),p=n(140),v=n.n(p),m=n(47),f=n(481),g=function(){var e,t=null!==(e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH0_CLIENT_ID:"MeM1EPfpL5s7EG7hdki3aBTQa5wuCcYu",REACT_APP_AUTH0_DOMAIN:"votencrypt.au.auth0.com"}).REACT_APP_LEDGER_ID)&&void 0!==e?e:"votencrypt-sandbox";return{provider:"none",ledgerId:t,makeToken:function(e){var n={"https://daml.com/ledger-api":{ledgerId:t,applicationId:"votencrypt",actAs:[e]}};return Object(f.encode)(n,"secret","HS256")}}}(),y=void 0,k=n(141),V=n(50),w=n(18),C=n(121),S=n(988),T=n(1);function A(e){return Object(k.createHash)("sha256").update(e).digest("hex")}var L=function(e){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(d.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:"95vh"},children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h3",color:"primary",textAlign:"center",children:"Votencrypt"})}),Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h6",fontWeight:"600",color:"primary",textAlign:"center",children:"Secure Voting On The Blockchain"})}),Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(b.a,{sx:{p:2,borderRadius:"16px"},elevation:2,children:e})})]}),Object(T.jsx)(d.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",children:Object(T.jsxs)(u.a,{color:"secondary",children:["\xa9 Votencrypt 2023 Website by"," ",Object(T.jsx)(V.b,{style:{color:"secondary"},target:"_blank",to:"https://linktr.ee/finnwjones",children:"Finn Jones"})]})})]})},I=function(e){var t=e.onLogin,n=Object(C.b)().loginWithPopup,o=Object(C.b)(),i=o.user,u=o.isAuthenticated,b=r.a.useState(!1),x=Object(s.a)(b,2),O=x[0],p=x[1],f=Object(w.m)(),k=Object(a.useCallback)(function(){var e=Object(j.a)(Object(l.a)().mark((function e(n){var c,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new v.a({token:n.token,httpBaseUrl:y}),e.next=4,c.fetchByKey(m.Voting.User,n.party);case 4:if(null!==e.sent){e.next=10;break}return a={username:n.party},e.next=9,c.create(m.Voting.User,a);case 9:e.sent;case 10:f("/CreateVote"),t(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),I=function(){var e=Object(j.a)(Object(l.a)().mark((function e(){var t,n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i){e.next=6;break}return t=i.name,n=i.sub,c=t,a=A(n||""),e.next=6,k({party:a,token:g.makeToken(a)});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0),!1===u&&n({screen_hint:"signup"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!0===u&&!0===O?(I(),Object(T.jsx)(T.Fragment,{})):L(Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(d.a,{container:!0,direction:"column",style:{width:"400px"},spacing:2,children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(S.a,{variant:"contained",color:"primary",onClick:D,style:{width:"100%"},loading:O,children:"Login"})}),Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(h.a,{variant:"contained",color:"primary",className:"test-select-login-button",component:V.b,to:"/VoteLogin",style:{width:"100%"},children:"Vote"})})]})}))},D=function(e){var t=e.onLogin,n=Object(w.m)(),o=r.a.useState(!1),i=Object(s.a)(o,2),u=i[0],b=i[1],h=Object(a.useCallback)(function(){var e=Object(j.a)(Object(l.a)().mark((function e(c){var a,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new v.a({token:c.token,httpBaseUrl:y}),e.next=4,a.fetchByKey(m.Voting.User,c.party);case 4:if(null!==e.sent){e.next=10;break}return r={username:c.party},e.next=9,a.create(m.Voting.User,r);case 9:e.sent;case 10:n("/Vote"),t(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),p=r.a.useState(""),f=Object(s.a)(p,2),k=f[0],V=f[1],C=function(){var e=Object(j.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=k,t=A(k),e.next=4,h({party:t,token:g.makeToken(t)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.location.pathname.length<="/VoteLogin/".length?L(Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(d.a,{container:!0,direction:"column",style:{width:"400px"},children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(x.a,{placeholder:"Enter Vote Key",value:k,className:"test-select-username-field",sx:{paddingBottom:2},style:{width:"100%"},onChange:function(e){return V(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&""!==k&&(e.preventDefault(),C())}})}),Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(S.a,{color:"primary",onClick:function(e){""!==k&&(b(!0),e.preventDefault(),C())},loading:u,variant:"contained",style:{width:"100%"},children:"Vote"})})]})})):(""===k&&(V(window.location.pathname.substring("/VoteLogin/".length,window.location.pathname.length)),C()),Object(T.jsx)(O.a,{display:"flex",justifyContent:"center",alignItems:"center",sx:{display:"flex",height:"100vh"},children:Object(T.jsx)("img",{src:"/preLoader.svg"})}))},M=function(e){var t=e.onLogout,n=Object(w.m)();return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(O.a,{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",style:{height:"100vh"},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsx)(u.a,{variant:"h5",sx:{flexGrow:1},noWrap:!0,children:"Are you sure you want to logout?"}),Object(T.jsx)(h.a,{variant:"contained",color:"primary",component:V.b,to:"/",onClick:t,sx:{m:2},children:"Log Out"}),Object(T.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){return n(1)},sx:{m:2},children:"Take me back"})]})})})},P=n(1003),E=n(1004),_=n(1005),z=n(994),F=n(1001),U=n(986),N=n(1006),R=n(1007),H=n(486),K=n.n(H),B=n(963),W=n(964),Y=n(965),G=n(966),Q=function(e){e.onLogout;var t=Object(C.b)().logout,n=r.a.useState(!1),a=Object(s.a)(n,2),o=a[0],i=a[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(O.a,{sx:{flexGrow:1,m:2},children:Object(T.jsx)(P.a,{position:"static",sx:{borderRadius:"16px"},children:Object(T.jsxs)(E.a,{children:[Object(T.jsx)(_.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:function(){i(!0)},className:"menu-button",children:Object(T.jsx)(K.a,{})}),Object(T.jsx)(u.a,{variant:"h5",children:"Votencrypt"}),Object(T.jsx)(u.a,{sx:{flexGrow:1},noWrap:!0}),Object(T.jsx)(h.a,{variant:"outlined",color:"inherit",startIcon:Object(T.jsx)(B.a,{}),onClick:function(){t({returnTo:window.location.origin})},children:"Log Out"})]})})}),Object(T.jsxs)(u.a,{variant:"h3",textAlign:"center",color:"primary",sx:{padding:3},children:["Welcome, ",c]}),Object(T.jsx)(z.a,{anchor:"left",open:o,onClose:function(){return i(!1)},children:Object(T.jsxs)(O.a,{p:2,width:"250px",textAlign:"center",role:"presentation",children:[Object(T.jsx)(u.a,{variant:"h6",component:"div",children:"Menu"}),Object(T.jsxs)(F.a,{children:[Object(T.jsxs)(U.a,{button:!0,component:V.b,to:"/CreateVote",className:"test-select-list-item",children:[Object(T.jsx)(N.a,{children:Object(T.jsx)(W.a,{})}),Object(T.jsx)(R.a,{primary:"Create Vote"})]}),Object(T.jsxs)(U.a,{button:!0,component:V.b,to:"/VoteAnalytics",className:"test-select-list-item",children:[Object(T.jsx)(N.a,{children:Object(T.jsx)(Y.a,{})}),Object(T.jsx)(R.a,{primary:"Analytics"})]}),Object(T.jsxs)(U.a,{button:!0,component:V.b,to:"/VoteManagement",className:"test-select-list-item",children:[Object(T.jsx)(N.a,{children:Object(T.jsx)(G.a,{})}),Object(T.jsx)(R.a,{primary:"Vote Management"})]})]})]})})]})},J=n(995),X=n(1008),q=n(983),Z=n(999),$=n(959),ee=n(996),te=n(1009),ne=n(981),ce=n(967),ae=n(968),re=n(51),oe=n.n(re),ie=n(173),se=n.n(ie),le={days:"00",hours:"00",minutes:"00",seconds:"00"};function je(e,t){return t.diff(e,"seconds")%60}function de(e,t){return t.diff(e,"minutes")%60}function ue(e,t){return t.diff(e,"hours")%24}function be(e,t){return t.diff(e,"days")}var he=function(){var e,t,n=(null===(e=Object(re.useStreamQueries)(m.Voting.Voting).contracts[0])||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.deadLine)||"0",c=1e3*parseInt(n),r=Object(a.useState)(le),o=Object(s.a)(r,2),i=o[0],l=o[1];return Object(a.useEffect)((function(){var e=setInterval((function(){l(function(e){var t=se()(e),n=se()();return t.isBefore(n)?{days:"00",hours:"00",minutes:"00",seconds:"00"}:{seconds:je(n,t).toString(),minutes:de(n,t).toString(),hours:ue(n,t).toString(),days:be(n,t).toString()}}(c))}),1e3);return function(){return clearInterval(e)}}),[c]),"0"===n?Object(T.jsx)(u.a,{children:" "}):Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(u.a,{variant:"h5",children:["Vote Ends In: ",i.days," Days ",i.hours," Hours"," ",i.minutes," Minutes ",i.seconds," Seconds"]})})},xe=function(e){var t,n,c=e.onLogout,o=Object(re.useParty)(),i=Object(re.useLedger)(),x=r.a.useState(!1),p=Object(s.a)(x,2),v=p[0],f=p[1],g=r.a.useState(!1),y=Object(s.a)(g,2),k=y[0],w=y[1],C=r.a.useState(""),S=Object(s.a)(C,2),A=S[0],L=S[1],I=function(e,t){"clickaway"!==t&&w(!1)},D=Object(T.jsx)(r.a.Fragment,{children:Object(T.jsx)(_.a,{size:"small","aria-label":"close",color:"inherit",onClick:I,children:Object(T.jsx)(ce.a,{fontSize:"small"})})}),M=Object(re.useStreamQueries)(m.Voting.Voting),P=Object(a.useState)(""),E=Object(s.a)(P,2),z=E[0],N=E[1],R=function(){return!0===M.loading?"Loading...":void 0===M.contracts[0]?"Invalid Vote Key":null===(e=M.contracts[0])||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.subject;var e,t},H=(new Date).getTime(),K=function(){var e=Object(j.a)(Object(l.a)().mark((function e(){var t,n,c,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===z){e.next=18;break}if(!(H<1e3*parseInt(null===(t=M.contracts[0])||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.deadLine))){e.next=14;break}if(null===(c=M.contracts[0])||void 0===c||!c.payload.voted.includes(o)){e.next=7;break}L("You have already voted"),w(!0),e.next=12;break;case 7:return e.next=9,i.exerciseByKey(m.Voting.Voting.Vote,null===(a=M.contracts[0])||void 0===a?void 0:a.signatories[0],{voter:o,vote:z,unixTime:H.toString()}).catch(console.error);case 9:f(!0),L("Your vote has been cast. Please logout or close the browser tab"),w(!0);case 12:e.next=16;break;case 14:L("The voting period has ended"),w(!0);case 16:e.next=20;break;case 18:L("Please select an option"),w(!0);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return v?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(O.a,{textAlign:"right",sx:{p:1},children:Object(T.jsx)(h.a,{variant:"outlined",color:"inherit",startIcon:Object(T.jsx)(B.a,{}),onClick:c,component:V.b,to:"/",children:"Log Out"})}),Object(T.jsx)(J.a,{children:Object(T.jsx)(d.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:"75vh"},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px",width:"90%"},elevation:2,children:[Object(T.jsxs)(d.a,{container:!0,spacing:0,children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(ae.a,{sx:{fontSize:50},color:"primary"})}),Object(T.jsxs)(d.a,{item:!0,children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h5",display:"block",children:"Thank you for voting"})}),Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Vote has been cast"})})]})]}),Object(T.jsx)(X.a,{}),Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"Vote Description"}),R(),Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"You Voted For"}),z,Object(T.jsx)(q.a,{open:k,autoHideDuration:4e3,onClose:I,message:A,action:D})]})})})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(O.a,{textAlign:"right",sx:{p:1},children:Object(T.jsx)(h.a,{variant:"outlined",color:"inherit",startIcon:Object(T.jsx)(B.a,{}),onClick:c,component:V.b,to:"/",children:"Log Out"})}),Object(T.jsx)(J.a,{children:Object(T.jsx)(d.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:"75vh"},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px",width:"90%"},elevation:2,children:[Object(T.jsxs)(d.a,{container:!0,spacing:0,children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(ae.a,{sx:{fontSize:50},color:"primary"})}),Object(T.jsxs)(d.a,{item:!0,children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h5",display:"block",children:"Vote"})}),Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Read the vote description carefully and choose an option"})})]})]}),Object(T.jsx)(X.a,{}),Object(T.jsx)(he,{}),Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"Vote Description"}),R(),Object(T.jsx)(X.a,{sx:{pb:2}}),Object(T.jsx)(O.a,{textAlign:"center",children:Object(T.jsxs)(Z.a,{children:[Object(T.jsx)($.a,{id:"demo-radio-buttons-group-label",children:"Options"}),Object(T.jsx)(ee.a,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"female",name:"radio-buttons-group",children:Object(T.jsx)(F.a,{children:null===(t=M.contracts[0])||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.options.map((function(e){return Object(T.jsx)(U.a,{children:Object(T.jsx)(te.a,{value:e,control:Object(T.jsx)(ne.a,{}),label:e,onChange:function(t){N(e)}})},e)}))})})]})}),Object(T.jsx)(O.a,{textAlign:"center",children:Object(T.jsx)(h.a,{variant:"contained",onClick:K,className:"button",name:"Create Vote",sx:{m:2,alignItems:"center"},children:"Vote"})}),Object(T.jsx)(q.a,{open:k,autoHideDuration:4e3,onClose:I,message:A,action:D})]})})})]})},Oe=n(978),pe=n(23),ve=n(64),me=n(984),fe=n(970),ge=n(971),ye=n(972),ke=n(1010),Ve=n(987),we=n(969),Ce=function(e){var t=e.heading,n=e.content,c=a.useState(!1),r=Object(s.a)(c,2),o=r[0],i=r[1];return Object(T.jsxs)("div",{children:[Object(T.jsx)(Ve.a,{ariaLabel:"SpeedDial basic example",sx:{position:"fixed",bottom:16,right:16},icon:Object(T.jsx)(we.a,{}),onClick:function(){i(!0)}}),Object(T.jsxs)(ke.a,{open:o,onClose:function(e){i(!1)},children:[Object(T.jsx)(u.a,{variant:"h6",textAlign:"center",sx:{p:1},children:t}),Object(T.jsx)(O.a,{sx:{p:4},children:Object(T.jsx)(u.a,{variant:"h6",style:{whiteSpace:"pre-line"},children:n.split("\\n").map((function(e,t){return Object(T.jsx)("div",{children:e},t)}))})})]})]})},Se=n(504),Te=n(506),Ae=n(979),Le=[],Ie=function(){var e=Object(re.useParty)(),t=Object(a.useState)([]),c=Object(s.a)(t,2),o=c[0],i=c[1],p=Object(a.useState)([]),v=Object(s.a)(p,2),f=v[0],g=v[1],y=r.a.useState(10),V=Object(s.a)(y,2),w=V[0],C=V[1],S=Object(a.useState)(""),A=Object(s.a)(S,2),L=A[0],I=A[1],D=Object(a.useState)(""),M=Object(s.a)(D,2),P=M[0],E=M[1],z=r.a.useState(!1),N=Object(s.a)(z,2),H=N[0],K=N[1],B=r.a.useState(""),Y=Object(s.a)(B,2),G=Y[0],Q=Y[1],Z=r.a.useState(new Date),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ne=r.a.useState({Subject:!1,Option:!1}),ae=Object(s.a)(ne,2),oe=ae[0],ie=ae[1],se=r.a.useState(!0),le=Object(s.a)(se,2),je=le[0],de=le[1],ue=Object(re.useStreamQueries)(m.Voting.Voting),be=new Date,he=Object(re.useLedger)(),xe=n(141),Oe=function(){var t=Object(j.a)(Object(l.a)().mark((function t(n){var c,a,r,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),c={Subject:!1,Option:!1},c=0===L.length?Object(ve.a)(Object(ve.a)({},c),{},{Subject:!0}):Object(ve.a)(Object(ve.a)({},c),{},{Subject:!1}),c=0===o.length?Object(ve.a)(Object(ve.a)({},c),{},{Option:!0}):Object(ve.a)(Object(ve.a)({},c),{},{Option:!1}),ie(c),null!==ee&&""!==L&&0!==o.length&&ee.getTime()>be.getTime()&&(0===ue.contracts.length?(a=ke(w),g(a[0]),r=null!==ee?Math.floor(ee.getTime()/1e3):0,i={username:e,deadLine:r.toString(),voters:Le,votes:[],voted:[],voteTimes:[],options:o,subject:L},he.create(m.Voting.Voting,i),Q("Vote Created. Save Keys Before Closing App"),K(!0),de(!1)):(Q("Vote In Progress"),K(!0)));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var ke=function(e){for(var t=0;t<e;t++){var n=xe.randomBytes(20).toString("hex");f.push("".concat(n)),Le.push((c=n,Object(k.createHash)("sha256").update(c).digest("hex")))}var c;return[f,Le]},Ve=function(){o.includes(P)?(Q("Option already exists"),K(!0)):(E(""),i([P].concat(Object(pe.a)(o))))},we=function(e,t){"clickaway"!==t&&K(!1)},Ie=Object(T.jsx)(r.a.Fragment,{children:Object(T.jsx)(_.a,{size:"small","aria-label":"close",color:"inherit",onClick:we,children:Object(T.jsx)(ce.a,{fontSize:"small"})})});return Object(T.jsxs)(J.a,{children:[Object(T.jsx)(O.a,{sx:{p:1},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[Object(T.jsx)(W.a,{sx:{fontSize:45},color:"primary"}),Object(T.jsx)(u.a,{variant:"h5",children:"Create A Vote"})]}),Object(T.jsx)(X.a,{sx:{p:0}}),Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"What is the vote on?"}),Object(T.jsx)(O.a,{textAlign:"center",children:Object(T.jsx)(x.a,{id:"outlined-basic",label:"Subject",variant:"outlined",value:L,onClick:function(){ie(Object(ve.a)(Object(ve.a)({},oe),{},{Subject:!1}))},onChange:function(e){I(e.target.value)},error:oe.Subject,style:{width:"94%"},sx:{m:2}})}),Object(T.jsxs)(u.a,{variant:"h6",children:["Voters: ",w]}),Object(T.jsx)(O.a,{textAlign:"center",children:Object(T.jsx)(me.a,{value:w,"aria-label":"Default",valueLabelDisplay:"auto",name:"slider",sx:{m:2},style:{width:"95%"},onChange:function(e){C(e.target.value)}})}),Object(T.jsxs)(u.a,{variant:"h6",children:["Vote Options: ",o.length]}),Object(T.jsxs)(O.a,{textAlign:"center",children:[Object(T.jsx)(x.a,{id:"outlined-basic",label:"Option",variant:"outlined",value:P,error:oe.Option,onClick:function(){ie(Object(ve.a)(Object(ve.a)({},oe),{},{Option:!1}))},onChange:function(e){E(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),Ve())},style:{width:"95%"},sx:{m:2},InputProps:{endAdornment:Object(T.jsx)(_.a,{onClick:Ve,children:Object(T.jsx)(fe.a,{})})}}),Object(T.jsx)(F.a,{style:{width:"95%"},sx:{ml:2},children:o.map((function(e){return Object(T.jsx)(U.a,{secondaryAction:Object(T.jsx)(_.a,{edge:"end","aria-label":"delete",onClick:function(t){i((function(t){return t.filter((function(t){return t!==e}))}))},children:Object(T.jsx)(ge.a,{})}),children:Object(T.jsx)(R.a,{primary:e})},e)}))})]}),Object(T.jsx)(O.a,{textAlign:"center",children:Object(T.jsx)(Te.a,{dateAdapter:Se.a,children:Object(T.jsx)(Ae.a,{label:"Vote Deadline",value:ee,minDateTime:be,onChange:function(e){te(e)},renderInput:function(e){return Object(T.jsx)(x.a,Object(ve.a)({},e))}})})}),Object(T.jsx)(O.a,{textAlign:"center",children:Object(T.jsx)(h.a,{variant:"contained",onClick:Oe,className:"button",name:"Create Vote",sx:{m:2,alignItems:"center"},children:"Create Vote"})}),Object(T.jsx)(q.a,{open:H,onClose:we,message:G,action:Ie})]})}),Object(T.jsx)(O.a,{sx:{p:1},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)(d.a,{container:!0,children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(ye.a,{sx:{fontSize:45},color:"primary"})}),Object(T.jsxs)(d.a,{item:!0,children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h5",display:"block",children:"Vote Keys"})}),Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Send each voter a key to vote"})})]}),Object(T.jsxs)(O.a,{textAlign:"right",sx:{flexGrow:1},children:[Object(T.jsx)(h.a,{sx:{margin:1},variant:"contained",onClick:function(){var e=f.join("\n"),t=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(t),c=document.createElement("a");c.href=n,c.download=L+".csv",c.click(),Q("Keys Exported"),K(!0)},disabled:je,children:"Export CSV"}),Object(T.jsx)(h.a,{variant:"contained",onClick:function(){navigator.clipboard.writeText(f.join("\n")),Q("Keys Copied To Clipboard"),K(!0)},disabled:je,children:"Copy To Clipboard"})]})]}),Object(T.jsx)(F.a,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:"16px",position:"relative",overflow:"auto",maxHeight:300,"& ul":{padding:0},padding:1,"&::-webkit-scrollbar":{width:10},"&::-webkit-scrollbar-track":{backgroundColor:"black"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#808080",borderRadius:2},overflowX:"hidden"},subheader:Object(T.jsx)("li",{}),children:[0].map((function(e){return Object(T.jsx)("li",{children:Object(T.jsx)("ul",{children:f.map((function(t){return Object(T.jsx)(U.a,{children:Object(T.jsx)(R.a,{primary:"".concat(t)})},"item-".concat(e,"-").concat(t))}))})},"section-".concat(e))}))})]})}),Object(T.jsx)(Ce,{heading:"How To Create A Vote",content:" 1. Enter the subject of the vote.\\n 2. Enter the number of voters.\\n 3. Enter the options.\\n 4. Click on the Create Vote button.\\n 5. The vote will be created.\\n Vote keys allow voters to authenticate themselves when they vote. Make sure you send one vote key to each voter. A vote key can be used only once. "})]})},De=n(977),Me=n(505),Pe=n(997),Ee=n(1011),_e=n(973),ze=n(228),Fe=n(180),Ue=n(225),Ne=n(227),Re=n(989),He=n(498),Ke=n(146),Be=n(974),We=n(975),Ye=n(976),Ge=n(60),Qe=n(229),Je=n(503),Xe=function(){var e,t,n,c,r,o,i=Object(re.useStreamQueries)(m.Voting.Voting),l=(null===(e=i.contracts[0])||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.votes)||[],j=(null===(n=i.contracts[0])||void 0===n||null===(c=n.payload)||void 0===c?void 0:c.voters)||[],h=(null===(r=i.contracts[0])||void 0===r||null===(o=r.payload)||void 0===o?void 0:o.voteTimes)||[],x=Math.round(l.length/j.length*100)||0,p=Object(a.useMemo)((function(){if(0!==l.length){var e=new Map;return l.forEach((function(t){e.has(t)?e.set(t,(e.get(t)||1)+1):e.set(t,1)})),Object(pe.a)(e).map((function(e){var t=Object(s.a)(e,2);return{name:t[0],value:t[1]}}))}return[{name:"No Data",value:0}]}),[l]),v=Object(a.useMemo)((function(){for(var e=[],t=0;t<p.length;t++)e.push("#".concat(Math.random().toString(16).slice(2,8)));return e}),[p]),f=Object(a.useMemo)((function(){if(0!==l.length){var e=new Map;return h.forEach((function(t){var n=t.slice(0,-5)+"00000";e.has(parseInt(n))?e.set(parseInt(n),(e.get(parseInt(n))||1)+1):e.set(parseInt(n),1)})),Object(pe.a)(e).map((function(e){var t=Object(s.a)(e,2);return{time:t[0],value:t[1]}})).reverse()}return[{time:1,value:0}]}),[h]),g=function(e){var t=e.active,n=e.payload;return t?Object(T.jsx)(b.a,{sx:{px:2,py:1},children:Object(T.jsx)("div",{className:"custom-tooltip",children:Object(T.jsxs)(u.a,{children:["Votes: ",n[0].value]})})}):null};return Object(T.jsxs)(J.a,{children:[Object(T.jsx)(O.a,{sx:{p:1},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)(d.a,{container:!0,spacing:0,children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(Y.a,{sx:{fontSize:50},color:"primary"})}),Object(T.jsxs)(d.a,{item:!0,children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h5",display:"block",children:"Vote Analytics"})}),Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"View current vote results"})})]})]}),Object(T.jsx)(X.a,{}),Object(T.jsx)(O.a,{sx:{pt:3},children:Object(T.jsx)(he,{})}),Object(T.jsxs)(u.a,{variant:"h5",children:["Votes Counted: ",x,"%"]}),Object(T.jsx)(Ee.a,{variant:"determinate",value:x}),Object(T.jsxs)(d.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsxs)(_e.a,{width:400,height:100,data:p,children:[Object(T.jsx)(ze.a,{dataKey:"name"}),Object(T.jsx)(Fe.a,{cursor:{fill:"transparent"},content:Object(T.jsx)(g,{active:"",payload:"",label:""})}),Object(T.jsx)(Ue.a,{dataKey:"value",fill:"#387DF6",children:p.map((function(e,t){return Object(T.jsx)(Ne.a,{fill:v[t]},"cell-".concat(t))}))})]})}),Object(T.jsx)(d.a,{item:!0,children:Object(T.jsxs)(Re.a,{width:400,height:400,children:[Object(T.jsxs)(He.a,{data:p,dataKey:"value",nameKey:"name",children:[p.map((function(e,t){return Object(T.jsx)(Ne.a,{fill:v[t]},"cell-".concat(t))})),Object(T.jsx)(Ke.a,{dataKey:"name"})]}),Object(T.jsx)(Fe.a,{content:Object(T.jsx)(g,{active:"",payload:"",label:""})})]})})]}),Object(T.jsx)(u.a,{variant:"h5",textAlign:"center",children:"Votes Over Time"}),Object(T.jsx)(O.a,{style:{width:"100%",height:"20vh"},textAlign:"center",children:Object(T.jsx)(Be.a,{width:"100%",height:"100%",children:Object(T.jsxs)(We.a,{width:500,height:300,data:f,margin:{top:5,right:30,left:20,bottom:20},children:[Object(T.jsx)(Ye.a,{strokeDasharray:"3 3"}),Object(T.jsx)(ze.a,{dataKey:"time",tickFormatter:function(e){return se()(e).format("HH:mm DD/MM/YY")},children:Object(T.jsx)(Ge.a,{value:"Time",fill:"#387DF6",position:"bottom"})}),Object(T.jsx)(Qe.a,{allowDecimals:!1,children:Object(T.jsx)(Ge.a,{value:"Votes",fill:"#387DF6",angle:-90})}),Object(T.jsx)(Fe.a,{content:Object(T.jsx)(g,{active:"",payload:"",label:""})}),Object(T.jsx)(Je.a,{type:"monotone",name:"Votes",dataKey:"value",stroke:"#387DF6",activeDot:{r:8}})]})})})]})}),Object(T.jsx)(Ce,{heading:"Vote Analytics Help",content:" This page shows the current vote results and the vote progress. \\n The vote progress shows the percentage of votes cast out of the total number of votes. \\n The votes cast over time chart shows the number of votes that have been cast in relationship to time. \\n "})]})},qe=function(){var e,t,n,c,a,r=Object(re.useLedger)(),o=Object(re.useStreamQueries)(m.Voting.Voting),i=function(){var e,t,n,c,a,r;if(!1===o.loading)return{subject:null===(e=o.contracts[0])||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.subject,voters:null===(n=o.contracts[0])||void 0===n||null===(c=n.payload)||void 0===c?void 0:c.voters,options:null===(a=o.contracts[0])||void 0===a||null===(r=a.payload)||void 0===r?void 0:r.options};return{subject:"Loading...",voters:["Loading..."],options:["Loading..."]}},s=function(){var e=Object(j.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.archiveByKey(m.Voting.Voting,null===(t=o.contracts[0])||void 0===t?void 0:t.signatories[0]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)(J.a,{children:[Object(T.jsx)(O.a,{sx:{p:1},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)(d.a,{container:!0,spacing:0,children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(G.a,{sx:{fontSize:50},color:"primary"})}),Object(T.jsxs)(d.a,{item:!0,children:[Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h5",display:"block",children:"Vote Management"})}),Object(T.jsx)(d.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Manage active vote"})})]})]}),Object(T.jsxs)(b.a,{sx:{px:5,pb:3,borderRadius:"16px"},variant:"outlined",children:[Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"Vote Description"}),null!==(e=i().subject)&&void 0!==e?e:"No Active Vote",Object(T.jsx)(X.a,{sx:{pt:2}}),Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"Vote Options"}),Object(T.jsx)(F.a,{children:null!==(t=null===(n=i().options)||void 0===n?void 0:n.map((function(e,t){return Object(T.jsx)(U.a,{children:Object(T.jsx)(R.a,{primary:t+1+". "+e})},e)})))&&void 0!==t?t:"No Active Vote"}),Object(T.jsx)(X.a,{sx:{pt:2}}),Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"Number of voters"}),null!==(c=null===(a=i().voters)||void 0===a?void 0:a.length)&&void 0!==c?c:"No Active Vote"]}),Object(T.jsx)(O.a,{textAlign:"center",children:Object(T.jsx)(h.a,{variant:"contained",onClick:s,className:"button",name:"Arcive Vote",sx:{m:2,alignItems:"center"},children:"Delete Vote"})})]})}),Object(T.jsx)(Ce,{heading:"Vote Management Help",content:" This page allows you to view the details of the current active vote. \\n You can delete the vote by clicking the button at the bottom of the page. \\n By deleting a vote, users will no longer be able to cast any more votes. \\n Once the vote has been deleted you will be able to create a new vote. "})]})},Ze=function(){var e=r.a.useState(),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(De.a)("(prefers-color-scheme: dark)"),o=r.a.useMemo((function(){return Object(Me.a)({palette:{mode:a?"dark":"light",primary:{main:"#387DF6"},secondary:{main:"#666666"}},typography:{fontFamily:"sans-serif",subtitle1:{fontSize:16},h5:{fontWeight:700,fontSize:24},h6:{fontWeight:500}}})}),[a]);return n?Object(T.jsx)(oe.a,{token:n.token,party:n.party,httpBaseUrl:y,wsBaseUrl:undefined,children:Object(T.jsxs)(Pe.a,{theme:o,children:[Object(T.jsx)(Oe.a,{enableColorScheme:!0}),Object(T.jsx)("div",{children:Object(T.jsxs)(w.c,{children:[Object(T.jsx)(w.a,{path:"/Vote",element:Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(xe,{onLogout:function(){return c(void 0)}})})}),Object(T.jsx)(w.a,{path:"/CreateVote",element:Object(T.jsxs)(T.Fragment,{children:[" ",Object(T.jsx)(Q,{onLogout:function(){return c(void 0)}}),Object(T.jsx)(Ie,{})]})}),Object(T.jsx)(w.a,{path:"/VoteAnalytics",element:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Q,{onLogout:function(){return c(void 0)}}),Object(T.jsx)(Xe,{})]})}),Object(T.jsx)(w.a,{path:"/VoteManagement",element:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Q,{onLogout:function(){return c(void 0)}}),Object(T.jsx)(qe,{})]})}),Object(T.jsx)(w.a,{path:"*",element:Object(T.jsx)(M,{onLogout:function(){return c(void 0)}})})]})})]})}):Object(T.jsxs)(Pe.a,{theme:o,children:[Object(T.jsx)(Oe.a,{enableColorScheme:!0}),Object(T.jsx)("div",{children:Object(T.jsxs)(w.c,{children:[Object(T.jsx)(w.a,{path:"/VoteLogin/*",element:Object(T.jsx)(D,{onLogin:c})}),Object(T.jsx)(w.a,{path:"/VoteLogin",element:Object(T.jsx)(D,{onLogin:c})}),Object(T.jsx)(w.a,{path:"*",element:Object(T.jsx)(I,{onLogin:c})})]})})]})},$e=function(e){var t=e.children,n=Object(w.m)();return Object(T.jsx)(C.a,{domain:"votencrypt.au.auth0.com",clientId:"MeM1EPfpL5s7EG7hdki3aBTQa5wuCcYu",redirectUri:window.location.origin,onRedirectCallback:function(e){n((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},children:t})};i.a.render(Object(T.jsx)(V.a,{children:Object(T.jsx)($e,{children:Object(T.jsx)(Ze,{})})}),document.getElementById("root"))}},[[888,1,2]]]);
//# sourceMappingURL=main.410dbeaa.chunk.js.map