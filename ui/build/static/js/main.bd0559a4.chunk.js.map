{"version":3,"sources":["../daml.js/votencrypt-0.1.0/lib/Voting/index.js","../daml.js/votencrypt-0.1.0/lib/Voting/module.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/Internal/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/Internal/Template/index.js","../daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662/lib/DA/Internal/Template/module.js","../daml.js/votencrypt-0.1.0/lib/index.js","components/LoginScreen.tsx","config.ts","components/CatchNotFound.tsx","components/MainScreen.tsx","components/HelpPopup.tsx","components/VoteManagement.tsx","components/VoteScreen.tsx","components/VoteAnalytics.tsx","components/MainView.tsx","components/App.tsx","auth/auth0-provider-with-history.js","index.tsx"],"names":["Object","defineProperty","exports","value","m","p","hasOwnProperty","__export","require","jtv","damlTypes","pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662","Vote","decoder","lazyMemo","object","voter","Party","vote","Text","unixTime","Int","encode","__typed__","Voting","templateId","keyDecoder","keyEncode","username","voters","List","votes","voted","voteTimes","candidates","subject","Archive","template","choiceName","argumentDecoder","DA","Internal","Template","argumentEncode","resultDecoder","Unit","resultEncode","ContractId","registerTemplate","User","packageId","usernameExport","authConfig","ledgerId","process","REACT_APP_LEDGER_ID","provider","makeToken","party","payload","httpBaseUrl","undefined","hash","input","createHash","update","digest","wrap","component","Grid","container","direction","justifyContent","alignItems","style","height","item","Typography","variant","color","textAlign","fontWeight","Paper","sx","borderRadius","elevation","LandingScreen","onLogin","loginWithPopup","useAuth0","user","isAuthenticated","React","useState","buttonPress","setButtonPress","navigate","useNavigate","login","useCallback","credentials","a","ledger","Ledger","token","fetchByKey","userCreds","create","alert","JSON","stringify","handleLogin","name","picture","email","sub","hashedUsername","handleLoginButton","screen_hint","width","spacing","Button","className","onClick","Link","to","LoginScreenVote","setUsername","event","preventDefault","TextField","placeholder","paddingBottom","onChange","e","currentTarget","onKeyPress","key","LoginScreenCreateVote","LogoutConfirm","onLogout","Box","display","flexGrow","noWrap","PageNotFound","MainScreen","logout","useParty","open","setOpen","AppBar","position","Toolbar","IconButton","edge","startIcon","Logout","returnTo","window","location","origin","padding","Drawer","anchor","onClose","role","ListItem","button","ListItemIcon","Ballot","ListItemText","primary","Poll","PublishedWithChanges","HelpPopup","heading","content","helpOpen","setHelpOpen","SpeedDial","ariaLabel","bottom","right","icon","QuestionMark","Dialog","reason","whiteSpace","split","map","i","VoteManagement","useLedger","assets","useStreamQueries","buttonHandler","archiveByKey","contracts","signatories","Container","fontSize","lineHeight","px","pb","pt","Divider","currentItem","length","VoteScreen","hashUsername","Popup","setPopup","popupText","setPopupText","handleClose","action","Fragment","size","Close","radioStatus","setRadioStatus","now","Date","getTime","includes","exerciseByKey","catch","console","error","HowToVote","FormControl","FormLabel","id","RadioGroup","defaultValue","FormControlLabel","control","Radio","label","Snackbar","autoHideDuration","message","VoteAnalytics","voteProgress","votesFrequency","useMemo","Map","forEach","has","set","get","colours","push","Math","random","toString","slice","votesFrequencyByTime","voteTime","ajustedTime","parseInt","time","reverse","LinearProgress","BarChart","data","XAxis","dataKey","Bar","fill","entry","index","Cell","Tooltip","PieChart","Pie","nameKey","LabelList","ResponsiveContainer","LineChart","margin","top","left","CartesianGrid","strokeDasharray","tickFormatter","moment","format","Label","YAxis","allowDecimals","angle","Line","type","stroke","activeDot","r","voteKeys","hashedVoteKeys","MainView","candidateList","setCandidateList","setValue","subjectText","setSubjectText","candidateText","setCandidateText","generateVoteKeys","voteDetails","voterCount","randomBytes","addCandidate","flexWrap","target","Slider","valueLabelDisplay","InputProps","endAdornment","KeyboardReturn","ml","secondaryAction","filter","Delete","Key","csv","join","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","click","navigator","clipboard","writeText","bgcolor","overflow","maxHeight","subheader","sectionId","App","setCredentials","preferedScheme","useMediaQuery","theme","createTheme","palette","mode","main","secondary","typography","fontFamily","subtitle1","h5","h6","wsBaseUrl","ThemeProvider","CssBaseline","path","element","Auth0ProviderWithHistory","children","domain","clientId","redirectUri","onRedirectCallback","appState","pathname","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.bd0559a4.chunk.js","sourcesContent":["\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require('./module'));\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable-next-line no-unused-vars */\nvar jtv = require('@mojotech/json-type-validation');\n/* eslint-disable-next-line no-unused-vars */\nvar damlTypes = require('@daml/types');\n/* eslint-disable-next-line no-unused-vars */\nvar damlLedger = require('@daml/ledger');\n\nvar pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662 = require('@daml.js/d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662');\n\n\nexports.Vote = {\n  decoder: damlTypes.lazyMemo(function () { return jtv.object({voter: damlTypes.Party.decoder, vote: damlTypes.Text.decoder, unixTime: damlTypes.Int.decoder, }); }),\n  encode: function (__typed__) {\n  return {\n    voter: damlTypes.Party.encode(__typed__.voter),\n    vote: damlTypes.Text.encode(__typed__.vote),\n    unixTime: damlTypes.Int.encode(__typed__.unixTime),\n  };\n}\n,\n};\n\n\n\nexports.Voting = {\n  templateId: '882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643:Voting:Voting',\n  keyDecoder: damlTypes.lazyMemo(function () { return damlTypes.lazyMemo(function () { return damlTypes.Party.decoder; }); }),\n  keyEncode: function (__typed__) { return damlTypes.Party.encode(__typed__); },\n  decoder: damlTypes.lazyMemo(function () { return jtv.object({username: damlTypes.Party.decoder, voters: damlTypes.List(damlTypes.Party).decoder, votes: damlTypes.List(damlTypes.Text).decoder, voted: damlTypes.List(damlTypes.Party).decoder, voteTimes: damlTypes.List(damlTypes.Int).decoder, candidates: damlTypes.List(damlTypes.Text).decoder, subject: damlTypes.Text.decoder, }); }),\n  encode: function (__typed__) {\n  return {\n    username: damlTypes.Party.encode(__typed__.username),\n    voters: damlTypes.List(damlTypes.Party).encode(__typed__.voters),\n    votes: damlTypes.List(damlTypes.Text).encode(__typed__.votes),\n    voted: damlTypes.List(damlTypes.Party).encode(__typed__.voted),\n    voteTimes: damlTypes.List(damlTypes.Int).encode(__typed__.voteTimes),\n    candidates: damlTypes.List(damlTypes.Text).encode(__typed__.candidates),\n    subject: damlTypes.Text.encode(__typed__.subject),\n  };\n}\n,\n  Archive: {\n    template: function () { return exports.Voting; },\n    choiceName: 'Archive',\n    argumentDecoder: damlTypes.lazyMemo(function () { return pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662.DA.Internal.Template.Archive.decoder; }),\n    argumentEncode: function (__typed__) { return pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662.DA.Internal.Template.Archive.encode(__typed__); },\n    resultDecoder: damlTypes.lazyMemo(function () { return damlTypes.Unit.decoder; }),\n    resultEncode: function (__typed__) { return damlTypes.Unit.encode(__typed__); },\n  },\n  Vote: {\n    template: function () { return exports.Voting; },\n    choiceName: 'Vote',\n    argumentDecoder: damlTypes.lazyMemo(function () { return exports.Vote.decoder; }),\n    argumentEncode: function (__typed__) { return exports.Vote.encode(__typed__); },\n    resultDecoder: damlTypes.lazyMemo(function () { return damlTypes.ContractId(exports.Voting).decoder; }),\n    resultEncode: function (__typed__) { return damlTypes.ContractId(exports.Voting).encode(__typed__); },\n  },\n};\n\n\ndamlTypes.registerTemplate(exports.Voting);\n\n\n\nexports.User = {\n  templateId: '882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643:Voting:User',\n  keyDecoder: damlTypes.lazyMemo(function () { return damlTypes.lazyMemo(function () { return damlTypes.Party.decoder; }); }),\n  keyEncode: function (__typed__) { return damlTypes.Party.encode(__typed__); },\n  decoder: damlTypes.lazyMemo(function () { return jtv.object({username: damlTypes.Party.decoder, }); }),\n  encode: function (__typed__) {\n  return {\n    username: damlTypes.Party.encode(__typed__.username),\n  };\n}\n,\n  Archive: {\n    template: function () { return exports.User; },\n    choiceName: 'Archive',\n    argumentDecoder: damlTypes.lazyMemo(function () { return pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662.DA.Internal.Template.Archive.decoder; }),\n    argumentEncode: function (__typed__) { return pkgd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662.DA.Internal.Template.Archive.encode(__typed__); },\n    resultDecoder: damlTypes.lazyMemo(function () { return damlTypes.Unit.decoder; }),\n    resultEncode: function (__typed__) { return damlTypes.Unit.encode(__typed__); },\n  },\n};\n\n\ndamlTypes.registerTemplate(exports.User);\n\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DA = require('./DA');\nexports.DA = DA;\nexports.packageId = 'd14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662';\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Internal = require('./Internal');\nexports.Internal = Internal;\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Template = require('./Template');\nexports.Template = Template;\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require('./module'));\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable-next-line no-unused-vars */\nvar jtv = require('@mojotech/json-type-validation');\n/* eslint-disable-next-line no-unused-vars */\nvar damlTypes = require('@daml/types');\n/* eslint-disable-next-line no-unused-vars */\nvar damlLedger = require('@daml/ledger');\n\n\nexports.Archive = {\n  decoder: damlTypes.lazyMemo(function () { return jtv.object({}); }),\n  encode: function (__typed__) {\n  return {\n  };\n}\n,\n};\n\n","\"use strict\";\n/* eslint-disable-next-line no-unused-vars */\nfunction __export(m) {\n/* eslint-disable-next-line no-prototype-builtins */\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Voting = require('./Voting');\nexports.Voting = Voting;\nexports.packageId = '882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643';\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useCallback } from \"react\";\nimport { Button, TextField, Paper, Typography, Grid } from \"@mui/material\";\nimport Credentials from \"../Credentials\";\nimport Ledger from \"@daml/ledger\";\nimport { Voting } from \"@daml.js/votencrypt\";\nimport { authConfig, httpBaseUrl } from \"../config\";\nimport { createHash } from \"crypto\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\ntype Props = {\n  onLogin: (credentials: Credentials) => void;\n};\n\nfunction hash(input: string) {\n  return createHash(\"sha256\").update(input).digest(\"hex\");\n}\n\nexport let usernameExport: any;\nconst wrap: (c: JSX.Element) => JSX.Element = (component) => (\n  // display VoteLogo.png\n  <>\n    <Grid\n      container\n      direction=\"column\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      style={{ height: \"100vh\" }}\n    >\n      <Grid item>\n        <Typography\n          variant=\"h3\"\n          color=\"primary\"\n          textAlign=\"center\"\n          // sx={{ pt: 2 }}#0d47a1\n        >\n          Votencrypt\n        </Typography>\n      </Grid>\n      <Grid item>\n        <Typography\n          variant=\"h6\"\n          fontWeight=\"600\"\n          color=\"primary\"\n          textAlign=\"center\"\n          // sx={{ pt: 2 }}\n        >\n          Secure Voting On The Blockchain\n        </Typography>\n      </Grid>\n      <Grid item>\n        <Paper sx={{ p: 2, borderRadius: \"16px\" }} elevation={2}>\n          {component}\n        </Paper>\n      </Grid>\n    </Grid>\n  </>\n);\n\nexport const LandingScreen: React.FC<Props> = ({ onLogin }) => {\n  const { loginWithPopup } = useAuth0();\n  const { user, isAuthenticated } = useAuth0();\n  const [buttonPress, setButtonPress] = React.useState(false);\n  const navigate = useNavigate();\n\n  const login = useCallback(\n    async (credentials: Credentials) => {\n      try {\n        const ledger = new Ledger({ token: credentials.token, httpBaseUrl });\n        let userContract = await ledger.fetchByKey(\n          Voting.User,\n          credentials.party\n        );\n\n        if (userContract === null) {\n          // const voteBob = useQuery()\n\n          const userCreds = {\n            username: credentials.party,\n          };\n          userContract = await ledger.create(Voting.User, userCreds);\n        }\n        navigate(\"/CreateVote\");\n\n        onLogin(credentials);\n      } catch (error) {\n        alert(`Unknown error:\\n${JSON.stringify(error)}`);\n      }\n    },\n    [onLogin]\n  );\n  const [username, setUsername] = React.useState(\"\");\n\n  const handleLogin = async () => {\n    // if user is not undefined then run\n\n    if (user !== undefined) {\n      const { name, picture, email, sub } = user || {\n        name: \"\",\n        picture: \"\",\n        email: \"\",\n        sub: \"\",\n      };\n\n      // event.preventDefault();\n      usernameExport = name;\n      const hashedUsername = hash(sub);\n      await login({\n        party: hashedUsername,\n        token: authConfig.makeToken(hashedUsername),\n      });\n    }\n  };\n  const handleLoginButton = async () => {\n    setButtonPress(true);\n    if (isAuthenticated === false) {\n      loginWithPopup({\n        screen_hint: \"signup\",\n      });\n    }\n  };\n  if (isAuthenticated === true && buttonPress === true) {\n    handleLogin();\n    return <></>;\n  } else {\n    return wrap(\n      <>\n        <Grid\n          container\n          direction=\"column\"\n          style={{ width: \"400px\" }}\n          spacing={2}\n        >\n          <Grid item>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className=\"test-select-login-button\"\n              onClick={handleLoginButton}\n              style={{ width: \"100%\" }}\n            >\n              Create A Vote\n            </Button>\n          </Grid>\n          <Grid item>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className=\"test-select-login-button\"\n              component={Link}\n              to=\"/VoteLogin\"\n              style={{ width: \"100%\" }}\n            >\n              Vote\n            </Button>\n          </Grid>\n        </Grid>\n      </>\n    );\n  }\n};\n\nexport const LoginScreenVote: React.FC<Props> = ({ onLogin }) => {\n  const navigate = useNavigate();\n\n  const login = useCallback(\n    async (credentials: Credentials) => {\n      try {\n        const ledger = new Ledger({ token: credentials.token, httpBaseUrl });\n        let userContract = await ledger.fetchByKey(\n          Voting.User,\n          credentials.party\n        );\n\n        if (userContract === null) {\n          const user = {\n            username: credentials.party,\n          };\n          userContract = await ledger.create(Voting.User, user);\n        }\n        navigate(\"/Vote\");\n\n        onLogin(credentials);\n      } catch (error) {\n        alert(`Unknown error:\\n${JSON.stringify(error)}`);\n      }\n    },\n    [onLogin]\n  );\n  const [username, setUsername] = React.useState(\"\");\n\n  const handleLogin = async (event: React.FormEvent) => {\n    event.preventDefault();\n    usernameExport = username;\n\n    const hashedUsername = hash(username);\n\n    await login({\n      party: hashedUsername,\n      token: authConfig.makeToken(hashedUsername),\n    });\n  };\n\n  return wrap(\n    <>\n      <Grid container direction=\"column\" style={{ width: \"400px\" }}>\n        <Grid item>\n          <TextField\n            placeholder=\"Enter Vote Key\"\n            value={username}\n            className=\"test-select-username-field\"\n            sx={{ paddingBottom: 2 }}\n            style={{ width: \"100%\" }}\n            onChange={(e) => setUsername(e.currentTarget.value)}\n            onKeyPress={(e) => {\n              if (e.key === \"Enter\") {\n                e.preventDefault();\n                handleLogin(e);\n              }\n            }}\n          />\n        </Grid>\n\n        <Grid item>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            className=\"test-select-login-button\"\n            onClick={handleLogin}\n            style={{ width: \"100%\" }}\n          >\n            Vote\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n\nexport const LoginScreenCreateVote: React.FC<Props> = ({ onLogin }) => {\n  const navigate = useNavigate();\n\n  const login = useCallback(\n    async (credentials: Credentials) => {\n      try {\n        const ledger = new Ledger({ token: credentials.token, httpBaseUrl });\n        let userContract = await ledger.fetchByKey(\n          Voting.User,\n          credentials.party\n        );\n\n        if (userContract === null) {\n          // const voteBob = useQuery()\n\n          const user = {\n            username: credentials.party,\n          };\n          userContract = await ledger.create(Voting.User, user);\n        }\n        navigate(\"/CreateVote\");\n\n        onLogin(credentials);\n      } catch (error) {\n        alert(`Unknown error:\\n${JSON.stringify(error)}`);\n      }\n    },\n    [onLogin]\n  );\n  const [username, setUsername] = React.useState(\"\");\n\n  const handleLogin = async (event: React.FormEvent) => {\n    event.preventDefault();\n    usernameExport = username;\n    const hashedUsername = hash(username);\n\n    await login({\n      party: hashedUsername,\n      token: authConfig.makeToken(hashedUsername),\n    });\n  };\n  return wrap(\n    <>\n      {/* FORM_BEGIN */}\n      <Grid container direction=\"column\" style={{ width: \"400px\" }}>\n        <Grid item>\n          <TextField\n            placeholder=\"Username\"\n            value={username}\n            className=\"test-select-username-field\"\n            sx={{ paddingBottom: 2 }}\n            style={{ width: \"100%\" }}\n            onChange={(e) => setUsername(e.currentTarget.value)}\n            onKeyPress={(e) => {\n              if (e.key === \"Enter\") {\n                e.preventDefault();\n                handleLogin(e);\n              }\n            }}\n          />\n        </Grid>\n        <Grid item>\n          <Button\n            variant=\"contained\"\n            className=\"test-select-login-button\"\n            onClick={handleLogin}\n            style={{ width: \"100%\" }}\n          >\n            Create A Vote\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { encode } from 'jwt-simple';\n\nexport type Insecure = {\n  provider: \"none\",\n  makeToken: (party: string) => string,\n  ledgerId: string\n};\n\n\nexport const isLocalDev = process.env.NODE_ENV === 'development';\nexport type Authentication = Insecure;\n\nexport const authConfig: Authentication = (() => {\n    const ledgerId: string = process.env.REACT_APP_LEDGER_ID ?? \"votencrypt-sandbox\"\n    const auth: Insecure = {\n      provider: \"none\",\n      ledgerId: ledgerId,\n      makeToken: (party) => {\n        const payload = {\n          \"https://daml.com/ledger-api\": {\n            \"ledgerId\": ledgerId,\n            \"applicationId\": 'votencrypt',\n            \"actAs\": [party]\n          }\n        }\n        return encode(payload, \"secret\", \"HS256\");\n      }\n    };\n    return auth;\n  }\n)();\n\nexport const httpBaseUrl = undefined;\nexport const wsBaseUrl = isLocalDev ? 'ws://localhost:7575/' : undefined;\n","import React from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { Button, Box, Paper, Typography } from \"@mui/material\";\n\ntype Props = {\n  onLogout: () => void;\n};\n\nexport const LogoutConfirm: React.FC<Props> = ({ onLogout }) => {\n  const navigate = useNavigate();\n\n  return (\n    // are you sure you want to logout?\n    <>\n      <Box\n        display=\"flex\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        textAlign=\"center\"\n        style={{ height: \"100vh\" }}\n      >\n        <Paper sx={{ p: 3, borderRadius: \"16px\" }} elevation={2}>\n          <Typography variant=\"h5\" sx={{ flexGrow: 1 }} noWrap>\n            Are you sure you want to logout?\n          </Typography>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            component={Link}\n            to=\"/\"\n            onClick={onLogout}\n            sx={{ m: 2 }}\n          >\n            Log Out\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={() => navigate(1)}\n            sx={{ m: 2 }}\n          >\n            Take me back\n          </Button>\n        </Paper>\n      </Box>\n    </>\n  );\n};\n\n// Create a page not found screen\nexport const PageNotFound = () => {\n  return (\n    <>\n      <Box\n        display=\"flex\"\n        justifyContent=\"center\"\n        alignItems=\"center\"\n        textAlign=\"center\"\n        style={{ height: \"100vh\" }}\n      >\n        <Paper sx={{ p: 3, borderRadius: \"16px\" }} elevation={2}>\n          <Typography variant=\"h5\" sx={{ flexGrow: 1 }} noWrap>\n            Oops! Page not found.\n          </Typography>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            component={Link}\n            to=\"/\"\n            sx={{ m: 2 }}\n          >\n            Go to home page\n          </Button>\n        </Paper>\n      </Box>\n    </>\n  );\n};\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from \"react\";\nimport {\n  Typography,\n  Box,\n  IconButton,\n  Toolbar,\n  Drawer,\n  Button,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  AppBar,\n} from \"@mui/material\";\n\nimport { Link } from \"react-router-dom\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport {\n  Ballot,\n  Poll,\n  Logout,\n  PublishedWithChanges,\n} from \"@mui/icons-material\";\nimport { useParty } from \"@daml/react\";\nimport { usernameExport } from \"./LoginScreen\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\ntype Props = {\n  onLogout: () => void;\n};\n\nconst MainScreen: React.FC<Props> = ({ onLogout }) => {\n  const { isAuthenticated, logout } = useAuth0();\n\n  const hashUsername = useParty();\n\n  const [open, setOpen] = React.useState(false);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n  const LogoutCall = () => {\n    logout({\n      returnTo: window.location.origin,\n    });\n  };\n  return (\n    <>\n      <Box sx={{ flexGrow: 1, m: 2 }}>\n        <AppBar position=\"static\" sx={{ borderRadius: \"16px\" }}>\n          <Toolbar>\n            <IconButton\n              color=\"inherit\"\n              aria-label=\"open drawer\"\n              edge=\"start\"\n              onClick={handleDrawerOpen}\n              className=\"menu-button\"\n            >\n              <MenuIcon />\n            </IconButton>\n\n            <Typography variant=\"h5\" sx={{ flexGrow: 1 }} noWrap>\n              Votencrypt\n            </Typography>\n\n            <Button\n              variant=\"outlined\"\n              color=\"inherit\"\n              startIcon={<Logout />}\n              onClick={LogoutCall}\n            >\n              Log Out\n            </Button>\n          </Toolbar>\n        </AppBar>\n      </Box>\n      <Typography\n        variant=\"h3\"\n        textAlign=\"center\"\n        color=\"primary\"\n        sx={{ padding: 3 }}\n      >\n        Welcome, {usernameExport}!\n      </Typography>\n      <Drawer anchor=\"left\" open={open} onClose={() => setOpen(false)}>\n        <Box p={2} width=\"250px\" textAlign=\"center\" role=\"presentation\">\n          <Typography variant=\"h6\" component=\"div\">\n            Menu\n          </Typography>\n          <List>\n            <ListItem\n              button\n              component={Link}\n              to=\"/CreateVote\"\n              className=\"test-select-list-item\"\n            >\n              <ListItemIcon>\n                <Ballot />\n              </ListItemIcon>\n              <ListItemText primary=\"Create Vote\" />\n            </ListItem>\n\n            <ListItem\n              button\n              component={Link}\n              to=\"/VoteAnalytics\"\n              className=\"test-select-list-item\"\n            >\n              <ListItemIcon>\n                <Poll />\n              </ListItemIcon>\n              <ListItemText primary=\"Analytics\" />\n            </ListItem>\n\n            <ListItem\n              button\n              component={Link}\n              to=\"/VoteManagement\"\n              className=\"test-select-list-item\"\n            >\n              <ListItemIcon>\n                <PublishedWithChanges />\n              </ListItemIcon>\n              <ListItemText primary=\"Vote Management\" />\n            </ListItem>\n          </List>\n        </Box>\n      </Drawer>\n    </>\n  );\n};\n\nexport default MainScreen;\n","import * as React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport Dialog from \"@mui/material/Dialog\";\nimport Box from \"@mui/material/Box\";\n\nimport Typography from \"@mui/material/Typography\";\nimport SpeedDial from \"@mui/material/SpeedDial\";\nimport { QuestionMark } from \"@mui/icons-material\";\n\nconst HelpPopup = ({\n  heading,\n  content,\n}: {\n  heading: string;\n  content: string;\n}) => {\n  const [helpOpen, setHelpOpen] = React.useState(false);\n\n  const handleClickOpen = () => {\n    setHelpOpen(true);\n  };\n\n  const handleClose = (reason: string) => {\n    setHelpOpen(false);\n  };\n  return (\n    <div>\n      <SpeedDial\n        ariaLabel=\"SpeedDial basic example\"\n        sx={{ position: \"fixed\", bottom: 16, right: 16 }}\n        icon={<QuestionMark />}\n        onClick={handleClickOpen}\n      ></SpeedDial>\n      <Dialog open={helpOpen} onClose={handleClose}>\n        <Typography variant=\"h6\" textAlign=\"center\" sx={{ p: 1 }}>\n          {heading}\n        </Typography>\n\n        <Box sx={{ p: 4 }}>\n          <Typography variant=\"h6\" style={{ whiteSpace: \"pre-line\" }}>\n            {content.split(\"\\\\n\").map((i, key) => {\n              return <div key={key}>{i}</div>;\n            })}\n          </Typography>\n        </Box>\n      </Dialog>\n    </div>\n  );\n};\nexport default HelpPopup;\n","import React from \"react\";\n\nimport {\n  Paper,\n  Typography,\n  Container,\n  Grid,\n  Divider,\n  Box,\n  Button,\n  List,\n  ListItem,\n  ListItemText,\n} from \"@mui/material\";\n\nimport { useLedger, useStreamQueries } from \"@daml/react\";\n\nimport { Voting } from \"@daml.js/votencrypt\";\n\nimport { PublishedWithChanges } from \"@mui/icons-material\";\nimport HelpPopup from \"./HelpPopup\";\n\nconst VoteManagement: React.FC = () => {\n  const ledger = useLedger();\n\n  const assets = useStreamQueries(Voting.Voting);\n  const buttonHandler = async () => {\n    await ledger.archiveByKey(\n      Voting.Voting,\n      assets.contracts[0]?.signatories[0]\n    );\n  };\n  return (\n    <Container>\n      <Box sx={{ p: 1 }}>\n        <Paper sx={{ p: 3, borderRadius: \"16px\" }} elevation={2}>\n          <Grid container spacing={0}>\n            <Grid item>\n              <PublishedWithChanges sx={{ fontSize: 50 }} color=\"primary\" />\n            </Grid>\n\n            <Grid item>\n              <Grid item>\n                <Typography variant=\"h5\" display=\"block\">\n                  Vote Management\n                </Typography>\n              </Grid>\n              <Grid item>\n                <Typography\n                  variant=\"subtitle1\"\n                  color=\"secondary\"\n                  display=\"block\"\n                  style={{ lineHeight: \"15px\" }}\n                >\n                  Manage active vote\n                </Typography>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Paper sx={{ px: 5, pb: 3, borderRadius: \"16px\" }} variant=\"outlined\">\n            <Typography variant=\"h6\" sx={{ pt: 2 }}>\n              Vote Description\n            </Typography>\n            {assets.contracts[0]?.payload?.subject ?? \"Loading...\"}\n            <Divider sx={{ pt: 2 }} />\n            <Typography variant=\"h6\" sx={{ pt: 2 }}>\n              Vote Candidates\n            </Typography>\n            <List>\n              {assets.contracts[0]?.payload?.candidates.map(\n                (item, currentItem) => (\n                  <ListItem key={item}>\n                    <ListItemText primary={currentItem + 1 + \". \" + item} />\n                  </ListItem>\n                )\n              )}\n            </List>\n            <Divider sx={{ pt: 2 }} />\n\n            {/* Number of voters */}\n            <Typography variant=\"h6\" sx={{ pt: 2 }}>\n              Number of voters\n            </Typography>\n            {assets.contracts[0]?.payload?.voters.length}\n          </Paper>\n          <Box textAlign=\"center\">\n            <Button\n              variant=\"contained\"\n              onClick={buttonHandler}\n              className=\"button\"\n              name=\"Arcive Vote\"\n              sx={{ m: 2, alignItems: \"center\" }}\n            >\n              Archive Vote\n            </Button>\n          </Box>\n        </Paper>\n      </Box>\n      <HelpPopup\n        heading=\"Vote Management Help\"\n        content=\"\n          This page allows you to view the details of the current active vote. \n          You can archive the vote by clicking the button at the bottom of the page. \n          By archiving a vote, users will no longer be able to cast any more votes.\n          Once vote is archived you will be able to create a new vote.\n        \"\n      ></HelpPopup>\n    </Container>\n  );\n};\n\nexport default VoteManagement;\n","import React, { useState } from \"react\";\nimport {\n  Button,\n  Grid,\n  List,\n  ListItem,\n  Container,\n  FormLabel,\n  FormControlLabel,\n  RadioGroup,\n  FormControl,\n  Typography,\n  Radio,\n  Divider,\n  Box,\n  Snackbar,\n  IconButton,\n  Paper,\n} from \"@mui/material\";\nimport { Close, HowToVote, Logout } from \"@mui/icons-material\";\nimport { Voting } from \"@daml.js/votencrypt\";\nimport { useParty, useLedger, useStreamQueries } from \"@daml/react\";\nimport { useNavigate, Link } from \"react-router-dom\";\n\ntype Props = {\n  onLogout: () => void;\n};\n\nconst VoteScreen: React.FC<Props> = ({ onLogout }) => {\n  const hashUsername = useParty();\n  const ledger = useLedger();\n\n  const [Popup, setPopup] = React.useState(false);\n  const [popupText, setPopupText] = React.useState(\"\");\n\n  const handleClose = (\n    event: React.SyntheticEvent | Event,\n    reason?: string\n  ) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n    setPopup(false);\n  };\n  const action = (\n    <React.Fragment>\n      <IconButton\n        size=\"small\"\n        aria-label=\"close\"\n        color=\"inherit\"\n        onClick={handleClose}\n      >\n        <Close fontSize=\"small\" />\n      </IconButton>\n    </React.Fragment>\n  );\n\n  const assets = useStreamQueries(Voting.Voting);\n  let userContract = ledger.fetchByKey(Voting.Voting, hashUsername);\n\n  const [radioStatus, setRadioStatus] = useState(\"\");\n  // get current unix time stamp\n  const now = new Date().getTime();\n\n  const buttonHandler = async () => {\n    if (assets.contracts[0]?.payload.voted.includes(hashUsername)) {\n      setPopupText(\"You have already voted\");\n\n      setPopup(true);\n    } else {\n      await ledger\n        .exerciseByKey(\n          Voting.Voting.Vote,\n          assets.contracts[0]?.signatories[0],\n          { voter: hashUsername, vote: radioStatus, unixTime: now }\n        )\n        .catch(console.error);\n      setPopupText(\"Your vote has been cast. Please or close the browser tab\");\n\n      setPopup(true);\n    }\n  };\n\n  return (\n    <>\n      <Box textAlign={\"right\"} sx={{ p: 1 }}>\n        <Button\n          variant=\"outlined\"\n          color=\"inherit\"\n          startIcon={<Logout />}\n          onClick={onLogout}\n          component={Link}\n          to=\"/\"\n        >\n          Log Out\n        </Button>\n      </Box>\n      <Container>\n        <Grid\n          container\n          direction=\"column\"\n          justifyContent=\"center\"\n          alignItems=\"center\"\n          style={{ height: \"75vh\" }}\n        >\n          <Paper\n            sx={{ p: 3, borderRadius: \"16px\", width: \"90%\" }}\n            elevation={2}\n          >\n            <Grid container spacing={0}>\n              <Grid item>\n                <HowToVote sx={{ fontSize: 50 }} color=\"primary\" />\n              </Grid>\n\n              <Grid item>\n                <Grid item>\n                  <Typography variant=\"h5\" display=\"block\">\n                    Vote\n                  </Typography>\n                </Grid>\n                <Grid item>\n                  <Typography\n                    variant=\"subtitle1\"\n                    color=\"secondary\"\n                    display=\"block\"\n                    style={{ lineHeight: \"15px\" }}\n                  >\n                    Read the vote description carefully and choose an option\n                  </Typography>\n                </Grid>\n              </Grid>\n            </Grid>\n\n            <Divider />\n\n            <Typography variant=\"h6\" sx={{ pt: 2 }}>\n              Vote Description\n            </Typography>\n            {assets.contracts[0]?.payload?.subject ?? \"Loading...\"}\n\n            <Divider sx={{ pb: 2 }} />\n            <Box textAlign=\"center\">\n              <FormControl>\n                <FormLabel id=\"demo-radio-buttons-group-label\">\n                  Options\n                </FormLabel>\n                <RadioGroup\n                  aria-labelledby=\"demo-radio-buttons-group-label\"\n                  defaultValue=\"female\"\n                  name=\"radio-buttons-group\"\n                >\n                  <List>\n                    {assets.contracts[0]?.payload?.candidates.map((item) => (\n                      <ListItem key={item}>\n                        <FormControlLabel\n                          value={item}\n                          control={<Radio />}\n                          label={item}\n                          onChange={(event) => {\n                            setRadioStatus(item);\n                          }}\n                        />\n                      </ListItem>\n                    ))}\n                  </List>\n                </RadioGroup>\n              </FormControl>\n            </Box>\n            <Box textAlign=\"center\">\n              <Button\n                variant=\"contained\"\n                onClick={buttonHandler}\n                className=\"button\"\n                name=\"Create Vote\"\n                sx={{ m: 2, alignItems: \"center\" }}\n              >\n                Vote\n              </Button>\n            </Box>\n            <Snackbar\n              open={Popup}\n              autoHideDuration={4000}\n              onClose={handleClose}\n              message={popupText}\n              action={action}\n            />\n          </Paper>\n        </Grid>\n      </Container>\n    </>\n  );\n};\n\nexport default VoteScreen;\n","import React, { useMemo, useState } from \"react\";\nimport {\n  Divider,\n  Grid,\n  Container,\n  Paper,\n  Typography,\n  Box,\n  LinearProgress,\n} from \"@mui/material\";\nimport { Poll } from \"@mui/icons-material\";\n\nimport { Voting } from \"@daml.js/votencrypt\";\n\nimport { useStreamQueries } from \"@daml/react\";\n\nimport {\n  Pie,\n  PieChart,\n  Tooltip,\n  Bar,\n  BarChart,\n  Cell,\n  XAxis,\n  LabelList,\n  CartesianGrid,\n  YAxis,\n  Line,\n  LineChart,\n  Legend,\n  Label,\n  ResponsiveContainer,\n} from \"recharts\";\n\nimport moment from \"moment\";\nimport HelpPopup from \"./HelpPopup\";\n\nconst VoteAnalytics: React.FC = () => {\n  const assets = useStreamQueries(Voting.Voting);\n  const votes = assets.contracts[0]?.payload?.votes || [];\n  const voters = assets.contracts[0]?.payload?.voters || [];\n  const voteTimes = assets.contracts[0]?.payload?.voteTimes || [];\n  const voteProgress = (votes.length / voters.length) * 100 || \"Loading...\";\n  const votesFrequency = useMemo(() => {\n    if (votes.length !== 0) {\n      const map = new Map<string, number>();\n      votes.forEach((vote) => {\n        if (map.has(vote)) {\n          map.set(vote, (map.get(vote) || 1) + 1);\n        } else {\n          map.set(vote, 1);\n        }\n      });\n      return [...map].map(([name, value]) => ({ name, value }));\n    } else {\n      return [\n        {\n          name: \"No Data\",\n          value: 0,\n        },\n      ];\n    }\n  }, [votes]);\n\n  // generate list of pastel colours based on length of data01\n  const colours = useMemo(() => {\n    const colours = [];\n    for (let i = 0; i < votesFrequency.length; i++) {\n      colours.push(`#${Math.random().toString(16).slice(2, 8)}`);\n    }\n    return colours;\n  }, [votesFrequency]);\n\n  // create a an array of objects with frequency in relationship with time\n  const votesFrequencyByTime = useMemo(() => {\n    if (votes.length !== 0) {\n      const map = new Map<number, number>();\n      voteTimes.forEach((voteTime) => {\n        var ajustedTime = voteTime.slice(0, -5) + \"00000\";\n        if (map.has(parseInt(ajustedTime))) {\n          map.set(\n            parseInt(ajustedTime),\n            (map.get(parseInt(ajustedTime)) || 1) + 1\n          );\n        } else {\n          map.set(parseInt(ajustedTime), 1);\n        }\n      });\n      return [...map].map(([time, value]) => ({ time, value })).reverse();\n    } else {\n      return [\n        {\n          time: 1,\n          value: 0,\n        },\n      ];\n    }\n  }, [voteTimes]);\n  return (\n    <Container>\n      <Box sx={{ p: 1 }}>\n        <Paper sx={{ p: 3, borderRadius: \"16px\" }} elevation={2}>\n          <Grid container spacing={0}>\n            <Grid item>\n              <Poll sx={{ fontSize: 50 }} color=\"primary\" />\n            </Grid>\n            <Grid item>\n              <Grid item>\n                <Typography variant=\"h5\" display=\"block\">\n                  Vote Analytics\n                </Typography>\n              </Grid>\n              <Grid item>\n                <Typography\n                  variant=\"subtitle1\"\n                  color=\"secondary\"\n                  display=\"block\"\n                  style={{ lineHeight: \"15px\" }}\n                >\n                  View current vote results\n                </Typography>\n              </Grid>\n            </Grid>\n          </Grid>\n\n          <Divider />\n          <Typography variant=\"h5\">Vote Progress: {voteProgress}%</Typography>\n          <LinearProgress variant=\"determinate\" value={voteProgress} />\n\n          <Grid container justifyContent=\"center\" alignItems=\"center\">\n            <Grid item>\n              <BarChart width={400} height={100} data={votesFrequency}>\n                <XAxis dataKey=\"name\" />\n                <Bar dataKey=\"value\" fill=\"#8884d8\">\n                  {votesFrequency.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={colours[index]} />\n                  ))}\n                </Bar>\n\n                <Tooltip />\n              </BarChart>\n            </Grid>\n            <Grid item>\n              <PieChart width={400} height={400}>\n                <Pie\n                  data={votesFrequency}\n                  dataKey=\"value\"\n                  nameKey=\"name\"\n                  // cx={200}\n                  // cy={200}\n                >\n                  {votesFrequency.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={colours[index]} />\n                  ))}\n\n                  <LabelList dataKey=\"name\" fill=\"white\" />\n                </Pie>\n                <Tooltip />\n              </PieChart>\n            </Grid>\n          </Grid>\n          <Typography variant=\"h5\" textAlign=\"center\">\n            Votes Over Time\n          </Typography>\n          <Box style={{ width: \"100%\", height: \"20vh\" }} textAlign=\"center\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <LineChart\n                width={500}\n                height={300}\n                data={votesFrequencyByTime}\n                margin={{\n                  top: 5,\n                  right: 30,\n                  left: 20,\n                  bottom: 20,\n                }}\n              >\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis\n                  dataKey=\"time\"\n                  tickFormatter={(unixTime) =>\n                    moment(unixTime).format(\"HH:mm Do\")\n                  }\n                >\n                  <Label value=\"Time\" fill=\"#8884d8\" position=\"bottom\" />\n                </XAxis>\n                <YAxis allowDecimals={false}>\n                  <Label value=\"Votes\" fill=\"#8884d8\" angle={-90} />\n                </YAxis>\n                <Tooltip />\n                <Line\n                  type=\"monotone\"\n                  name=\"Votes\"\n                  dataKey=\"value\"\n                  stroke=\"#8884d8\"\n                  activeDot={{ r: 8 }}\n                />\n                {/* <Line type=\"monotone\" dataKey=\"uv\" stroke=\"#82ca9d\" /> */}\n              </LineChart>\n            </ResponsiveContainer>\n          </Box>\n        </Paper>\n      </Box>\n      <HelpPopup\n        heading=\"Vote Analytics Help\"\n        content=\"\n          - This page shows the current vote results and the vote progress. \\n\n          - The vote progress is the percentage of votes casted out of the total number of voters. \\n\n          - The votes over time chart shows the number of votes that have been cast in relationship to time \\n\n        \"\n      ></HelpPopup>\n    </Container>\n  );\n};\n\nexport default VoteAnalytics;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useState } from \"react\";\n\nimport {\n  Button,\n  Container,\n  Slider,\n  List,\n  ListItem,\n  ListItemText,\n  TextField,\n  Typography,\n  Box,\n  Snackbar,\n  Grid,\n  Divider,\n  IconButton,\n  Paper,\n} from \"@mui/material\";\n\nimport {\n  Key,\n  Ballot,\n  Delete,\n  Close,\n  KeyboardReturn,\n} from \"@mui/icons-material\";\n\nimport { Voting } from \"@daml.js/votencrypt\";\n\nimport { useParty, useLedger, useStreamQueries } from \"@daml/react\";\n\nimport { createHash } from \"crypto\";\n\nimport HelpPopup from \"./HelpPopup\";\n\nlet voteKeys: string[] = [];\nlet hashedVoteKeys: string[] = [];\nconst MainView: React.FC = () => {\n  const hashUsername = useParty();\n  const [candidateList, setCandidateList] = useState<string[]>([]);\n\n  const [value, setValue] = React.useState<number>(10);\n  const [subjectText, setSubjectText] = useState(\"\");\n  const [candidateText, setCandidateText] = useState(\"\");\n  const [Popup, setPopup] = React.useState(false);\n  const [popupText, setPopupText] = React.useState(\"\");\n\n  const assets = useStreamQueries(Voting.Voting);\n\n  const ledger = useLedger();\n  const buttonHandler = async (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    const button: HTMLButtonElement = event.currentTarget;\n    if ((button.name === \"Create Vote\" && assets.contracts.length === 0)) {\n      setPopupText(\"Vote Created\");\n      setPopup(true);\n      const [voteKeys, hashedVoteKeys] = generateVoteKeys(value);\n\n      const voteDetails = {\n        username: hashUsername,\n        voters: hashedVoteKeys,\n        votes: [],\n        voted: [],\n        voteTimes: [],\n        candidates: candidateList,\n        subject: subjectText,\n      };\n      ledger.create(Voting.Voting, voteDetails);\n    } else {\n      setPopupText(\"Vote In Progress\");\n      setPopup(true);\n    }\n  };\n\n  function hash(input: string) {\n    return createHash(\"sha256\").update(input).digest(\"hex\");\n  }\n\n  const generateVoteKeys = (voterCount: any) => {\n    for (let i = 0; i < voterCount; i++) {\n      var crypto = require(\"crypto\");\n      var key = crypto.randomBytes(20).toString(\"hex\");\n      voteKeys.push(`${key}`);\n      hashedVoteKeys.push(hash(key));\n    }\n    return [voteKeys, hashedVoteKeys];\n  };\n\n  const addCandidate = () => {\n    if (candidateList.includes(candidateText)) {\n      setPopupText(\"Candidate already exists\");\n      setPopup(true);\n    } else {\n      setCandidateText(\"\");\n      // append candidateText to the start of candidateList\n      setCandidateList([candidateText, ...candidateList]);\n    }\n  };\n\n  // copy voteKeys to clipboard\n  const copyVoteKeys = () => {\n    navigator.clipboard.writeText(voteKeys.join(\"\\n\"));\n    setPopupText(\"Keys Copied To Clipboard\");\n    setPopup(true);\n  };\n\n  // export voteKeys to csv\n  const exportVoteKeys = () => {\n    const csv = voteKeys.join(\"\\n\");\n    const blob = new Blob([csv], { type: \"text/csv\" });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.download = \"voteKeys.csv\";\n    link.click();\n    setPopupText(\"Keys Exported\");\n    setPopup(true);\n  };\n\n  const handleClose = (\n    event: React.SyntheticEvent | Event,\n    reason?: string\n  ) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n\n    setPopup(false);\n  };\n  const action = (\n    <React.Fragment>\n      <IconButton\n        size=\"small\"\n        aria-label=\"close\"\n        color=\"inherit\"\n        onClick={handleClose}\n      >\n        <Close fontSize=\"small\" />\n      </IconButton>\n    </React.Fragment>\n  );\n\n  return (\n    <Container>\n      <Box sx={{ p: 1 }}>\n        <Paper sx={{ p: 3, borderRadius: \"16px\" }} elevation={2}>\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              flexWrap: \"wrap\",\n            }}\n          >\n            <Ballot sx={{ fontSize: 45 }} color=\"primary\" />\n            <Typography variant=\"h5\">Create A Vote</Typography>\n          </div>\n          <Divider sx={{ p: 0 }} />\n\n          <Typography variant=\"h6\" sx={{ pt: 2 }}>\n            What is the vote on?\n          </Typography>\n          <Box textAlign=\"center\">\n            <TextField\n              id=\"outlined-basic\"\n              label=\"Subject\"\n              variant=\"outlined\"\n              value={subjectText}\n              onChange={(event) => {\n                setSubjectText(event.target.value);\n              }}\n              style={{ width: \"94%\" }}\n              sx={{ m: 2 }}\n            />\n          </Box>\n          <Typography variant=\"h6\">Voters: {value}</Typography>\n\n          <Box textAlign=\"center\">\n            <Slider\n              value={value}\n              aria-label=\"Default\"\n              valueLabelDisplay=\"auto\"\n              name=\"slider\"\n              sx={{ m: 2 }}\n              style={{ width: \"95%\" }}\n              onChange={(event: any) => {\n                setValue(event.target.value);\n              }}\n            />\n          </Box>\n          <Typography variant=\"h6\">\n            Candidates: {candidateList.length}\n          </Typography>\n\n          <Box textAlign=\"center\">\n            <TextField\n              id=\"outlined-basic\"\n              label=\"Candidate\"\n              variant=\"outlined\"\n              value={candidateText}\n              //  onChange={handleChange}\n              onChange={(event) => {\n                setCandidateText(event.target.value);\n              }}\n              onKeyPress={(event) => {\n                if (event.key === \"Enter\") {\n                  event.preventDefault();\n                  addCandidate();\n                }\n              }}\n              style={{ width: \"95%\" }}\n              sx={{ m: 2 }}\n              InputProps={{\n                endAdornment: (\n                  <IconButton onClick={addCandidate}>\n                    <KeyboardReturn />\n                  </IconButton>\n                ),\n              }}\n            />\n\n            <List style={{ width: \"95%\" }} sx={{ ml: 2 }}>\n              {candidateList.map((item) => (\n                <ListItem\n                  key={item}\n                  secondaryAction={\n                    <IconButton\n                      edge=\"end\"\n                      aria-label=\"delete\"\n                      onClick={(e) => {\n                        setCandidateList((candidateList) =>\n                          candidateList.filter((i) => i !== item)\n                        );\n                      }}\n                    >\n                      <Delete />\n                    </IconButton>\n                  }\n                >\n                  <ListItemText primary={item} />\n                </ListItem>\n              ))}\n            </List>\n          </Box>\n\n          <Box textAlign=\"center\">\n            <Button\n              variant=\"contained\"\n              onClick={buttonHandler}\n              className=\"button\"\n              name=\"Create Vote\"\n              sx={{ m: 2, alignItems: \"center\" }}\n            >\n              Create Vote\n            </Button>\n          </Box>\n          <Snackbar\n            open={Popup}\n            autoHideDuration={2000}\n            onClose={handleClose}\n            message={popupText}\n            action={action}\n          />\n        </Paper>\n      </Box>\n\n      <Box sx={{ p: 1 }}>\n        <Paper sx={{ p: 3, borderRadius: \"16px\" }} elevation={2}>\n          <Grid container>\n            <Grid item>\n              <Key sx={{ fontSize: 45 }} color=\"primary\" />\n            </Grid>\n\n            <Grid item>\n              <Grid item>\n                <Typography variant=\"h5\" display=\"block\">\n                  Vote Keys\n                </Typography>\n              </Grid>\n              <Grid item>\n                <Typography\n                  variant=\"subtitle1\"\n                  color=\"secondary\"\n                  display=\"block\"\n                  style={{ lineHeight: \"15px\" }}\n                >\n                  Distribute vote keys between voters\n                </Typography>\n              </Grid>\n            </Grid>\n            <Box textAlign=\"right\" sx={{ flexGrow: 1 }}>\n              <Button\n                sx={{ margin: 1 }}\n                variant=\"contained\"\n                onClick={exportVoteKeys}\n              >\n                Export CSV\n              </Button>\n              <Button variant=\"contained\" onClick={copyVoteKeys}>\n                Copy To Clipboard\n              </Button>\n            </Box>\n          </Grid>\n\n          <List\n            sx={{\n              width: \"100%\",\n              bgcolor: \"background.paper\",\n              borderRadius: \"16px\",\n              position: \"relative\",\n              overflow: \"auto\",\n              maxHeight: 300,\n              \"& ul\": { padding: 0 },\n            }}\n            subheader={<li />}\n          >\n            {[0].map((sectionId) => (\n              <li key={`section-${sectionId}`}>\n                <ul>\n                  {voteKeys.map((item) => (\n                    <ListItem key={`item-${sectionId}-${item}`}>\n                      <ListItemText primary={`${item}`} />\n                    </ListItem>\n                  ))}\n                </ul>\n              </li>\n            ))}\n          </List>\n        </Paper>\n      </Box>\n\n      <HelpPopup\n        heading=\"How To Create A Vote\"\n        content=\"\n          1. Enter the subject of the vote.\\n\n          2. Enter the number of voters.\\n\n          3. Enter the number of candidates.\\n\n          4. Enter the candidates.\\n\n          5. Click on the create vote button.\\n\n          6. The vote will be created.\\n\n        \"\n      ></HelpPopup>\n    </Container>\n  );\n};\n\nexport default MainView;\n","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from \"react\";\nimport {\n  LoginScreenVote,\n  LoginScreenCreateVote,\n  LandingScreen,\n} from \"./LoginScreen\";\nimport { LogoutConfirm, PageNotFound } from \"./CatchNotFound\";\nimport MainScreen from \"./MainScreen\";\nimport VoteManagement from \"./VoteManagement\";\nimport VoteScreen from \"./VoteScreen\";\nimport DamlLedger from \"@daml/react\";\nimport Credentials from \"../Credentials\";\nimport { httpBaseUrl, wsBaseUrl } from \"../config\";\nimport { BrowserRouter as Router, Route, Routes } from \"react-router-dom\";\nimport CssBaseline from \"@mui/material/CssBaseline\";\nimport VoteAnalytics from \"./VoteAnalytics\";\nimport MainView from \"./MainView\";\nimport { createTheme, ThemeProvider, useMediaQuery } from \"@mui/material\";\n\nexport function themeSwitcher() {}\n\nconst App: React.FC = () => {\n  const [credentials, setCredentials] = React.useState<\n    Credentials | undefined\n  >();\n  // create a dark theme light theme switcher\n  const preferedScheme = useMediaQuery(\"(prefers-color-scheme: dark)\");\n\n  const theme = React.useMemo(\n    () =>\n      createTheme({\n        palette: {\n          mode: preferedScheme ? \"dark\" : \"light\",\n          primary: {\n            main: \"#387DF6\",\n          },\n          secondary: {\n            main: \"#666666\",\n          },\n        },\n\n        typography: {\n          fontFamily: \"Roboto, sans-serif\",\n          subtitle1: {\n            fontSize: 16,\n          },\n          h5: {\n            fontWeight: 700,\n            fontSize: 24,\n          },\n          h6: {\n            fontWeight: 500,\n          },\n        },\n      }),\n    [preferedScheme]\n  );\n  // app.use((req: any, res: any, next: any) => {\n  //   res.header(\"Access-Control-Allow-Origin\", \"*\");\n  //   next();\n  // });\n\n  return credentials ? (\n    <DamlLedger\n      token={credentials.token}\n      party={credentials.party}\n      httpBaseUrl={httpBaseUrl}\n      wsBaseUrl={wsBaseUrl}\n    >\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <div>\n          {/* <MainScreen onLogout={() => setCredentials(undefined)} /> */}\n\n          <Routes>\n            {/* <Route path=\"/\" component={Home} /> */}\n            <Route\n              path=\"/Vote\"\n              element={\n                <>\n                  <VoteScreen onLogout={() => setCredentials(undefined)} />\n                </>\n              }\n            ></Route>\n            <Route\n              path=\"/CreateVote\"\n              element={\n                <>\n                  <MainScreen onLogout={() => setCredentials(undefined)} />\n                  <MainView />\n                </>\n              }\n            ></Route>\n            <Route\n              path=\"/VoteAnalytics\"\n              element={\n                <>\n                  <MainScreen onLogout={() => setCredentials(undefined)} />\n                  <VoteAnalytics />\n                </>\n              }\n            ></Route>\n            <Route\n              path=\"/VoteManagement\"\n              element={\n                <>\n                  <MainScreen onLogout={() => setCredentials(undefined)} />\n                  <VoteManagement />\n                </>\n              }\n            ></Route>\n\n            <Route\n              path=\"*\"\n              element={\n                <LogoutConfirm onLogout={() => setCredentials(undefined)} />\n              }\n            ></Route>\n          </Routes>\n        </div>\n      </ThemeProvider>\n    </DamlLedger>\n  ) : (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <div>\n        <Routes>\n          {/* <Route path=\"/\" component={Home} /> */}\n\n          <Route\n            path=\"/\"\n            element={<LandingScreen onLogin={setCredentials} />}\n          ></Route>\n          <Route\n            path=\"/VoteLogin\"\n            element={<LoginScreenVote onLogin={setCredentials} />}\n          ></Route>\n          <Route\n            path=\"/CreateVoteLogin\"\n            element={<LoginScreenCreateVote onLogin={setCredentials} />}\n          ></Route>\n          <Route path=\"*\" element={<PageNotFound />}></Route>\n        </Routes>\n      </div>\n    </ThemeProvider>\n\n    //\n  );\n};\n// APP_END\n\nexport default App;\n","\nimport React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Auth0Provider } from '@auth0/auth0-react';\n\nconst Auth0ProviderWithHistory = ({ children }) => {\n  const domain = process.env.REACT_APP_AUTH0_DOMAIN;\n  const clientId = process.env.REACT_APP_AUTH0_CLIENT_ID;\n  const navigate = useNavigate();\n\n  const onRedirectCallback = (appState) => {\n    navigate(appState?.returnTo || window.location.pathname);\n  };\n\n  return (\n    <Auth0Provider\n      domain={domain}\n      clientId={clientId}\n      redirectUri={window.location.origin}\n      onRedirectCallback={onRedirectCallback}\n    >\n      {children}\n    </Auth0Provider>\n  );\n};\n\nexport default Auth0ProviderWithHistory;","// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport Auth0ProviderWithHistory from \"./auth/auth0-provider-with-history.js\";\n\n// import { Auth0Provider } from \"@auth0/auth0-react\";\n\nReactDOM.render(\n  <Router>\n    <Auth0ProviderWithHistory>\n      <App />\n    </Auth0ProviderWithHistory>\n  </Router>,\n\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}