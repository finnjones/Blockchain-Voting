(this["webpackJsonpvotencrypt"]=this["webpackJsonpvotencrypt"]||[]).push([[0],{396:function(e,t,n){},401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(402))},402:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(158),c=n(195),r=(n(101),n(403));t.Vote={decoder:c.lazyMemo((function(){return a.object({voter:c.Party.decoder,vote:c.Text.decoder,unixTime:c.Int.decoder})})),encode:function(e){return{voter:c.Party.encode(e.voter),vote:c.Text.encode(e.vote),unixTime:c.Int.encode(e.unixTime)}}},t.Voting={templateId:"882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643:Voting:Voting",keyDecoder:c.lazyMemo((function(){return c.lazyMemo((function(){return c.Party.decoder}))})),keyEncode:function(e){return c.Party.encode(e)},decoder:c.lazyMemo((function(){return a.object({username:c.Party.decoder,voters:c.List(c.Party).decoder,votes:c.List(c.Text).decoder,voted:c.List(c.Party).decoder,voteTimes:c.List(c.Int).decoder,candidates:c.List(c.Text).decoder,subject:c.Text.decoder})})),encode:function(e){return{username:c.Party.encode(e.username),voters:c.List(c.Party).encode(e.voters),votes:c.List(c.Text).encode(e.votes),voted:c.List(c.Party).encode(e.voted),voteTimes:c.List(c.Int).encode(e.voteTimes),candidates:c.List(c.Text).encode(e.candidates),subject:c.Text.encode(e.subject)}},Archive:{template:function(){return t.Voting},choiceName:"Archive",argumentDecoder:c.lazyMemo((function(){return r.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return r.DA.Internal.Template.Archive.encode(e)},resultDecoder:c.lazyMemo((function(){return c.Unit.decoder})),resultEncode:function(e){return c.Unit.encode(e)}},Vote:{template:function(){return t.Voting},choiceName:"Vote",argumentDecoder:c.lazyMemo((function(){return t.Vote.decoder})),argumentEncode:function(e){return t.Vote.encode(e)},resultDecoder:c.lazyMemo((function(){return c.ContractId(t.Voting).decoder})),resultEncode:function(e){return c.ContractId(t.Voting).encode(e)}}},c.registerTemplate(t.Voting),t.User={templateId:"882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643:Voting:User",keyDecoder:c.lazyMemo((function(){return c.lazyMemo((function(){return c.Party.decoder}))})),keyEncode:function(e){return c.Party.encode(e)},decoder:c.lazyMemo((function(){return a.object({username:c.Party.decoder})})),encode:function(e){return{username:c.Party.encode(e.username)}},Archive:{template:function(){return t.User},choiceName:"Archive",argumentDecoder:c.lazyMemo((function(){return r.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return r.DA.Internal.Template.Archive.encode(e)},resultDecoder:c.lazyMemo((function(){return c.Unit.decoder})),resultEncode:function(e){return c.Unit.encode(e)}}},c.registerTemplate(t.User)},403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(404);t.DA=a,t.packageId="d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662"},404:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(405);t.Internal=a},405:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(406);t.Template=a},406:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(407))},407:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(158),c=n(195);n(101);t.Archive={decoder:c.lazyMemo((function(){return a.object({})})),encode:function(e){return{}}}},413:function(e,t){},415:function(e,t){},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(401);t.Voting=a,t.packageId="882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643"},425:function(e,t){},427:function(e,t){},453:function(e,t){},455:function(e,t){},456:function(e,t){},461:function(e,t){},463:function(e,t){},469:function(e,t){},471:function(e,t){},490:function(e,t){},502:function(e,t){},505:function(e,t){},644:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(69),o=n.n(i),s=(n(396),n(10)),l=n(57),d=n(33),j=n.n(d),u=n(728),b=n(734),h=n(735),x=n(729),O=n(718),p=n(101),v=n.n(p),m=n(42),f=n(346),g=function(){var e,t=null!==(e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH0_DOMAIN:"votencrypt.au.auth0.com",REACT_APP_AUTH0_CLIENT_ID:"MeM1EPfpL5s7EG7hdki3aBTQa5wuCcYu"}).REACT_APP_LEDGER_ID)&&void 0!==e?e:"votencrypt-sandbox";return{provider:"none",ledgerId:t,makeToken:function(e){var n={"https://daml.com/ledger-api":{ledgerId:t,applicationId:"votencrypt",actAs:[e]}};return Object(f.encode)(n,"secret","HS256")}}}(),y=void 0,k=n(117),w=n(24),V=n(52),C=n(102),T=n(1);function A(e){return Object(k.createHash)("sha256").update(e).digest("hex")}var S=function(e){return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(u.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:"100vh"},children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(b.a,{variant:"h3",color:"primary",textAlign:"center",children:"Votencrypt"})}),Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(b.a,{variant:"h6",fontWeight:"600",color:"primary",textAlign:"center",children:"Secure Voting On The Blockchain"})}),Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(h.a,{sx:{p:2,borderRadius:"16px"},elevation:2,children:e})})]})})},P=function(e){var t=e.onLogin,n=Object(C.b)().loginWithPopup,i=Object(C.b)(),o=i.user,d=i.isAuthenticated,b=r.a.useState(!1),h=Object(s.a)(b,2),O=h[0],p=h[1],f=Object(w.f)(),k=Object(c.useCallback)(function(){var e=Object(l.a)(j.a.mark((function e(n){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new v.a({token:n.token,httpBaseUrl:y}),e.next=4,a.fetchByKey(m.Voting.User,n.party);case 4:if(null!==e.sent){e.next=10;break}return c={username:n.party},e.next=9,a.create(m.Voting.User,c);case 9:e.sent;case 10:f("/CreateVote"),t(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),P=r.a.useState(""),L=Object(s.a)(P,2),D=(L[0],L[1],function(){var e=Object(l.a)(j.a.mark((function e(){var t,n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===o){e.next=6;break}return n=(t=o||{name:"",picture:"",email:"",sub:""}).name,t.picture,t.email,c=t.sub,a=n,r=A(c),e.next=6,k({party:r,token:g.makeToken(r)});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),I=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0),!1===d&&n({screen_hint:"signup"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return!0===d&&!0===O?(D(),Object(T.jsx)(T.Fragment,{})):S(Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(u.a,{container:!0,direction:"column",style:{width:"400px"},spacing:2,children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(x.a,{variant:"contained",color:"primary",className:"test-select-login-button",onClick:I,style:{width:"100%"},children:"Create A Vote"})}),Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(x.a,{variant:"contained",color:"primary",className:"test-select-login-button",component:V.b,to:"/VoteLogin",style:{width:"100%"},children:"Vote"})})]})}))},L=function(e){var t=e.onLogin,n=Object(w.f)(),i=Object(c.useCallback)(function(){var e=Object(l.a)(j.a.mark((function e(a){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new v.a({token:a.token,httpBaseUrl:y}),e.next=4,c.fetchByKey(m.Voting.User,a.party);case 4:if(null!==e.sent){e.next=10;break}return r={username:a.party},e.next=9,c.create(m.Voting.User,r);case 9:e.sent;case 10:n("/Vote"),t(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),o=r.a.useState(""),d=Object(s.a)(o,2),b=d[0],h=d[1],p=function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=b,n=A(b),e.next=5,i({party:n,token:g.makeToken(n)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return S(Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(u.a,{container:!0,direction:"column",style:{width:"400px"},children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(O.a,{placeholder:"Enter Vote Key",value:b,className:"test-select-username-field",sx:{paddingBottom:2},style:{width:"100%"},onChange:function(e){return h(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),p(e))}})}),Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(x.a,{variant:"contained",color:"primary",className:"test-select-login-button",onClick:p,style:{width:"100%"},children:"Vote"})})]})}))},D=function(e){var t=e.onLogin,n=Object(w.f)(),i=Object(c.useCallback)(function(){var e=Object(l.a)(j.a.mark((function e(a){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new v.a({token:a.token,httpBaseUrl:y}),e.next=4,c.fetchByKey(m.Voting.User,a.party);case 4:if(null!==e.sent){e.next=10;break}return r={username:a.party},e.next=9,c.create(m.Voting.User,r);case 9:e.sent;case 10:n("/CreateVote"),t(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),o=r.a.useState(""),d=Object(s.a)(o,2),b=d[0],h=d[1],p=function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=b,n=A(b),e.next=5,i({party:n,token:g.makeToken(n)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return S(Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(u.a,{container:!0,direction:"column",style:{width:"400px"},children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(O.a,{placeholder:"Username",value:b,className:"test-select-username-field",sx:{paddingBottom:2},style:{width:"100%"},onChange:function(e){return h(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),p(e))}})}),Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(x.a,{variant:"contained",className:"test-select-login-button",onClick:p,style:{width:"100%"},children:"Create A Vote"})})]})}))},I=n(739),M=function(e){var t=e.onLogout,n=Object(w.f)();return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(I.a,{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",style:{height:"100vh"},children:Object(T.jsxs)(h.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsx)(b.a,{variant:"h5",sx:{flexGrow:1},noWrap:!0,children:"Are you sure you want to logout?"}),Object(T.jsx)(x.a,{variant:"contained",color:"primary",component:V.b,to:"/",onClick:t,sx:{m:2},children:"Log Out"}),Object(T.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){return n(1)},sx:{m:2},children:"Take me back"})]})})})},E=function(){return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(I.a,{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",style:{height:"100vh"},children:Object(T.jsxs)(h.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsx)(b.a,{variant:"h5",sx:{flexGrow:1},noWrap:!0,children:"Oops! Page not found."}),Object(T.jsx)(x.a,{variant:"contained",color:"primary",component:V.b,to:"/",sx:{m:2},children:"Go to home page"})]})})})},_=n(740),U=n(741),z=n(742),N=n(730),K=n(738),R=n(724),B=n(743),F=n(744),H=n(351),W=n.n(H),G=n(699),Q=n(700),J=n(701),Y=n(702),q=n(46),X=n.n(q),Z=function(e){e.onLogout;var t=Object(C.b)(),n=(t.isAuthenticated,t.logout),c=(Object(q.useParty)(),r.a.useState(!1)),i=Object(s.a)(c,2),o=i[0],l=i[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(I.a,{sx:{flexGrow:1,m:2},children:Object(T.jsx)(_.a,{position:"static",sx:{borderRadius:"16px"},children:Object(T.jsxs)(U.a,{children:[Object(T.jsx)(z.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:function(){l(!0)},className:"menu-button",children:Object(T.jsx)(W.a,{})}),Object(T.jsx)(b.a,{variant:"h5",sx:{flexGrow:1},noWrap:!0,children:"Votencrypt"}),Object(T.jsx)(x.a,{variant:"outlined",color:"inherit",startIcon:Object(T.jsx)(G.a,{}),onClick:function(){n({returnTo:window.location.origin})},children:"Log Out"})]})})}),Object(T.jsxs)(b.a,{variant:"h3",textAlign:"center",color:"primary",sx:{padding:3},children:["Welcome, ",a,"!"]}),Object(T.jsx)(N.a,{anchor:"left",open:o,onClose:function(){return l(!1)},children:Object(T.jsxs)(I.a,{p:2,width:"250px",textAlign:"center",role:"presentation",children:[Object(T.jsx)(b.a,{variant:"h6",component:"div",children:"Menu"}),Object(T.jsxs)(K.a,{children:[Object(T.jsxs)(R.a,{button:!0,component:V.b,to:"/CreateVote",className:"test-select-list-item",children:[Object(T.jsx)(B.a,{children:Object(T.jsx)(Q.a,{})}),Object(T.jsx)(F.a,{primary:"Create Vote"})]}),Object(T.jsxs)(R.a,{button:!0,component:V.b,to:"/VoteAnalytics",className:"test-select-list-item",children:[Object(T.jsx)(B.a,{children:Object(T.jsx)(J.a,{})}),Object(T.jsx)(F.a,{primary:"Analytics"})]}),Object(T.jsxs)(R.a,{button:!0,component:V.b,to:"/VoteManagement",className:"test-select-list-item",children:[Object(T.jsx)(B.a,{children:Object(T.jsx)(Y.a,{})}),Object(T.jsx)(F.a,{primary:"Vote Management"})]})]})]})})]})},$=n(745),ee=n(746),te=n(731),ne=n(725),ae=n(703),ce=function(e){var t=e.heading,n=e.content,a=c.useState(!1),r=Object(s.a)(a,2),i=r[0],o=r[1];return Object(T.jsxs)("div",{children:[Object(T.jsx)(ne.a,{ariaLabel:"SpeedDial basic example",sx:{position:"fixed",bottom:16,right:16},icon:Object(T.jsx)(ae.a,{}),onClick:function(){o(!0)}}),Object(T.jsxs)(te.a,{open:i,onClose:function(e){o(!1)},children:[Object(T.jsx)(b.a,{variant:"h6",textAlign:"center",sx:{p:1},children:t}),Object(T.jsx)(I.a,{sx:{p:4},children:Object(T.jsx)(b.a,{variant:"h6",style:{whiteSpace:"pre-line"},children:n.split("\\n").map((function(e,t){return Object(T.jsx)("div",{children:e},t)}))})})]})]})},re=function(){var e,t,n,a,c,r,i,o=Object(q.useLedger)(),s=Object(q.useStreamQueries)(m.Voting.Voting),d=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.archiveByKey(m.Voting.Voting,null===(t=s.contracts[0])||void 0===t?void 0:t.signatories[0]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)($.a,{children:[Object(T.jsx)(I.a,{sx:{p:1},children:Object(T.jsxs)(h.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)(u.a,{container:!0,spacing:0,children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(Y.a,{sx:{fontSize:50},color:"primary"})}),Object(T.jsxs)(u.a,{item:!0,children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(b.a,{variant:"h5",display:"block",children:"Vote Management"})}),Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(b.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Manage active vote"})})]})]}),Object(T.jsxs)(h.a,{sx:{px:5,pb:3,borderRadius:"16px"},variant:"outlined",children:[Object(T.jsx)(b.a,{variant:"h6",sx:{pt:2},children:"Vote Description"}),null!==(e=null===(t=s.contracts[0])||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.subject)&&void 0!==e?e:"Loading...",Object(T.jsx)(ee.a,{sx:{pt:2}}),Object(T.jsx)(b.a,{variant:"h6",sx:{pt:2},children:"Vote Candidates"}),Object(T.jsx)(K.a,{children:null===(a=s.contracts[0])||void 0===a||null===(c=a.payload)||void 0===c?void 0:c.candidates.map((function(e,t){return Object(T.jsx)(R.a,{children:Object(T.jsx)(F.a,{primary:t+1+". "+e})},e)}))}),Object(T.jsx)(ee.a,{sx:{pt:2}}),Object(T.jsx)(b.a,{variant:"h6",sx:{pt:2},children:"Number of voters"}),null===(r=s.contracts[0])||void 0===r||null===(i=r.payload)||void 0===i?void 0:i.voters.length]}),Object(T.jsx)(I.a,{textAlign:"center",children:Object(T.jsx)(x.a,{variant:"contained",onClick:d,className:"button",name:"Arcive Vote",sx:{m:2,alignItems:"center"},children:"Archive Vote"})})]})}),Object(T.jsx)(ce,{heading:"Vote Management Help",content:" This page allows you to view the details of the current active vote.  You can archive the vote by clicking the button at the bottom of the page.  By archiving a vote, users will no longer be able to cast any more votes. Once vote is archived you will be able to create a new vote. "})]})},ie=n(736),oe=n(695),se=n(732),le=n(747),de=n(721),je=n(726),ue=n(704),be=n(705),he=function(e){var t,n,a,i,o,d=e.onLogout,O=Object(q.useParty)(),p=Object(q.useLedger)(),v=r.a.useState(!1),f=Object(s.a)(v,2),g=f[0],y=f[1],k=r.a.useState(""),w=Object(s.a)(k,2),C=w[0],A=w[1],S=function(e,t){"clickaway"!==t&&y(!1)},P=Object(T.jsx)(r.a.Fragment,{children:Object(T.jsx)(z.a,{size:"small","aria-label":"close",color:"inherit",onClick:S,children:Object(T.jsx)(ue.a,{fontSize:"small"})})}),L=Object(q.useStreamQueries)(m.Voting.Voting),D=(p.fetchByKey(m.Voting.Voting,O),Object(c.useState)("")),M=Object(s.a)(D,2),E=M[0],_=M[1],U=(new Date).getTime(),N=function(){var e=Object(l.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=L.contracts[0])||void 0===t||!t.payload.voted.includes(O)){e.next=5;break}A("You have already voted"),y(!0),e.next=9;break;case 5:return e.next=7,p.exerciseByKey(m.Voting.Voting.Vote,null===(n=L.contracts[0])||void 0===n?void 0:n.signatories[0],{voter:O,vote:E,unixTime:U}).catch(console.error);case 7:A("Your vote has been cast. Please or close the browser tab"),y(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(I.a,{textAlign:"right",sx:{p:1},children:Object(T.jsx)(x.a,{variant:"outlined",color:"inherit",startIcon:Object(T.jsx)(G.a,{}),onClick:d,component:V.b,to:"/",children:"Log Out"})}),Object(T.jsx)($.a,{children:Object(T.jsx)(u.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:"75vh"},children:Object(T.jsxs)(h.a,{sx:{p:3,borderRadius:"16px",width:"90%"},elevation:2,children:[Object(T.jsxs)(u.a,{container:!0,spacing:0,children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(be.a,{sx:{fontSize:50},color:"primary"})}),Object(T.jsxs)(u.a,{item:!0,children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(b.a,{variant:"h5",display:"block",children:"Vote"})}),Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(b.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Read the vote description carefully and choose an option"})})]})]}),Object(T.jsx)(ee.a,{}),Object(T.jsx)(b.a,{variant:"h6",sx:{pt:2},children:"Vote Description"}),null!==(t=null===(n=L.contracts[0])||void 0===n||null===(a=n.payload)||void 0===a?void 0:a.subject)&&void 0!==t?t:"Loading...",Object(T.jsx)(ee.a,{sx:{pb:2}}),Object(T.jsx)(I.a,{textAlign:"center",children:Object(T.jsxs)(ie.a,{children:[Object(T.jsx)(oe.a,{id:"demo-radio-buttons-group-label",children:"Options"}),Object(T.jsx)(se.a,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"female",name:"radio-buttons-group",children:Object(T.jsx)(K.a,{children:null===(i=L.contracts[0])||void 0===i||null===(o=i.payload)||void 0===o?void 0:o.candidates.map((function(e){return Object(T.jsx)(R.a,{children:Object(T.jsx)(le.a,{value:e,control:Object(T.jsx)(de.a,{}),label:e,onChange:function(t){_(e)}})},e)}))})})]})}),Object(T.jsx)(I.a,{textAlign:"center",children:Object(T.jsx)(x.a,{variant:"contained",onClick:N,className:"button",name:"Create Vote",sx:{m:2,alignItems:"center"},children:"Vote"})}),Object(T.jsx)(je.a,{open:g,autoHideDuration:4e3,onClose:S,message:C,action:P})]})})})]})},xe=n(717),Oe=n(25),pe=n(748),ve=n(706),me=n(185),fe=n(363),ge=n(184),ye=n(154),ke=n(727),we=n(365),Ve=n(125),Ce=n(710),Te=n(711),Ae=n(712),Se=n(53),Pe=n(186),Le=n(370),De=n(352),Ie=n.n(De),Me=function(){var e,t,n,a,r,i,o=Object(q.useStreamQueries)(m.Voting.Voting),l=(null===(e=o.contracts[0])||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.votes)||[],d=(null===(n=o.contracts[0])||void 0===n||null===(a=n.payload)||void 0===a?void 0:a.voters)||[],j=(null===(r=o.contracts[0])||void 0===r||null===(i=r.payload)||void 0===i?void 0:i.voteTimes)||[],x=l.length/d.length*100||"Loading...",O=Object(c.useMemo)((function(){if(0!==l.length){var e=new Map;return l.forEach((function(t){e.has(t)?e.set(t,(e.get(t)||1)+1):e.set(t,1)})),Object(Oe.a)(e).map((function(e){var t=Object(s.a)(e,2);return{name:t[0],value:t[1]}}))}return[{name:"No Data",value:0}]}),[l]),p=Object(c.useMemo)((function(){for(var e=[],t=0;t<O.length;t++)e.push("#".concat(Math.random().toString(16).slice(2,8)));return e}),[O]),v=Object(c.useMemo)((function(){if(0!==l.length){var e=new Map;return j.forEach((function(t){var n=t.slice(0,-5)+"00000";e.has(parseInt(n))?e.set(parseInt(n),(e.get(parseInt(n))||1)+1):e.set(parseInt(n),1)})),Object(Oe.a)(e).map((function(e){var t=Object(s.a)(e,2);return{time:t[0],value:t[1]}})).reverse()}return[{time:1,value:0}]}),[j]);return Object(T.jsxs)($.a,{children:[Object(T.jsx)(I.a,{sx:{p:1},children:Object(T.jsxs)(h.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)(u.a,{container:!0,spacing:0,children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(J.a,{sx:{fontSize:50},color:"primary"})}),Object(T.jsxs)(u.a,{item:!0,children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(b.a,{variant:"h5",display:"block",children:"Vote Analytics"})}),Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(b.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"View current vote results"})})]})]}),Object(T.jsx)(ee.a,{}),Object(T.jsxs)(b.a,{variant:"h5",children:["Vote Progress: ",x,"%"]}),Object(T.jsx)(pe.a,{variant:"determinate",value:x}),Object(T.jsxs)(u.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsxs)(ve.a,{width:400,height:100,data:O,children:[Object(T.jsx)(me.a,{dataKey:"name"}),Object(T.jsx)(fe.a,{dataKey:"value",fill:"#8884d8",children:O.map((function(e,t){return Object(T.jsx)(ge.a,{fill:p[t]},"cell-".concat(t))}))}),Object(T.jsx)(ye.a,{})]})}),Object(T.jsx)(u.a,{item:!0,children:Object(T.jsxs)(ke.a,{width:400,height:400,children:[Object(T.jsxs)(we.a,{data:O,dataKey:"value",nameKey:"name",children:[O.map((function(e,t){return Object(T.jsx)(ge.a,{fill:p[t]},"cell-".concat(t))})),Object(T.jsx)(Ve.a,{dataKey:"name",fill:"white"})]}),Object(T.jsx)(ye.a,{})]})})]}),Object(T.jsx)(b.a,{variant:"h5",textAlign:"center",children:"Votes Over Time"}),Object(T.jsx)(I.a,{style:{width:"100%",height:"20vh"},textAlign:"center",children:Object(T.jsx)(Ce.a,{width:"100%",height:"100%",children:Object(T.jsxs)(Te.a,{width:500,height:300,data:v,margin:{top:5,right:30,left:20,bottom:20},children:[Object(T.jsx)(Ae.a,{strokeDasharray:"3 3"}),Object(T.jsx)(me.a,{dataKey:"time",tickFormatter:function(e){return Ie()(e).format("HH:mm Do")},children:Object(T.jsx)(Se.a,{value:"Time",fill:"#8884d8",position:"bottom"})}),Object(T.jsx)(Pe.a,{allowDecimals:!1,children:Object(T.jsx)(Se.a,{value:"Votes",fill:"#8884d8",angle:-90})}),Object(T.jsx)(ye.a,{}),Object(T.jsx)(Le.a,{type:"monotone",name:"Votes",dataKey:"value",stroke:"#8884d8",activeDot:{r:8}})]})})})]})}),Object(T.jsx)(ce,{heading:"Vote Analytics Help",content:" - This page shows the current vote results and the vote progress. \\n - The vote progress is the percentage of votes casted out of the total number of voters. \\n - The votes over time chart shows the number of votes that have been cast in relationship to time \\n "})]})},Ee=n(722),_e=n(713),Ue=n(714),ze=n(715),Ne=[],Ke=[],Re=function(){var e=Object(q.useParty)(),t=Object(c.useState)([]),a=Object(s.a)(t,2),i=a[0],o=a[1],d=r.a.useState(10),p=Object(s.a)(d,2),v=p[0],f=p[1],g=Object(c.useState)(""),y=Object(s.a)(g,2),w=y[0],V=y[1],C=Object(c.useState)(""),A=Object(s.a)(C,2),S=A[0],P=A[1],L=r.a.useState(!1),D=Object(s.a)(L,2),M=D[0],E=D[1],_=r.a.useState(""),U=Object(s.a)(_,2),N=U[0],B=U[1],H=Object(q.useStreamQueries)(m.Voting.Voting),W=Object(q.useLedger)(),G=function(){var t=Object(l.a)(j.a.mark((function t(n){var a,c,r,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),"Create Vote"===n.currentTarget.name&&0===H.contracts.length?(B("Vote Created"),E(!0),a=J(v),c=Object(s.a)(a,2),c[0],r=c[1],o={username:e,voters:r,votes:[],voted:[],voteTimes:[],candidates:i,subject:w},W.create(m.Voting.Voting,o)):(B("Vote In Progress"),E(!0));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var J=function(e){for(var t=0;t<e;t++){var a=n(117).randomBytes(20).toString("hex");Ne.push("".concat(a)),Ke.push((c=a,Object(k.createHash)("sha256").update(c).digest("hex")))}var c;return[Ne,Ke]},Y=function(){i.includes(S)?(B("Candidate already exists"),E(!0)):(P(""),o([S].concat(Object(Oe.a)(i))))},X=function(e,t){"clickaway"!==t&&E(!1)},Z=Object(T.jsx)(r.a.Fragment,{children:Object(T.jsx)(z.a,{size:"small","aria-label":"close",color:"inherit",onClick:X,children:Object(T.jsx)(ue.a,{fontSize:"small"})})});return Object(T.jsxs)($.a,{children:[Object(T.jsx)(I.a,{sx:{p:1},children:Object(T.jsxs)(h.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[Object(T.jsx)(Q.a,{sx:{fontSize:45},color:"primary"}),Object(T.jsx)(b.a,{variant:"h5",children:"Create A Vote"})]}),Object(T.jsx)(ee.a,{sx:{p:0}}),Object(T.jsx)(b.a,{variant:"h6",sx:{pt:2},children:"What is the vote on?"}),Object(T.jsx)(I.a,{textAlign:"center",children:Object(T.jsx)(O.a,{id:"outlined-basic",label:"Subject",variant:"outlined",value:w,onChange:function(e){V(e.target.value)},style:{width:"94%"},sx:{m:2}})}),Object(T.jsxs)(b.a,{variant:"h6",children:["Voters: ",v]}),Object(T.jsx)(I.a,{textAlign:"center",children:Object(T.jsx)(Ee.a,{value:v,"aria-label":"Default",valueLabelDisplay:"auto",name:"slider",sx:{m:2},style:{width:"95%"},onChange:function(e){f(e.target.value)}})}),Object(T.jsxs)(b.a,{variant:"h6",children:["Candidates: ",i.length]}),Object(T.jsxs)(I.a,{textAlign:"center",children:[Object(T.jsx)(O.a,{id:"outlined-basic",label:"Candidate",variant:"outlined",value:S,onChange:function(e){P(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),Y())},style:{width:"95%"},sx:{m:2},InputProps:{endAdornment:Object(T.jsx)(z.a,{onClick:Y,children:Object(T.jsx)(_e.a,{})})}}),Object(T.jsx)(K.a,{style:{width:"95%"},sx:{ml:2},children:i.map((function(e){return Object(T.jsx)(R.a,{secondaryAction:Object(T.jsx)(z.a,{edge:"end","aria-label":"delete",onClick:function(t){o((function(t){return t.filter((function(t){return t!==e}))}))},children:Object(T.jsx)(Ue.a,{})}),children:Object(T.jsx)(F.a,{primary:e})},e)}))})]}),Object(T.jsx)(I.a,{textAlign:"center",children:Object(T.jsx)(x.a,{variant:"contained",onClick:G,className:"button",name:"Create Vote",sx:{m:2,alignItems:"center"},children:"Create Vote"})}),Object(T.jsx)(je.a,{open:M,autoHideDuration:2e3,onClose:X,message:N,action:Z})]})}),Object(T.jsx)(I.a,{sx:{p:1},children:Object(T.jsxs)(h.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)(u.a,{container:!0,children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(ze.a,{sx:{fontSize:45},color:"primary"})}),Object(T.jsxs)(u.a,{item:!0,children:[Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(b.a,{variant:"h5",display:"block",children:"Vote Keys"})}),Object(T.jsx)(u.a,{item:!0,children:Object(T.jsx)(b.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Distribute vote keys between voters"})})]}),Object(T.jsxs)(I.a,{textAlign:"right",sx:{flexGrow:1},children:[Object(T.jsx)(x.a,{sx:{margin:1},variant:"contained",onClick:function(){var e=Ne.join("\n"),t=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="voteKeys.csv",a.click(),B("Keys Exported"),E(!0)},children:"Export CSV"}),Object(T.jsx)(x.a,{variant:"contained",onClick:function(){navigator.clipboard.writeText(Ne.join("\n")),B("Keys Copied To Clipboard"),E(!0)},children:"Copy To Clipboard"})]})]}),Object(T.jsx)(K.a,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:"16px",position:"relative",overflow:"auto",maxHeight:300,"& ul":{padding:0}},subheader:Object(T.jsx)("li",{}),children:[0].map((function(e){return Object(T.jsx)("li",{children:Object(T.jsx)("ul",{children:Ne.map((function(t){return Object(T.jsx)(R.a,{children:Object(T.jsx)(F.a,{primary:"".concat(t)})},"item-".concat(e,"-").concat(t))}))})},"section-".concat(e))}))})]})}),Object(T.jsx)(ce,{heading:"How To Create A Vote",content:" 1. Enter the subject of the vote.\\n 2. Enter the number of voters.\\n 3. Enter the number of candidates.\\n 4. Enter the candidates.\\n 5. Click on the create vote button.\\n 6. The vote will be created.\\n "})]})},Be=n(716),Fe=n(371),He=n(733);var We=function(){var e=r.a.useState(),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(Be.a)("(prefers-color-scheme: dark)"),i=r.a.useMemo((function(){return Object(Fe.a)({palette:{mode:c?"dark":"light",primary:{main:"#387DF6"},secondary:{main:"#666666"}},typography:{fontFamily:"Roboto, sans-serif",subtitle1:{fontSize:16},h5:{fontWeight:700,fontSize:24},h6:{fontWeight:500}}})}),[c]);return n?Object(T.jsx)(X.a,{token:n.token,party:n.party,httpBaseUrl:y,wsBaseUrl:undefined,children:Object(T.jsxs)(He.a,{theme:i,children:[Object(T.jsx)(xe.a,{}),Object(T.jsx)("div",{children:Object(T.jsxs)(w.c,{children:[Object(T.jsx)(w.a,{path:"/Vote",element:Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(he,{onLogout:function(){return a(void 0)}})})}),Object(T.jsx)(w.a,{path:"/CreateVote",element:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Z,{onLogout:function(){return a(void 0)}}),Object(T.jsx)(Re,{})]})}),Object(T.jsx)(w.a,{path:"/VoteAnalytics",element:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Z,{onLogout:function(){return a(void 0)}}),Object(T.jsx)(Me,{})]})}),Object(T.jsx)(w.a,{path:"/VoteManagement",element:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Z,{onLogout:function(){return a(void 0)}}),Object(T.jsx)(re,{})]})}),Object(T.jsx)(w.a,{path:"*",element:Object(T.jsx)(M,{onLogout:function(){return a(void 0)}})})]})})]})}):Object(T.jsxs)(He.a,{theme:i,children:[Object(T.jsx)(xe.a,{}),Object(T.jsx)("div",{children:Object(T.jsxs)(w.c,{children:[Object(T.jsx)(w.a,{path:"/",element:Object(T.jsx)(P,{onLogin:a})}),Object(T.jsx)(w.a,{path:"/VoteLogin",element:Object(T.jsx)(L,{onLogin:a})}),Object(T.jsx)(w.a,{path:"/CreateVoteLogin",element:Object(T.jsx)(D,{onLogin:a})}),Object(T.jsx)(w.a,{path:"*",element:Object(T.jsx)(E,{})})]})})]})},Ge=function(e){var t=e.children,n=Object(w.f)();return Object(T.jsx)(C.a,{domain:"votencrypt.au.auth0.com",clientId:"MeM1EPfpL5s7EG7hdki3aBTQa5wuCcYu",redirectUri:window.location.origin,onRedirectCallback:function(e){n((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},children:t})};o.a.render(Object(T.jsx)(V.a,{children:Object(T.jsx)(Ge,{children:Object(T.jsx)(We,{})})}),document.getElementById("root"))}},[[644,1,2]]]);
//# sourceMappingURL=main.bd0559a4.chunk.js.map