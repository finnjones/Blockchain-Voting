{"ast":null,"code":"import _slicedToArray from\"/Users/finn.jones/Documents/Github/Blockchain-Voting/Testing/create-daml-app/ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from\"react\";import{Typography,Box,IconButton,Toolbar,Drawer,Button,List,ListItem,ListItemIcon,ListItemText,AppBar}from\"@mui/material\";import{Link}from\"react-router-dom\";import MenuIcon from\"@mui/icons-material/Menu\";import{Ballot,Poll,Logout}from\"@mui/icons-material\";import{useStreamFetchByKeys,useParty}from\"@daml/react\";import{Voting}from\"@daml.js/create-daml-app\";import{usernameExport}from\"./LoginScreen\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MainScreen=function MainScreen(_ref){var onLogout=_ref.onLogout;var hashUsername=useParty();console.log(hashUsername);var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var myUserResult=useStreamFetchByKeys(Voting.User,function(){return[hashUsername];},[hashUsername]);var handleDrawerOpen=function handleDrawerOpen(){setOpen(true);};// use the url to tell if user is voter or creating vote\nif(window.location.pathname!==\"/\"){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1},children:/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(IconButton,{color:\"inherit\",\"aria-label\":\"open drawer\",edge:\"start\",onClick:handleDrawerOpen,className:\"menu-button\",children:/*#__PURE__*/_jsx(MenuIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",sx:{flexGrow:1},noWrap:true,children:\"Votencrypt\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"inherit\",startIcon:/*#__PURE__*/_jsx(Logout,{}),onClick:onLogout,children:\"Log Out\"})]})})}),/*#__PURE__*/_jsxs(Typography,{variant:\"h3\",textAlign:\"center\",color:\"primary\",sx:{padding:3},children:[\"Welcome, \",usernameExport,\"!\"]}),/*#__PURE__*/_jsx(Drawer,{anchor:\"left\",open:open,onClose:function onClose(){return setOpen(false);},children:/*#__PURE__*/_jsxs(Box,{p:2,width:\"250px\",textAlign:\"center\",role:\"presentation\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",children:\"Menu\"}),/*#__PURE__*/_jsxs(List,{children:[/*#__PURE__*/_jsxs(ListItem,{button:true,component:Link,to:\"/CreateVote\",className:\"test-select-list-item\",children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Ballot,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Create Vote\"})]}),/*#__PURE__*/_jsxs(ListItem,{button:true,component:Link,to:\"/VoteAnalytics\",className:\"test-select-list-item\",children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(Poll,{})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Analytics\"})]})]})]})})]});}else{return/*#__PURE__*/_jsx(_Fragment,{});}// return (\n//   <>\n{/* <Button\n          variant=\"outlined\"\n          color=\"primary\"\n          startIcon={<Logout />}\n          onClick={onLogout}\n        >\n          Log Out\n        </Button>\n        <Menu icon borderless>\n          <Menu.Item></Menu.Item>\n          <Menu.Menu position=\"right\" className=\"test-select-main-menu\">\n            <Menu.Item position=\"right\">\n              Current vote key in use, {usernameExport}\n            </Menu.Item>\n            <Menu.Item\n              position=\"right\"\n              active={false}\n              className=\"test-select-log-out\"\n              onClick={onLogout}\n              icon=\"log out\"\n            />\n          </Menu.Menu>\n        </Menu> */}//   </>\n// );\n};export default MainScreen;","map":{"version":3,"sources":["/Users/finn.jones/Documents/Github/Blockchain-Voting/Testing/create-daml-app/ui/src/components/MainScreen.tsx"],"names":["React","Typography","Box","IconButton","Toolbar","Drawer","Button","List","ListItem","ListItemIcon","ListItemText","AppBar","Link","MenuIcon","Ballot","Poll","Logout","useStreamFetchByKeys","useParty","Voting","usernameExport","MainScreen","onLogout","hashUsername","console","log","useState","open","setOpen","myUserResult","User","handleDrawerOpen","window","location","pathname","flexGrow","padding"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from \"react\";\nimport {\n  Typography,\n  Box,\n  IconButton,\n  Toolbar,\n  Drawer,\n  Button,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  AppBar,\n} from \"@mui/material\";\n\nimport { Link } from \"react-router-dom\";\nimport MenuIcon from \"@mui/icons-material/Menu\";\nimport { Ballot, Poll, Logout } from \"@mui/icons-material\";\nimport { useStreamFetchByKeys, useParty } from \"@daml/react\";\nimport { Voting } from \"@daml.js/create-daml-app\";\nimport { usernameExport } from \"./LoginScreen\";\n\ntype Props = {\n  onLogout: () => void;\n};\n\nconst MainScreen: React.FC<Props> = ({ onLogout }) => {\n  const hashUsername = useParty();\n  console.log(hashUsername);\n  const [open, setOpen] = React.useState(false);\n  const myUserResult = useStreamFetchByKeys(Voting.User, () => [hashUsername], [\n    hashUsername,\n  ]);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n\n  // use the url to tell if user is voter or creating vote\n  if (window.location.pathname !== \"/\") {\n    return (\n      <>\n        <Box sx={{ flexGrow: 1 }}>\n          <AppBar position=\"static\">\n            <Toolbar>\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open drawer\"\n                edge=\"start\"\n                onClick={handleDrawerOpen}\n                className=\"menu-button\"\n              >\n                <MenuIcon />\n              </IconButton>\n\n              <Typography variant=\"h5\" sx={{ flexGrow: 1 }} noWrap>\n                Votencrypt\n              </Typography>\n\n              <Button\n                variant=\"outlined\"\n                color=\"inherit\"\n                startIcon={<Logout />}\n                onClick={onLogout}\n              >\n                Log Out\n              </Button>\n            </Toolbar>\n          </AppBar>\n        </Box>\n        <Typography\n          variant=\"h3\"\n          textAlign=\"center\"\n          color=\"primary\"\n          sx={{ padding: 3 }}\n        >\n          Welcome, {usernameExport}!\n        </Typography>\n        <Drawer anchor=\"left\" open={open} onClose={() => setOpen(false)}>\n          <Box p={2} width=\"250px\" textAlign=\"center\" role=\"presentation\">\n            <Typography variant=\"h6\" component=\"div\">\n              Menu\n            </Typography>\n            <List>\n              <ListItem\n                button\n                component={Link}\n                to=\"/CreateVote\"\n                className=\"test-select-list-item\"\n              >\n                <ListItemIcon>\n                  <Ballot />\n                </ListItemIcon>\n                <ListItemText primary=\"Create Vote\" />\n              </ListItem>\n\n              <ListItem\n                button\n                component={Link}\n                to=\"/VoteAnalytics\"\n                className=\"test-select-list-item\"\n              >\n                <ListItemIcon>\n                  <Poll />\n                </ListItemIcon>\n                <ListItemText primary=\"Analytics\" />\n              </ListItem>\n            </List>\n          </Box>\n        </Drawer>\n      </>\n    );\n  } else {\n    return <></>;\n  }\n\n  // return (\n  //   <>\n  {\n    /* <Button\n          variant=\"outlined\"\n          color=\"primary\"\n          startIcon={<Logout />}\n          onClick={onLogout}\n        >\n          Log Out\n        </Button>\n        <Menu icon borderless>\n          <Menu.Item></Menu.Item>\n          <Menu.Menu position=\"right\" className=\"test-select-main-menu\">\n            <Menu.Item position=\"right\">\n              Current vote key in use, {usernameExport}\n            </Menu.Item>\n            <Menu.Item\n              position=\"right\"\n              active={false}\n              className=\"test-select-log-out\"\n              onClick={onLogout}\n              icon=\"log out\"\n            />\n          </Menu.Menu>\n        </Menu> */\n  }\n  //   </>\n  // );\n};\n\nexport default MainScreen;\n"]},"metadata":{},"sourceType":"module"}