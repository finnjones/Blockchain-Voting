{"ast":null,"code":"import _asyncToGenerator from\"/Users/finn.jones/Documents/Github/Blockchain-Voting/Testing/create-daml-app/ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/finn.jones/Documents/Github/Blockchain-Voting/Testing/create-daml-app/ui/node_modules/@babel/runtime/regenerator/index.js\";import React from\"react\";import{Paper,Typography,Container,Grid,Divider,Box,Button,List,ListItem,ListItemText}from\"@mui/material\";import{useLedger,useStreamQueries}from\"@daml/react\";import{Voting}from\"@daml.js/create-daml-app\";import{PublishedWithChanges}from\"@mui/icons-material\";import HelpPopup from\"./HelpPopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var VoteManagement=function VoteManagement(){var _assets$contracts$0$p,_assets$contracts$2,_assets$contracts$2$p,_assets$contracts$3,_assets$contracts$3$p,_assets$contracts$4,_assets$contracts$4$p;var ledger=useLedger();var assets=useStreamQueries(Voting.Voting);var buttonHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _assets$contracts$;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return ledger.archiveByKey(Voting.Voting,(_assets$contracts$=assets.contracts[0])===null||_assets$contracts$===void 0?void 0:_assets$contracts$.signatories[0]);case 2:case\"end\":return _context.stop();}}},_callee);}));return function buttonHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Box,{sx:{p:1},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3,borderRadius:\"16px\"},elevation:2,children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:0,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(PublishedWithChanges,{sx:{fontSize:50},color:\"primary\"})}),/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",display:\"block\",children:\"Vote Management\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"secondary\",display:\"block\",style:{lineHeight:\"15px\"},children:\"Manage active vote\"})})]})]}),/*#__PURE__*/_jsxs(Paper,{sx:{px:5,pb:3,borderRadius:\"16px\"},variant:\"outlined\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{pt:2},children:\"Vote Description\"}),(_assets$contracts$0$p=(_assets$contracts$2=assets.contracts[0])===null||_assets$contracts$2===void 0?void 0:(_assets$contracts$2$p=_assets$contracts$2.payload)===null||_assets$contracts$2$p===void 0?void 0:_assets$contracts$2$p.subject)!==null&&_assets$contracts$0$p!==void 0?_assets$contracts$0$p:\"Loading...\",/*#__PURE__*/_jsx(Divider,{sx:{pt:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{pt:2},children:\"Vote Candidates\"}),/*#__PURE__*/_jsx(List,{children:(_assets$contracts$3=assets.contracts[0])===null||_assets$contracts$3===void 0?void 0:(_assets$contracts$3$p=_assets$contracts$3.payload)===null||_assets$contracts$3$p===void 0?void 0:_assets$contracts$3$p.candidates.map(function(item,currentItem){return/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:currentItem+1+\". \"+item})},item);})}),/*#__PURE__*/_jsx(Divider,{sx:{pt:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{pt:2},children:\"Number of voters\"}),(_assets$contracts$4=assets.contracts[0])===null||_assets$contracts$4===void 0?void 0:(_assets$contracts$4$p=_assets$contracts$4.payload)===null||_assets$contracts$4$p===void 0?void 0:_assets$contracts$4$p.voters.length]}),/*#__PURE__*/_jsx(Box,{textAlign:\"center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:buttonHandler,className:\"button\",name:\"Arcive Vote\",sx:{m:2,alignItems:\"center\"},children:\"Archive Vote\"})})]})}),/*#__PURE__*/_jsx(HelpPopup,{heading:\"Vote Management Help\",content:\" This page allows you to view the details of the current active vote.  You can archive the vote by clicking the button at the bottom of the page.  By archiving a vote, users will no longer be able to cast any more votes. Once vote is archived you will be able to create a new vote. \"})]});};export default VoteManagement;","map":{"version":3,"sources":["/Users/finn.jones/Documents/Github/Blockchain-Voting/Testing/create-daml-app/ui/src/components/VoteManagement.tsx"],"names":["React","Paper","Typography","Container","Grid","Divider","Box","Button","List","ListItem","ListItemText","useLedger","useStreamQueries","Voting","PublishedWithChanges","HelpPopup","VoteManagement","ledger","assets","buttonHandler","archiveByKey","contracts","signatories","p","borderRadius","fontSize","lineHeight","px","pb","pt","payload","subject","candidates","map","item","currentItem","voters","length","m","alignItems"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport {\n  Paper,\n  Typography,\n  Container,\n  Grid,\n  Divider,\n  Box,\n  Button,\n  List,\n  ListItem,\n  ListItemText,\n} from \"@mui/material\";\n\nimport { useLedger, useStreamQueries } from \"@daml/react\";\n\nimport { Voting } from \"@daml.js/create-daml-app\";\n\nimport { PublishedWithChanges } from \"@mui/icons-material\";\nimport HelpPopup from \"./HelpPopup\";\n\nconst VoteManagement: React.FC = () => {\n  const ledger = useLedger();\n\n  const assets = useStreamQueries(Voting.Voting);\n  const buttonHandler = async () => {\n    await ledger.archiveByKey(\n      Voting.Voting,\n      assets.contracts[0]?.signatories[0]\n    );\n  };\n  return (\n    <Container>\n      <Box sx={{ p: 1 }}>\n        <Paper sx={{ p: 3, borderRadius: \"16px\" }} elevation={2}>\n          <Grid container spacing={0}>\n            <Grid item>\n              <PublishedWithChanges sx={{ fontSize: 50 }} color=\"primary\" />\n            </Grid>\n\n            <Grid item>\n              <Grid item>\n                <Typography variant=\"h5\" display=\"block\">\n                  Vote Management\n                </Typography>\n              </Grid>\n              <Grid item>\n                <Typography\n                  variant=\"subtitle1\"\n                  color=\"secondary\"\n                  display=\"block\"\n                  style={{ lineHeight: \"15px\" }}\n                >\n                  Manage active vote\n                </Typography>\n              </Grid>\n            </Grid>\n          </Grid>\n          <Paper sx={{ px: 5, pb: 3, borderRadius: \"16px\" }} variant=\"outlined\">\n            <Typography variant=\"h6\" sx={{ pt: 2 }}>\n              Vote Description\n            </Typography>\n            {assets.contracts[0]?.payload?.subject ?? \"Loading...\"}\n            <Divider sx={{ pt: 2 }} />\n            <Typography variant=\"h6\" sx={{ pt: 2 }}>\n              Vote Candidates\n            </Typography>\n            <List>\n              {assets.contracts[0]?.payload?.candidates.map(\n                (item, currentItem) => (\n                  <ListItem key={item}>\n                    <ListItemText primary={currentItem + 1 + \". \" + item} />\n                  </ListItem>\n                )\n              )}\n            </List>\n            <Divider sx={{ pt: 2 }} />\n\n            {/* Number of voters */}\n            <Typography variant=\"h6\" sx={{ pt: 2 }}>\n              Number of voters\n            </Typography>\n            {assets.contracts[0]?.payload?.voters.length}\n          </Paper>\n          <Box textAlign=\"center\">\n            <Button\n              variant=\"contained\"\n              onClick={buttonHandler}\n              className=\"button\"\n              name=\"Arcive Vote\"\n              sx={{ m: 2, alignItems: \"center\" }}\n            >\n              Archive Vote\n            </Button>\n          </Box>\n        </Paper>\n      </Box>\n      <HelpPopup\n        heading=\"Vote Management Help\"\n        content=\"\n          This page allows you to view the details of the current active vote. \n          You can archive the vote by clicking the button at the bottom of the page. \n          By archiving a vote, users will no longer be able to cast any more votes.\n          Once vote is archived you will be able to create a new vote.\n        \"\n      ></HelpPopup>\n    </Container>\n  );\n};\n\nexport default VoteManagement;\n"]},"metadata":{},"sourceType":"module"}