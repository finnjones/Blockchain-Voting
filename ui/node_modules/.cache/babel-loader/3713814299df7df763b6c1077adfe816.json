{"ast":null,"code":"var _jsxFileName = \"/Users/finn.jones/Documents/Github/Blockchain-Voting/Testing/create-daml-app/ui/src/components/MainView.tsx\",\n    _s = $RefreshSig$();\n\n// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useState } from \"react\";\nimport { Button, Container, Slider, List, ListItem, ListItemText, TextField, Typography, Box, Snackbar, Grid, Divider, IconButton, Paper } from \"@mui/material\";\nimport { Key, Ballot, Delete, Close, KeyboardReturn } from \"@mui/icons-material\";\nimport { Voting } from \"@daml.js/create-daml-app\";\nimport { useParty, useLedger, useStreamQueries } from \"@daml/react\";\nimport { createHash } from \"crypto\";\nimport HelpPopup from \"./HelpPopup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet hashedVoteKeys = [];\n\nconst MainView = () => {\n  _s();\n\n  var _assets$contracts$, _assets$contracts$$pa;\n\n  const hashUsername = useParty();\n  const [candidateList, setCandidateList] = useState([]);\n  const [voteKeys, setVoteKeys] = useState([]);\n  const [value, setValue] = React.useState(10);\n  const [subjectText, setSubjectText] = useState(\"\");\n  const [candidateText, setCandidateText] = useState(\"\");\n  const [Popup, setPopup] = React.useState(false);\n  const [popupText, setPopupText] = React.useState(\"\");\n  const assets = useStreamQueries(Voting.Voting);\n\n  if (JSON.parse(localStorage.getItem(\"voteKeys\") || \"test\").toString() !== voteKeys.toString() && ((_assets$contracts$ = assets.contracts[0]) === null || _assets$contracts$ === void 0 ? void 0 : (_assets$contracts$$pa = _assets$contracts$.payload) === null || _assets$contracts$$pa === void 0 ? void 0 : _assets$contracts$$pa.voters) !== undefined) {\n    setVoteKeys(JSON.parse(localStorage.getItem(\"voteKeys\") || \"test\"));\n  }\n\n  const ledger = useLedger();\n\n  const buttonHandler = async event => {\n    event.preventDefault();\n\n    if (assets.contracts.length === 0) {\n      const keys = generateVoteKeys(value);\n      setVoteKeys(keys[0]);\n      localStorage.setItem(\"voteKeys\", JSON.stringify(keys[0]));\n      const voteDetails = {\n        username: hashUsername,\n        voters: hashedVoteKeys,\n        votes: [],\n        voted: [],\n        voteTimes: [],\n        candidates: candidateList,\n        subject: subjectText\n      };\n      ledger.create(Voting.Voting, voteDetails);\n      setPopupText(\"Vote Created\");\n      setPopup(true);\n    } else {\n      setPopupText(\"Vote In Progress\");\n      setPopup(true);\n    }\n  };\n\n  function hash(input) {\n    return createHash(\"sha256\").update(input).digest(\"hex\");\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const values = {\n      name: \"jefflolshort\",\n      email: \"jefflolshort@gmail.com\",\n      message: \"test\"\n    };\n    var str = \"jefflolshort@student.scots.com\";\n    var nameMatch = str.match(/^([^@]*)@/);\n    var name = nameMatch ? nameMatch[1] : null;\n    console.log(name); // emailjs.send(\n    //   \"service_es53dwq\",\n    //   \"template_9e2xqtw\",\n    //   values,\n    //   \"pwgIagqBDgmParume\"\n    // );\n  };\n\n  const generateVoteKeys = voterCount => {\n    for (let i = 0; i < voterCount; i++) {\n      var crypto = require(\"crypto\");\n\n      var key = crypto.randomBytes(20).toString(\"hex\");\n      voteKeys.push(`${key}`);\n      hashedVoteKeys.push(hash(key));\n    }\n\n    return [voteKeys, hashedVoteKeys];\n  };\n\n  const addCandidate = () => {\n    if (candidateList.includes(candidateText)) {\n      setPopupText(\"Candidate already exists\");\n      setPopup(true);\n    } else {\n      setCandidateText(\"\"); // append candidateText to the start of candidateList\n\n      setCandidateList([candidateText, ...candidateList]);\n    }\n  }; // copy voteKeys to clipboard\n\n\n  const copyVoteKeys = () => {\n    navigator.clipboard.writeText(voteKeys.join(\"\\n\"));\n    setPopupText(\"Keys Copied To Clipboard\");\n    setPopup(true);\n  }; // export voteKeys to csv\n\n\n  const exportVoteKeys = () => {\n    const csv = voteKeys.join(\"\\n\");\n    const blob = new Blob([csv], {\n      type: \"text/csv\"\n    });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.download = \"voteKeys.csv\";\n    link.click();\n    setPopupText(\"Keys Exported\");\n    setPopup(true);\n  };\n\n  const handleClose = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n\n    setPopup(false);\n  };\n\n  const action = /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(IconButton, {\n      size: \"small\",\n      \"aria-label\": \"close\",\n      color: \"inherit\",\n      onClick: handleClose,\n      children: /*#__PURE__*/_jsxDEV(Close, {\n        fontSize: \"small\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3,\n          borderRadius: \"16px\"\n        },\n        elevation: 2,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            flexWrap: \"wrap\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Ballot, {\n            sx: {\n              fontSize: 45\n            },\n            color: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            children: \"Create A Vote\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          sx: {\n            p: 0\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          sx: {\n            pt: 2\n          },\n          children: \"What is the vote on?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          textAlign: \"center\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-basic\",\n            label: \"Subject\",\n            variant: \"outlined\",\n            value: subjectText,\n            onChange: event => {\n              setSubjectText(event.target.value);\n            },\n            style: {\n              width: \"94%\"\n            },\n            sx: {\n              m: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: [\"Voters: \", value]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          textAlign: \"center\",\n          children: /*#__PURE__*/_jsxDEV(Slider, {\n            value: value,\n            \"aria-label\": \"Default\",\n            valueLabelDisplay: \"auto\",\n            name: \"slider\",\n            sx: {\n              m: 2\n            },\n            style: {\n              width: \"95%\"\n            },\n            onChange: event => {\n              setValue(event.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          children: [\"Candidates: \", candidateList.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          textAlign: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-basic\",\n            label: \"Candidate\",\n            variant: \"outlined\",\n            value: candidateText,\n            onChange: event => {\n              setCandidateText(event.target.value);\n            },\n            onKeyPress: event => {\n              if (event.key === \"Enter\") {\n                event.preventDefault();\n                addCandidate();\n              }\n            },\n            style: {\n              width: \"95%\"\n            },\n            sx: {\n              m: 2\n            },\n            InputProps: {\n              endAdornment: /*#__PURE__*/_jsxDEV(IconButton, {\n                onClick: addCandidate,\n                children: /*#__PURE__*/_jsxDEV(KeyboardReturn, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 19\n              }, this)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(List, {\n            style: {\n              width: \"95%\"\n            },\n            sx: {\n              ml: 2\n            },\n            children: candidateList.map(item => /*#__PURE__*/_jsxDEV(ListItem, {\n              secondaryAction: /*#__PURE__*/_jsxDEV(IconButton, {\n                edge: \"end\",\n                \"aria-label\": \"delete\",\n                onClick: e => {\n                  setCandidateList(candidateList => candidateList.filter(i => i !== item));\n                },\n                children: /*#__PURE__*/_jsxDEV(Delete, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 259,\n                columnNumber: 21\n              }, this),\n              children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                primary: item\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, this)\n            }, item, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          textAlign: \"center\",\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: buttonHandler,\n            className: \"button\",\n            name: \"Create Vote\",\n            sx: {\n              m: 2,\n              alignItems: \"center\"\n            },\n            children: \"Create Vote\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: handleSubmit,\n            children: \"Send Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n          open: Popup,\n          autoHideDuration: 2000,\n          onClose: handleClose,\n          message: popupText,\n          action: action\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3,\n          borderRadius: \"16px\"\n        },\n        elevation: 2,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: /*#__PURE__*/_jsxDEV(Key, {\n              sx: {\n                fontSize: 45\n              },\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                display: \"block\",\n                children: \"Vote Keys\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                color: \"secondary\",\n                display: \"block\",\n                style: {\n                  lineHeight: \"15px\"\n                },\n                children: \"Distribute vote keys between voters\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            textAlign: \"right\",\n            sx: {\n              flexGrow: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              sx: {\n                margin: 1\n              },\n              variant: \"contained\",\n              onClick: exportVoteKeys,\n              children: \"Export CSV\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: copyVoteKeys,\n              children: \"Copy To Clipboard\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(List, {\n          sx: {\n            width: \"100%\",\n            bgcolor: \"background.paper\",\n            borderRadius: \"16px\",\n            position: \"relative\",\n            overflow: \"auto\",\n            maxHeight: 300,\n            \"& ul\": {\n              padding: 0\n            }\n          },\n          subheader: /*#__PURE__*/_jsxDEV(\"li\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 24\n          }, this),\n          children: [0].map(sectionId => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: voteKeys.map(item => /*#__PURE__*/_jsxDEV(ListItem, {\n                children: /*#__PURE__*/_jsxDEV(ListItemText, {\n                  primary: `${item}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 23\n                }, this)\n              }, `item-${sectionId}-${item}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 17\n            }, this)\n          }, `section-${sectionId}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HelpPopup, {\n      heading: \"How To Create A Vote\",\n      content: \" 1. Enter the subject of the vote.\\\\n 2. Enter the number of voters.\\\\n 3. Enter the number of candidates.\\\\n 4. Enter the candidates.\\\\n 5. Click on the create vote button.\\\\n 6. The vote will be created.\\\\n \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 178,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MainView, \"anGtA1IJe6EWV03tCSjzl5xoQRE=\", false, function () {\n  return [useParty, useStreamQueries, useLedger];\n});\n\n_c = MainView;\nexport default MainView;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainView\");","map":{"version":3,"sources":["/Users/finn.jones/Documents/Github/Blockchain-Voting/Testing/create-daml-app/ui/src/components/MainView.tsx"],"names":["React","useState","Button","Container","Slider","List","ListItem","ListItemText","TextField","Typography","Box","Snackbar","Grid","Divider","IconButton","Paper","Key","Ballot","Delete","Close","KeyboardReturn","Voting","useParty","useLedger","useStreamQueries","createHash","HelpPopup","hashedVoteKeys","MainView","hashUsername","candidateList","setCandidateList","voteKeys","setVoteKeys","value","setValue","subjectText","setSubjectText","candidateText","setCandidateText","Popup","setPopup","popupText","setPopupText","assets","JSON","parse","localStorage","getItem","toString","contracts","payload","voters","undefined","ledger","buttonHandler","event","preventDefault","length","keys","generateVoteKeys","setItem","stringify","voteDetails","username","votes","voted","voteTimes","candidates","subject","create","hash","input","update","digest","handleSubmit","e","values","name","email","message","str","nameMatch","match","console","log","voterCount","i","crypto","require","key","randomBytes","push","addCandidate","includes","copyVoteKeys","navigator","clipboard","writeText","join","exportVoteKeys","csv","blob","Blob","type","url","URL","createObjectURL","link","document","createElement","href","download","click","handleClose","reason","action","p","borderRadius","display","alignItems","flexWrap","fontSize","pt","target","width","m","endAdornment","ml","map","item","filter","lineHeight","flexGrow","margin","bgcolor","position","overflow","maxHeight","padding","sectionId"],"mappings":"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","sourcesContent":["// Copyright (c) 2021 Digital Asset (Switzerland) GmbH and/or its affiliates. All rights reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useState } from \"react\";\n\nimport {\n  Button,\n  Container,\n  Slider,\n  List,\n  ListItem,\n  ListItemText,\n  TextField,\n  Typography,\n  Box,\n  Snackbar,\n  Grid,\n  Divider,\n  IconButton,\n  Paper,\n} from \"@mui/material\";\n\nimport {\n  Key,\n  Ballot,\n  Delete,\n  Close,\n  KeyboardReturn,\n} from \"@mui/icons-material\";\n\nimport { Voting } from \"@daml.js/create-daml-app\";\n\nimport { useParty, useLedger, useStreamQueries } from \"@daml/react\";\n\nimport { createHash } from \"crypto\";\n\nimport HelpPopup from \"./HelpPopup\";\n\nimport emailjs from \"@emailjs/browser\";\n\nlet hashedVoteKeys: string[] = [];\nconst MainView: React.FC = () => {\n  const hashUsername = useParty();\n  const [candidateList, setCandidateList] = useState<string[]>([]);\n  const [voteKeys, setVoteKeys] = useState<string[]>([]);\n  const [value, setValue] = React.useState<number>(10);\n  const [subjectText, setSubjectText] = useState(\"\");\n  const [candidateText, setCandidateText] = useState(\"\");\n  const [Popup, setPopup] = React.useState(false);\n  const [popupText, setPopupText] = React.useState(\"\");\n\n  const assets = useStreamQueries(Voting.Voting);\n\n  if (\n    JSON.parse(localStorage.getItem(\"voteKeys\") || \"test\").toString() !==\n      voteKeys.toString() &&\n    assets.contracts[0]?.payload?.voters !== undefined\n  ) {\n    setVoteKeys(JSON.parse(localStorage.getItem(\"voteKeys\") || \"test\"));\n  }\n\n  const ledger = useLedger();\n  const buttonHandler = async (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.preventDefault();\n    if (assets.contracts.length === 0) {\n      const keys = generateVoteKeys(value);\n\n      setVoteKeys(keys[0]);\n      localStorage.setItem(\"voteKeys\", JSON.stringify(keys[0]));\n\n      const voteDetails = {\n        username: hashUsername,\n        voters: hashedVoteKeys,\n        votes: [],\n        voted: [],\n        voteTimes: [],\n        candidates: candidateList,\n        subject: subjectText,\n      };\n      ledger.create(Voting.Voting, voteDetails);\n      setPopupText(\"Vote Created\");\n      setPopup(true);\n    } else {\n      setPopupText(\"Vote In Progress\");\n      setPopup(true);\n    }\n  };\n\n  function hash(input: string) {\n    return createHash(\"sha256\").update(input).digest(\"hex\");\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const values = {\n      name: \"jefflolshort\",\n      email: \"jefflolshort@gmail.com\",\n      message: \"test\",\n    };\n    var str = \"jefflolshort@student.scots.com\";\n    var nameMatch = str.match(/^([^@]*)@/);\n    var name = nameMatch ? nameMatch[1] : null;\n    console.log(name);\n\n    // emailjs.send(\n    //   \"service_es53dwq\",\n    //   \"template_9e2xqtw\",\n    //   values,\n    //   \"pwgIagqBDgmParume\"\n    // );\n  };\n\n  const generateVoteKeys = (voterCount: any) => {\n    for (let i = 0; i < voterCount; i++) {\n      var crypto = require(\"crypto\");\n      var key = crypto.randomBytes(20).toString(\"hex\");\n      voteKeys.push(`${key}`);\n      hashedVoteKeys.push(hash(key));\n    }\n    return [voteKeys, hashedVoteKeys];\n  };\n\n  const addCandidate = () => {\n    if (candidateList.includes(candidateText)) {\n      setPopupText(\"Candidate already exists\");\n      setPopup(true);\n    } else {\n      setCandidateText(\"\");\n      // append candidateText to the start of candidateList\n      setCandidateList([candidateText, ...candidateList]);\n    }\n  };\n\n  // copy voteKeys to clipboard\n  const copyVoteKeys = () => {\n    navigator.clipboard.writeText(voteKeys.join(\"\\n\"));\n    setPopupText(\"Keys Copied To Clipboard\");\n    setPopup(true);\n  };\n\n  // export voteKeys to csv\n  const exportVoteKeys = () => {\n    const csv = voteKeys.join(\"\\n\");\n    const blob = new Blob([csv], { type: \"text/csv\" });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.download = \"voteKeys.csv\";\n    link.click();\n    setPopupText(\"Keys Exported\");\n    setPopup(true);\n  };\n\n  const handleClose = (\n    event: React.SyntheticEvent | Event,\n    reason?: string\n  ) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n\n    setPopup(false);\n  };\n  const action = (\n    <React.Fragment>\n      <IconButton\n        size=\"small\"\n        aria-label=\"close\"\n        color=\"inherit\"\n        onClick={handleClose}\n      >\n        <Close fontSize=\"small\" />\n      </IconButton>\n    </React.Fragment>\n  );\n\n  return (\n    <Container>\n      <Box sx={{ p: 1 }}>\n        <Paper sx={{ p: 3, borderRadius: \"16px\" }} elevation={2}>\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              flexWrap: \"wrap\",\n            }}\n          >\n            <Ballot sx={{ fontSize: 45 }} color=\"primary\" />\n            <Typography variant=\"h5\">Create A Vote</Typography>\n          </div>\n          <Divider sx={{ p: 0 }} />\n\n          <Typography variant=\"h6\" sx={{ pt: 2 }}>\n            What is the vote on?\n          </Typography>\n          <Box textAlign=\"center\">\n            <TextField\n              id=\"outlined-basic\"\n              label=\"Subject\"\n              variant=\"outlined\"\n              value={subjectText}\n              onChange={(event) => {\n                setSubjectText(event.target.value);\n              }}\n              style={{ width: \"94%\" }}\n              sx={{ m: 2 }}\n            />\n          </Box>\n          <Typography variant=\"h6\">Voters: {value}</Typography>\n\n          <Box textAlign=\"center\">\n            <Slider\n              value={value}\n              aria-label=\"Default\"\n              valueLabelDisplay=\"auto\"\n              name=\"slider\"\n              sx={{ m: 2 }}\n              style={{ width: \"95%\" }}\n              onChange={(event: any) => {\n                setValue(event.target.value);\n              }}\n            />\n          </Box>\n          <Typography variant=\"h6\">\n            Candidates: {candidateList.length}\n          </Typography>\n\n          <Box textAlign=\"center\">\n            <TextField\n              id=\"outlined-basic\"\n              label=\"Candidate\"\n              variant=\"outlined\"\n              value={candidateText}\n              onChange={(event) => {\n                setCandidateText(event.target.value);\n              }}\n              onKeyPress={(event) => {\n                if (event.key === \"Enter\") {\n                  event.preventDefault();\n                  addCandidate();\n                }\n              }}\n              style={{ width: \"95%\" }}\n              sx={{ m: 2 }}\n              InputProps={{\n                endAdornment: (\n                  <IconButton onClick={addCandidate}>\n                    <KeyboardReturn />\n                  </IconButton>\n                ),\n              }}\n            />\n\n            <List style={{ width: \"95%\" }} sx={{ ml: 2 }}>\n              {candidateList.map((item) => (\n                <ListItem\n                  key={item}\n                  secondaryAction={\n                    <IconButton\n                      edge=\"end\"\n                      aria-label=\"delete\"\n                      onClick={(e) => {\n                        setCandidateList((candidateList) =>\n                          candidateList.filter((i) => i !== item)\n                        );\n                      }}\n                    >\n                      <Delete />\n                    </IconButton>\n                  }\n                >\n                  <ListItemText primary={item} />\n                </ListItem>\n              ))}\n            </List>\n          </Box>\n\n          <Box textAlign=\"center\">\n            <Button\n              variant=\"contained\"\n              onClick={buttonHandler}\n              className=\"button\"\n              name=\"Create Vote\"\n              sx={{ m: 2, alignItems: \"center\" }}\n            >\n              Create Vote\n            </Button>\n            <Button variant=\"contained\" color=\"primary\" onClick={handleSubmit}>\n              Send Email\n            </Button>\n          </Box>\n          <Snackbar\n            open={Popup}\n            autoHideDuration={2000}\n            onClose={handleClose}\n            message={popupText}\n            action={action}\n          />\n        </Paper>\n      </Box>\n\n      <Box sx={{ p: 1 }}>\n        <Paper sx={{ p: 3, borderRadius: \"16px\" }} elevation={2}>\n          <Grid container>\n            <Grid item>\n              <Key sx={{ fontSize: 45 }} color=\"primary\" />\n            </Grid>\n\n            <Grid item>\n              <Grid item>\n                <Typography variant=\"h5\" display=\"block\">\n                  Vote Keys\n                </Typography>\n              </Grid>\n              <Grid item>\n                <Typography\n                  variant=\"subtitle1\"\n                  color=\"secondary\"\n                  display=\"block\"\n                  style={{ lineHeight: \"15px\" }}\n                >\n                  Distribute vote keys between voters\n                </Typography>\n              </Grid>\n            </Grid>\n            <Box textAlign=\"right\" sx={{ flexGrow: 1 }}>\n              <Button\n                sx={{ margin: 1 }}\n                variant=\"contained\"\n                onClick={exportVoteKeys}\n              >\n                Export CSV\n              </Button>\n              <Button variant=\"contained\" onClick={copyVoteKeys}>\n                Copy To Clipboard\n              </Button>\n            </Box>\n          </Grid>\n\n          <List\n            sx={{\n              width: \"100%\",\n              bgcolor: \"background.paper\",\n              borderRadius: \"16px\",\n              position: \"relative\",\n              overflow: \"auto\",\n              maxHeight: 300,\n              \"& ul\": { padding: 0 },\n            }}\n            subheader={<li />}\n          >\n            {[0].map((sectionId) => (\n              <li key={`section-${sectionId}`}>\n                <ul>\n                  {voteKeys.map((item) => (\n                    <ListItem key={`item-${sectionId}-${item}`}>\n                      <ListItemText primary={`${item}`} />\n                    </ListItem>\n                  ))}\n                </ul>\n              </li>\n            ))}\n          </List>\n        </Paper>\n      </Box>\n\n      <HelpPopup\n        heading=\"How To Create A Vote\"\n        content=\"\n          1. Enter the subject of the vote.\\n\n          2. Enter the number of voters.\\n\n          3. Enter the number of candidates.\\n\n          4. Enter the candidates.\\n\n          5. Click on the create vote button.\\n\n          6. The vote will be created.\\n\n        \"\n      ></HelpPopup>\n    </Container>\n  );\n};\n\nexport default MainView;\n"]},"metadata":{},"sourceType":"module"}