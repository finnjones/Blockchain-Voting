(this["webpackJsonpcreate-daml-app"]=this["webpackJsonpcreate-daml-app"]||[]).push([[0],{349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(515);t.DA=r,t.packageId="d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662"},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(513);t.User=r;var c=n(519);t.Voting=c,t.packageId="c49f8dc6f8b550d45b85fb235a0273f1288ca45e9ba4c9e7facf32c0e0f7a680"},508:function(e,t,n){},513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(514))},514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(192),c=n(221),o=(n(137),n(349));t.CreateVote={decoder:c.lazyMemo((function(){return r.object({inputSubject:c.Text.decoder})})),encode:function(e){return{inputSubject:c.Text.encode(e.inputSubject)}}},t.Vote={decoder:c.lazyMemo((function(){return r.object({vote:c.Bool.decoder})})),encode:function(e){return{vote:c.Bool.encode(e.vote)}}},t.Follow={decoder:c.lazyMemo((function(){return r.object({userToFollow:c.Party.decoder})})),encode:function(e){return{userToFollow:c.Party.encode(e.userToFollow)}}},t.User={templateId:"c49f8dc6f8b550d45b85fb235a0273f1288ca45e9ba4c9e7facf32c0e0f7a680:User:User",keyDecoder:c.lazyMemo((function(){return c.lazyMemo((function(){return c.Party.decoder}))})),keyEncode:function(e){return c.Party.encode(e)},decoder:c.lazyMemo((function(){return r.object({username:c.Party.decoder,following:c.List(c.Party).decoder,votes:c.List(c.Bool).decoder,subject:c.Text.decoder})})),encode:function(e){return{username:c.Party.encode(e.username),following:c.List(c.Party).encode(e.following),votes:c.List(c.Bool).encode(e.votes),subject:c.Text.encode(e.subject)}},Follow:{template:function(){return t.User},choiceName:"Follow",argumentDecoder:c.lazyMemo((function(){return t.Follow.decoder})),argumentEncode:function(e){return t.Follow.encode(e)},resultDecoder:c.lazyMemo((function(){return c.ContractId(t.User).decoder})),resultEncode:function(e){return c.ContractId(t.User).encode(e)}},Vote:{template:function(){return t.User},choiceName:"Vote",argumentDecoder:c.lazyMemo((function(){return t.Vote.decoder})),argumentEncode:function(e){return t.Vote.encode(e)},resultDecoder:c.lazyMemo((function(){return c.ContractId(t.User).decoder})),resultEncode:function(e){return c.ContractId(t.User).encode(e)}},Archive:{template:function(){return t.User},choiceName:"Archive",argumentDecoder:c.lazyMemo((function(){return o.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return o.DA.Internal.Template.Archive.encode(e)},resultDecoder:c.lazyMemo((function(){return c.Unit.decoder})),resultEncode:function(e){return c.Unit.encode(e)}},CreateVote:{template:function(){return t.User},choiceName:"CreateVote",argumentDecoder:c.lazyMemo((function(){return t.CreateVote.decoder})),argumentEncode:function(e){return t.CreateVote.encode(e)},resultDecoder:c.lazyMemo((function(){return c.ContractId(t.User).decoder})),resultEncode:function(e){return c.ContractId(t.User).encode(e)}}},c.registerTemplate(t.User)},515:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(516);t.Internal=r},516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(517);t.Template=r},517:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(518))},518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(192),c=n(221);n(137);t.Archive={decoder:c.lazyMemo((function(){return r.object({})})),encode:function(e){return{}}}},519:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(520))},520:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(192),c=n(221),o=(n(137),n(349));t.Vote={decoder:c.lazyMemo((function(){return r.object({voter:c.Party.decoder,vote:c.Text.decoder})})),encode:function(e){return{voter:c.Party.encode(e.voter),vote:c.Text.encode(e.vote)}}},t.Voting={templateId:"c49f8dc6f8b550d45b85fb235a0273f1288ca45e9ba4c9e7facf32c0e0f7a680:Voting:Voting",keyDecoder:c.lazyMemo((function(){return c.lazyMemo((function(){return c.Party.decoder}))})),keyEncode:function(e){return c.Party.encode(e)},decoder:c.lazyMemo((function(){return r.object({username:c.Party.decoder,following:c.List(c.Party).decoder,votes:c.List(c.Text).decoder,voted:c.List(c.Party).decoder,candidates:c.List(c.Text).decoder,subject:c.Text.decoder})})),encode:function(e){return{username:c.Party.encode(e.username),following:c.List(c.Party).encode(e.following),votes:c.List(c.Text).encode(e.votes),voted:c.List(c.Party).encode(e.voted),candidates:c.List(c.Text).encode(e.candidates),subject:c.Text.encode(e.subject)}},Archive:{template:function(){return t.Voting},choiceName:"Archive",argumentDecoder:c.lazyMemo((function(){return o.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return o.DA.Internal.Template.Archive.encode(e)},resultDecoder:c.lazyMemo((function(){return c.Unit.decoder})),resultEncode:function(e){return c.Unit.encode(e)}},Vote:{template:function(){return t.Voting},choiceName:"Vote",argumentDecoder:c.lazyMemo((function(){return t.Vote.decoder})),argumentEncode:function(e){return t.Vote.encode(e)},resultDecoder:c.lazyMemo((function(){return c.ContractId(t.Voting).decoder})),resultEncode:function(e){return c.ContractId(t.Voting).encode(e)}}},c.registerTemplate(t.Voting)},526:function(e,t){},528:function(e,t){},538:function(e,t){},540:function(e,t){},566:function(e,t){},568:function(e,t){},569:function(e,t){},574:function(e,t){},576:function(e,t){},582:function(e,t){},584:function(e,t){},603:function(e,t){},615:function(e,t){},618:function(e,t){},760:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(60),a=n.n(o),i=(n(507),n(508),n(11)),s=n(71),l=n(38),d=n.n(l),u=n(847),j=n(848),b=n(830),h=n(850),O=n(831),f=n(855),x=n(137),m=n.n(x),v=n(49),p=n(447),g=function(){var e;if(window.location.hostname.endsWith(".projectdabls.com"))return{provider:"daml-hub",ledgerId:null!==(e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_LEDGER_ID)&&void 0!==e?e:window.location.hostname.split(".")[0]};if(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH&&"auth0"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH.toLowerCase()){if(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_DOMAIN&&Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_CLIENT_ID)return{provider:"auth0",domain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_DOMAIN,clientId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_CLIENT_ID};throw new Error("Missing env vars: AUTH0_DOMAIN & AUTH0_CLIENT_ID must be set.")}var t,n=null!==(t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_LEDGER_ID)&&void 0!==t?t:"create-daml-app-sandbox";return{provider:"none",ledgerId:n,makeToken:function(e){var t={"https://daml.com/ledger-api":{ledgerId:n,applicationId:"create-daml-app",actAs:[e]}};return Object(p.encode)(t,"secret","HS256")}}}(),y="daml-hub"===g.provider?"https://api.projectdabl.com/data/".concat(g.ledgerId,"/"):void 0,_=n(206),S=n(2),C=function(e){var t=e.onLogin,n=Object(r.useCallback)(function(){var e=Object(s.a)(d.a.mark((function e(n){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new m.a({token:n.token,httpBaseUrl:y}),e.next=4,r.fetchByKey(v.User.User,n.party);case 4:if(null!==e.sent){e.next=10;break}return c={username:n.party,following:[],votes:[],subject:""},e.next=9,r.create(v.User.User,c);case 9:e.sent;case 10:t(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),[t]),o=function(e){return Object(S.jsx)(u.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(S.jsxs)(u.a.Column,{style:{maxWidth:450},children:[Object(S.jsx)(j.a,{as:"h1",textAlign:"center",size:"huge",style:{color:"#223668"},children:Object(S.jsx)(j.a.Content,{children:"Block Cast"})}),Object(S.jsx)(j.a,{as:"h2",textAlign:"center",size:"small",style:{color:"#223668"},children:"Secure Voting On The Blockchain"}),Object(S.jsx)(b.a,{size:"huge",className:"test-select-login-screen",children:Object(S.jsx)(h.a,{children:e})})]})})},a=function(e){var t=e.auth,r=c.a.useState(""),a=Object(i.a)(r,2),l=a[0],u=a[1],j=function(){var e=Object(s.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,n({party:l,token:t.makeToken(l)});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o(Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(O.a,{placeholder:"Vote Key",value:l,className:"test-select-username-field",sx:{paddingBottom:2},style:{width:"100%"},onChange:function(e){return u(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),j(e))}}),Object(S.jsx)(f.a,{variant:"contained",className:"test-select-login-button",onClick:j,style:{width:"100%"},children:"Log in"})]}))},l=function(e){var t=e.auth;return Object(r.useEffect)((function(){var e=new URL(window.location.toString()),t=e.searchParams.get("party");if(null!==t){e.search="",window.history.replaceState(window.history.state,"",e.toString());var r=function(e){var t;return(null===(t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"))||void 0===t?void 0:t.pop())||""}("DAMLHUB_LEDGER_ACCESS_TOKEN");n({token:r,party:t})}}),[]),o(Object(S.jsx)(f.a,{variant:"contained",onClick:function(){window.location.assign("https://login.projectdabl.com/auth/login?ledgerId=".concat(t.ledgerId))},children:"Log in with Daml Hub"}))},x=function(){var e=Object(_.b)(),t=e.user,r=e.isAuthenticated,c=e.isLoading,a=(e.loginWithRedirect,e.getAccessTokenSilently);return Object(s.a)(d.a.mark((function e(){var o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==c||!0!==r){e.next=8;break}if(void 0===t){e.next=8;break}return e.t0=t["https://daml.com/ledger-api"],e.next=5,a({audience:"https://daml.com/ledger-api"});case 5:e.t1=e.sent,o={party:e.t0,token:e.t1},n(o);case 8:case"end":return e.stop()}}),e)})))(),o(Object(S.jsx)(f.a,{children:"Log in"}))};return"none"===g.provider||"daml-hub"===g.provider||g.provider,"none"===g.provider?Object(S.jsx)(a,{auth:g}):"daml-hub"===g.provider?Object(S.jsx)(l,{auth:g}):"auth0"===g.provider?Object(S.jsx)(x,{}):Object(S.jsx)("div",{children:"Invalid configuation."})},T=function(e){var t=e.onLogin,n=Object(r.useCallback)(function(){var e=Object(s.a)(d.a.mark((function e(n){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new m.a({token:n.token,httpBaseUrl:y}),e.next=4,r.fetchByKey(v.User.User,n.party);case 4:if(null!==e.sent){e.next=10;break}return c={username:n.party,following:[],votes:[],subject:""},e.next=9,r.create(v.User.User,c);case 9:e.sent;case 10:t(n),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),[t]),o=function(e){return Object(S.jsx)(u.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(S.jsxs)(u.a.Column,{style:{maxWidth:450},children:[Object(S.jsx)(j.a,{as:"h1",textAlign:"center",size:"huge",style:{color:"#223668"},children:Object(S.jsx)(j.a.Content,{children:"Block Cast"})}),Object(S.jsx)(j.a,{as:"h2",textAlign:"center",size:"small",style:{color:"#223668"},children:"Secure Voting On The Blockchain"}),Object(S.jsx)(b.a,{size:"huge",className:"test-select-login-screen",children:Object(S.jsx)(h.a,{children:e})})]})})},a=function(e){var t=e.auth,r=c.a.useState(""),a=Object(i.a)(r,2),l=a[0],u=a[1],j=function(){var e=Object(s.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,n({party:l,token:t.makeToken(l)});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o(Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(O.a,{placeholder:"Username",value:l,className:"test-select-username-field",sx:{paddingBottom:2},style:{width:"100%"},onChange:function(e){return u(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),j(e))}}),Object(S.jsx)(f.a,{variant:"contained",className:"test-select-login-button",onClick:j,style:{width:"100%"},children:"Log in"})]}))},l=function(e){var t=e.auth;return Object(r.useEffect)((function(){var e=new URL(window.location.toString()),t=e.searchParams.get("party");if(null!==t){e.search="",window.history.replaceState(window.history.state,"",e.toString());var r=function(e){var t;return(null===(t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"))||void 0===t?void 0:t.pop())||""}("DAMLHUB_LEDGER_ACCESS_TOKEN");n({token:r,party:t})}}),[]),o(Object(S.jsx)(f.a,{variant:"contained",onClick:function(){window.location.assign("https://login.projectdabl.com/auth/login?ledgerId=".concat(t.ledgerId))},children:"Log in with Daml Hub"}))},x=function(){var e=Object(_.b)(),t=e.user,r=e.isAuthenticated,c=e.isLoading,a=(e.loginWithRedirect,e.getAccessTokenSilently);return Object(s.a)(d.a.mark((function e(){var o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==c||!0!==r){e.next=8;break}if(void 0===t){e.next=8;break}return e.t0=t["https://daml.com/ledger-api"],e.next=5,a({audience:"https://daml.com/ledger-api"});case 5:e.t1=e.sent,o={party:e.t0,token:e.t1},n(o);case 8:case"end":return e.stop()}}),e)})))(),o(Object(S.jsx)(f.a,{children:"Log in"}))};return"none"===g.provider||"daml-hub"===g.provider||g.provider,"none"===g.provider?Object(S.jsx)(a,{auth:g}):"daml-hub"===g.provider?Object(S.jsx)(l,{auth:g}):"auth0"===g.provider?Object(S.jsx)(x,{}):Object(S.jsx)("div",{children:"Invalid configuation."})},w=n(832),E=n(471),A=n(820),k=n(856),P=n(857),D=n(852),U=n(816),V=n(843),L=n(854),I=n(839),R=n(858),M=n(836),N=n(819),H=n(43),K=n.n(H),z=function(){var e,t,n,c,o,a,l=Object(H.useParty)(),b=Object(H.useLedger)(),O=Object(H.useStreamFetchByKeys)(v.User.User,(function(){return[l]}),[l]),x=Object(H.useStreamQueries)(v.Voting.Voting),m=null===(e=O.contracts[0])||void 0===e?void 0:e.payload,p=Object(r.useState)(""),g=Object(i.a)(p,2),y=g[0],_=g[1],C=function(){var e=Object(s.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=x.contracts[0])||void 0===t||!t.payload.voted.includes(l)){e.next=4;break}alert("You have already voted"),e.next=6;break;case 4:return e.next=6,b.exerciseByKey(v.Voting.Voting.Vote,null===(r=x.contracts[0])||void 0===r?void 0:r.signatories[0],{voter:l,vote:y}).catch(console.error);case 6:console.log(null===(n=x.contracts[0])||void 0===n?void 0:n.payload.voted);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(k.a,{children:Object(S.jsx)(u.a,{centered:!0,columns:2,children:Object(S.jsx)(u.a.Row,{stretched:!0,children:Object(S.jsxs)(u.a.Column,{children:[Object(S.jsx)(j.a,{as:"h1",size:"huge",color:"blue",textAlign:"center",style:{padding:"1ex 0em 0ex 0em"},children:m?"Welcome, ".concat(m.username,"!"):"Loading..."}),Object(S.jsxs)(h.a,{children:[Object(S.jsxs)(j.a,{as:"h2",children:[Object(S.jsx)(N.a,{sx:{fontSize:45},color:"primary"}),Object(S.jsxs)(j.a.Content,{children:["Vote",Object(S.jsx)(j.a.Subheader,{children:"Read the vote description carefully and choose an option"})]})]}),Object(S.jsx)(A.a,{}),Object(S.jsx)(j.a,{as:"h3",children:"Vote Description"}),null!==(t=null===(n=x.contracts[0])||void 0===n||null===(c=n.payload)||void 0===c?void 0:c.subject)&&void 0!==t?t:"Loading...",Object(S.jsx)(A.a,{}),Object(S.jsx)(P.a,{textAlign:"center",children:Object(S.jsxs)(D.a,{children:[Object(S.jsx)(U.a,{id:"demo-radio-buttons-group-label",children:"Options"}),Object(S.jsx)(V.a,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"female",name:"radio-buttons-group",children:Object(S.jsx)(L.a,{children:null===(o=x.contracts[0])||void 0===o||null===(a=o.payload)||void 0===a?void 0:a.candidates.map((function(e){return Object(S.jsx)(I.a,{children:Object(S.jsx)(R.a,{value:e,control:Object(S.jsx)(M.a,{}),label:e,onChange:function(t){console.log(e),_(e)}})},e)}))})})]})}),Object(S.jsx)(P.a,{textAlign:"center",children:Object(S.jsx)(f.a,{variant:"contained",onClick:C,className:"button",name:"Create Vote",sx:{m:2,alignItems:"center"},children:"Vote"})})]})]})})})})},F=n(860),W=n(861),B=n(862),G=n(859),J=n(844),Q=n(863),Y=n(864),q=n(182),X=n(62),Z=n(453),$=n.n(Z),ee=n(822),te=n(823),ne=function(e){var t,n=e.onLogout,r=Object(H.useParty)();console.log(r);Object(X.a)();var o=c.a.useState(!1),a=Object(i.a)(o,2),s=a[0],l=a[1],d=null===(t=Object(H.useStreamFetchByKeys)(v.User.User,(function(){return[r]}),[r]).contracts[0])||void 0===t?void 0:t.payload;return r.includes("VoteKey")?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(w.a,{icon:!0,borderless:!0,children:[Object(S.jsx)(w.a.Item,{children:Object(S.jsx)(E.a,{as:"a",href:"https://www.daml.com/",target:"_blank",src:"/daml.svg",alt:"Daml Logo",size:"mini"})}),Object(S.jsxs)(w.a.Menu,{position:"right",className:"test-select-main-menu",children:[Object(S.jsxs)(w.a.Item,{position:"right",children:["You are logged in as ",r,"."]}),Object(S.jsx)(w.a.Item,{position:"right",active:!1,className:"test-select-log-out",onClick:n,icon:"log out"})]})]}),Object(S.jsx)(z,{})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(P.a,{sx:{flexGrow:1},children:Object(S.jsx)(F.a,{position:"static",children:Object(S.jsxs)(W.a,{children:[Object(S.jsx)(B.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:function(){l(!0)},className:"menu-button",children:Object(S.jsx)($.a,{})}),Object(S.jsx)(G.a,{variant:"h5",sx:{flexGrow:1},onClick:n,noWrap:!0,children:"Blockvote"}),Object(S.jsx)(f.a,{variant:"outlined",color:"inherit",startIcon:Object(S.jsx)(ee.a,{}),onClick:n,children:"Log Out"})]})})}),Object(S.jsx)(G.a,{variant:"h3",textAlign:"center",color:"primary",sx:{padding:3},children:d?"Welcome, ".concat(d.username,"!"):"Loading..."}),Object(S.jsx)(J.a,{anchor:"left",open:s,onClose:function(){return l(!1)},children:Object(S.jsxs)(P.a,{p:2,width:"250px",textAlign:"center",role:"presentation",children:[Object(S.jsx)(G.a,{variant:"h6",component:"div",children:"Menu"}),Object(S.jsxs)(L.a,{children:[Object(S.jsxs)(I.a,{button:!0,component:q.b,to:"/CreateVote",className:"test-select-list-item",children:[Object(S.jsx)(Q.a,{children:Object(S.jsx)(N.a,{})}),Object(S.jsx)(Y.a,{primary:"Create Vote"})]}),Object(S.jsxs)(I.a,{button:!0,component:q.b,to:"/VoteAnalitics",className:"test-select-list-item",children:[Object(S.jsx)(Q.a,{children:Object(S.jsx)(te.a,{})}),Object(S.jsx)(Y.a,{primary:"Analitics"})]})]})]})})]})},re=n(28),ce=n(25),oe=n(853),ae=n(845),ie=n(865),se=n(846),le=n(472),de=n(218),ue=n(841),je=n(465),be=function(){var e,t,n,c=Object(H.useParty)(),o=(Object(H.useLedger)(),Object(H.useStreamFetchByKeys)(v.User.User,(function(){return[c]}),[c])),a=Object(H.useStreamQueries)(v.Voting.Voting),s=(null===(e=o.contracts[0])||void 0===e||e.payload,Object(r.useState)("")),l=Object(i.a)(s,2),d=(l[0],l[1],[{name:"Person A",value:400},{name:"Person B",value:300},{name:"Person C",value:300},{name:"Person D",value:200},{name:"Person E",value:278},{name:"Person F",value:189}]),u=(Object(r.useMemo)((function(){for(var e=[],t=0;t<d.length;t++)e.push("rgb(".concat(Math.floor(52),", ").concat(Math.floor(200*Math.random()),", ").concat(Math.floor(255),")"));return e}),[d]),(null===(t=a.contracts[0])||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.votes)||[]),j=Object(r.useMemo)((function(){var e=new Map;return u.forEach((function(t){e.has(t)?e.set(t,(e.get(t)||1)+1):e.set(t,1)})),Object(ce.a)(e).map((function(e){var t=Object(i.a)(e,2);return{name:t[0],value:t[1]}}))}),[u]);console.log(j);return Object(S.jsx)(k.a,{children:Object(S.jsx)(P.a,{sx:{p:1},children:Object(S.jsxs)(oe.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(S.jsxs)(ae.a,{container:!0,spacing:0,children:[Object(S.jsx)(ae.a,{item:!0,children:Object(S.jsx)(te.a,{sx:{fontSize:50},color:"primary"})}),Object(S.jsxs)(ae.a,{direction:"column",children:[Object(S.jsx)(ae.a,{item:!0,children:Object(S.jsx)(G.a,{variant:"h5",display:"block",children:"Vote Analitics"})}),Object(S.jsx)(ae.a,{item:!0,children:Object(S.jsx)(G.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"View current vote results"})})]})]}),Object(S.jsx)(ie.a,{}),Object(S.jsx)(G.a,{variant:"h5",children:"Vote Progress"}),Object(S.jsxs)(se.a,{width:400,height:100,data:d,children:[Object(S.jsx)(le.a,{dataKey:"value",fill:"#8884d8"}),Object(S.jsx)(de.a,{})]}),Object(S.jsx)(ue.a,{width:400,height:400,children:Object(S.jsx)(je.a,{data:d,dataKey:"value",cx:200,cy:200,isAnimationActive:!1,fill:"#8884d8",label:!0})})]})})})},he=n(837),Oe=n(866),fe=n(840),xe=n(827),me=n(828),ve=n(829),pe=n(838),ge=n(128),ye=function(e){var t=e.users,n=e.onFollow;return Object(S.jsx)(pe.a,{divided:!0,relaxed:!0,children:Object(ce.a)(t).sort((function(e,t){return e.username.localeCompare(t.username)})).map((function(e){return Object(S.jsxs)(pe.a.Item,{children:[Object(S.jsx)(pe.a.Icon,{name:"user"}),Object(S.jsxs)(pe.a.Content,{children:[Object(S.jsx)(pe.a.Content,{floated:"right",children:Object(S.jsx)(ge.a,{name:"add user",link:!0,className:"test-select-add-user-icon",onClick:function(){return n(e.username)}})}),Object(S.jsx)(pe.a.Header,{className:"test-select-user-in-network",children:e.username})]}),Object(S.jsx)(pe.a.List,{children:Object(ce.a)(e.following).sort((function(e,t){return e.localeCompare(t)})).map((function(e){return Object(S.jsxs)(pe.a.Item,{children:[Object(S.jsx)(pe.a.Content,{floated:"right",children:Object(S.jsx)(ge.a,{name:"add user",link:!0,className:"test-select-add-user-following-icon",onClick:function(){return n(e)}})}),Object(S.jsx)(pe.a.Icon,{name:"user outline"}),Object(S.jsx)(pe.a.Content,{children:Object(S.jsx)(pe.a.Header,{children:e})})]},e)}))})]},e.username)}))})},_e=[],Se=function(){var e=Object(H.useParty)(),t=Object(r.useState)([]),o=Object(i.a)(t,2),a=o[0],l=o[1],u=c.a.useState(10),j=Object(i.a)(u,2),b=j[0],h=j[1],x=Object(r.useState)(""),m=Object(i.a)(x,2),p=m[0],g=m[1],y=Object(r.useState)(""),_=Object(i.a)(y,2),C=_[0],T=_[1],w=c.a.useState(!1),E=Object(i.a)(w,2),A=E[0],D=E[1],U=Object(H.useStreamQueries)(v.Voting.Voting),V=Object(H.useStreamQueries)(v.User.User).contracts,R=Object(r.useMemo)((function(){return V.map((function(e){return e.payload})).filter((function(t){return t.username!==e})).sort((function(e,t){return e.username.localeCompare(t.username)}))}),[V,e]),M=Object(H.useLedger)(),K=Object(r.useState)(""),z=(Object(i.a)(K,1)[0],function(){var t=Object(s.a)(d.a.mark((function t(n){var r,c,o;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r=n.currentTarget,console.log(r.name),"Create Vote"==r.name&&(D(!0),c=F(b),console.log(C),o={username:e,following:c,votes:[],voted:[],candidates:a,subject:p},M.create(v.Voting.Voting,o),console.log(U));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),F=function(e){for(var t=0;t<e;t++){var r=n(351).randomBytes(20).toString("hex");_e.push("VoteKey".concat("-",r))}return _e},W=function(){var e=Object(s.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F(2),e.abrupt("return",!0);case 5:return e.prev=5,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0))),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){console.log(C),l([].concat(Object(ce.a)(a),[C])),console.log(a)},Q=function(e,t){"clickaway"!==t&&D(!1)},q=Object(S.jsx)(c.a.Fragment,{children:Object(S.jsx)(B.a,{size:"small","aria-label":"close",color:"inherit",onClick:Q,children:Object(S.jsx)(xe.a,{fontSize:"small"})})});return Object(S.jsxs)(k.a,{children:[Object(S.jsx)(P.a,{sx:{p:1},children:Object(S.jsxs)(oe.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(S.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[Object(S.jsx)(N.a,{sx:{fontSize:45},color:"primary"}),Object(S.jsx)(G.a,{variant:"h5",children:"Create A Vote"})]}),Object(S.jsx)(ie.a,{sx:{p:0}}),Object(S.jsx)(G.a,{variant:"h6",sx:{pt:2},children:"What is the vote on?"}),Object(S.jsx)(P.a,{textAlign:"center",children:Object(S.jsx)(O.a,{id:"outlined-basic",label:"Subject",variant:"outlined",value:p,onChange:function(e){g(e.target.value)},style:{width:"94%"},sx:{m:2}})}),Object(S.jsxs)(G.a,{variant:"h6",children:["Voters: ",b]}),Object(S.jsx)(P.a,{textAlign:"center",children:Object(S.jsx)(he.a,{value:b,"aria-label":"Default",valueLabelDisplay:"auto",name:"slider",sx:{m:2},style:{width:"95%"},onChange:function(e){h(e.target.value)}})}),Object(S.jsxs)(G.a,{variant:"h6",children:["Candidates: ",a.length]}),Object(S.jsxs)(P.a,{textAlign:"center",children:[Object(S.jsx)(O.a,{id:"outlined-basic",label:"Candidate",variant:"outlined",value:C,onChange:function(e){T(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),J())},style:{width:"95%"},sx:{m:2}}),Object(S.jsx)(L.a,{children:a.map((function(e){return Object(S.jsx)(I.a,{secondaryAction:Object(S.jsx)(B.a,{edge:"end","aria-label":"delete",onClick:function(t){l((function(t){return t.filter((function(t){return t!==e}))})),console.log(a)},children:Object(S.jsx)(me.a,{})}),children:Object(S.jsx)(Y.a,{primary:e})},e)}))}),Object(S.jsx)(Oe.a,{variant:"contained","aria-label":"outlined primary button group",children:Object(S.jsx)(f.a,{onClick:J,children:"+"})})]}),Object(S.jsx)(P.a,{textAlign:"center",children:Object(S.jsx)(f.a,{variant:"contained",onClick:z,className:"button",name:"Create Vote",sx:{m:2,alignItems:"center"},children:"Create Vote"})}),Object(S.jsx)(fe.a,{open:A,autoHideDuration:2e3,onClose:Q,message:"Vote Created",action:q})]})}),Object(S.jsx)(P.a,{sx:{p:1},children:Object(S.jsxs)(oe.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(S.jsxs)(ae.a,{container:!0,spacing:0,children:[Object(S.jsx)(ae.a,{item:!0,children:Object(S.jsx)(ve.a,{sx:{fontSize:45},color:"primary"})}),Object(S.jsxs)(ae.a,{direction:"column",children:[Object(S.jsx)(ae.a,{item:!0,children:Object(S.jsx)(G.a,{variant:"h5",display:"block",children:"Vote Keys"})}),Object(S.jsx)(ae.a,{item:!0,children:Object(S.jsx)(G.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Distribute vote keys between voters"})})]})]}),Object(S.jsx)(ie.a,{}),Object(S.jsx)(L.a,{sx:{width:"100%",bgcolor:"background.paper",position:"relative",overflow:"auto",maxHeight:300,"& ul":{padding:0}},subheader:Object(S.jsx)("li",{}),children:[0].map((function(e){var t;return Object(S.jsx)("li",{children:Object(S.jsx)("ul",{children:null===(t=U.contracts[0])||void 0===t?void 0:t.observers.map((function(t){return Object(S.jsx)(I.a,{children:Object(S.jsx)(Y.a,{primary:"".concat(t)})},"item-".concat(e,"-").concat(t))}))})},"section-".concat(e))}))}),Object(S.jsx)(ye,{users:R,onFollow:W})]})})]})},Ce=n(469),Te=n(851),we=Object(Ce.a)({palette:{primary:{main:"#387DF6"},secondary:{main:"#666666"}},typography:{fontFamily:"Roboto, sans-serif",subtitle1:{fontSize:16},h5:{fontWeight:700,fontSize:24},h6:{fontWeight:500}}}),Ee=function(){var e=c.a.useState(),t=Object(i.a)(e,2),n=t[0],r=t[1];return n?Object(S.jsx)(K.a,{token:n.token,party:n.party,httpBaseUrl:y,children:Object(S.jsx)(q.a,{children:Object(S.jsx)(Te.a,{theme:we,children:Object(S.jsxs)("div",{children:[Object(S.jsx)(ne,{onLogout:function(){return r(void 0)}}),Object(S.jsxs)(re.c,{children:[Object(S.jsx)(re.a,{path:"/",element:Object(S.jsx)(z,{})}),Object(S.jsx)(re.a,{path:"/CreateVote",element:Object(S.jsx)(Se,{})}),Object(S.jsx)(re.a,{path:"/VoteAnalitics",element:Object(S.jsx)(be,{})})]})]})})})}):Object(S.jsx)(Te.a,{theme:we,children:Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(q.a,{children:Object(S.jsx)("div",{children:Object(S.jsxs)(re.c,{children:[Object(S.jsx)(re.a,{path:"/",element:Object(S.jsx)(C,{onLogin:r})}),Object(S.jsx)(re.a,{path:"/CreateVote",element:Object(S.jsx)(T,{onLogin:r})})]})})})})})};"auth0"!==g.provider?a.a.render(Object(S.jsx)(Ee,{}),document.getElementById("root")):a.a.render(Object(S.jsx)(_.a,{domain:g.domain,clientId:g.clientId,redirectUri:window.location.origin,children:Object(S.jsx)(Ee,{})}),document.getElementById("root"))}},[[760,1,2]]]);
//# sourceMappingURL=main.7e924c9f.chunk.js.map