(this["webpackJsonpcreate-daml-app"]=this["webpackJsonpcreate-daml-app"]||[]).push([[0],{396:function(e,t,n){},401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(402))},402:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(158),c=n(195),r=(n(101),n(403));t.Vote={decoder:c.lazyMemo((function(){return a.object({voter:c.Party.decoder,vote:c.Text.decoder,unixTime:c.Int.decoder})})),encode:function(e){return{voter:c.Party.encode(e.voter),vote:c.Text.encode(e.vote),unixTime:c.Int.encode(e.unixTime)}}},t.Voting={templateId:"882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643:Voting:Voting",keyDecoder:c.lazyMemo((function(){return c.lazyMemo((function(){return c.Party.decoder}))})),keyEncode:function(e){return c.Party.encode(e)},decoder:c.lazyMemo((function(){return a.object({username:c.Party.decoder,voters:c.List(c.Party).decoder,votes:c.List(c.Text).decoder,voted:c.List(c.Party).decoder,voteTimes:c.List(c.Int).decoder,candidates:c.List(c.Text).decoder,subject:c.Text.decoder})})),encode:function(e){return{username:c.Party.encode(e.username),voters:c.List(c.Party).encode(e.voters),votes:c.List(c.Text).encode(e.votes),voted:c.List(c.Party).encode(e.voted),voteTimes:c.List(c.Int).encode(e.voteTimes),candidates:c.List(c.Text).encode(e.candidates),subject:c.Text.encode(e.subject)}},Archive:{template:function(){return t.Voting},choiceName:"Archive",argumentDecoder:c.lazyMemo((function(){return r.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return r.DA.Internal.Template.Archive.encode(e)},resultDecoder:c.lazyMemo((function(){return c.Unit.decoder})),resultEncode:function(e){return c.Unit.encode(e)}},Vote:{template:function(){return t.Voting},choiceName:"Vote",argumentDecoder:c.lazyMemo((function(){return t.Vote.decoder})),argumentEncode:function(e){return t.Vote.encode(e)},resultDecoder:c.lazyMemo((function(){return c.ContractId(t.Voting).decoder})),resultEncode:function(e){return c.ContractId(t.Voting).encode(e)}}},c.registerTemplate(t.Voting),t.User={templateId:"882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643:Voting:User",keyDecoder:c.lazyMemo((function(){return c.lazyMemo((function(){return c.Party.decoder}))})),keyEncode:function(e){return c.Party.encode(e)},decoder:c.lazyMemo((function(){return a.object({username:c.Party.decoder})})),encode:function(e){return{username:c.Party.encode(e.username)}},Archive:{template:function(){return t.User},choiceName:"Archive",argumentDecoder:c.lazyMemo((function(){return r.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return r.DA.Internal.Template.Archive.encode(e)},resultDecoder:c.lazyMemo((function(){return c.Unit.decoder})),resultEncode:function(e){return c.Unit.encode(e)}}},c.registerTemplate(t.User)},403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(404);t.DA=a,t.packageId="d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662"},404:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(405);t.Internal=a},405:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(406);t.Template=a},406:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(407))},407:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(158),c=n(195);n(101);t.Archive={decoder:c.lazyMemo((function(){return a.object({})})),encode:function(e){return{}}}},413:function(e,t){},415:function(e,t){},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(401);t.Voting=a,t.packageId="882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643"},425:function(e,t){},427:function(e,t){},453:function(e,t){},455:function(e,t){},456:function(e,t){},461:function(e,t){},463:function(e,t){},469:function(e,t){},471:function(e,t){},490:function(e,t){},502:function(e,t){},505:function(e,t){},644:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(69),o=n.n(i),s=(n(396),n(10)),l=n(57),d=n(33),j=n.n(d),u=n(728),b=n(734),x=n(735),h=n(729),O=n(718),p=n(101),m=n.n(p),v=n(42),f=n(346),g=function(){var e,t=null!==(e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_AUTH0_CLIENT_ID:"0gChG63iRdMfvnAovCRnyUspoaGiitVp",REACT_APP_AUTH0_DOMAIN:"dev-ktcahs46.us.auth0.com"}).REACT_APP_LEDGER_ID)&&void 0!==e?e:"create-daml-app-sandbox";return{provider:"none",ledgerId:t,makeToken:function(e){var n={"https://daml.com/ledger-api":{ledgerId:t,applicationId:"create-daml-app",actAs:[e]}};return Object(f.encode)(n,"secret","HS256")}}}(),y="http://localhost:7575/",k=n(117),V=n(24),w=n(52),C=n(102),A=n(1);function T(e){return Object(k.createHash)("sha256").update(e).digest("hex")}var S=function(e){return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(u.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:"100vh"},children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(b.a,{variant:"h3",color:"primary",textAlign:"center",children:"Votencrypt"})}),Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(b.a,{variant:"h6",fontWeight:"600",color:"primary",textAlign:"center",children:"Secure Voting On The Blockchain"})}),Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(x.a,{sx:{p:2,borderRadius:"16px"},elevation:2,children:e})})]})})},L=function(e){var t=e.onLogin,n=Object(C.b)().loginWithPopup,i=Object(C.b)(),o=i.user,d=i.isAuthenticated,b=r.a.useState(!1),x=Object(s.a)(b,2),O=x[0],p=x[1],f=Object(V.f)(),k=Object(c.useCallback)(function(){var e=Object(l.a)(j.a.mark((function e(n){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new m.a({token:n.token,httpBaseUrl:y}),e.next=4,a.fetchByKey(v.Voting.User,n.party);case 4:if(null!==e.sent){e.next=10;break}return c={username:n.party},e.next=9,a.create(v.Voting.User,c);case 9:e.sent;case 10:f("/CreateVote"),t(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),L=r.a.useState(""),P=Object(s.a)(L,2),D=(P[0],P[1],function(){var e=Object(l.a)(j.a.mark((function e(){var t,n,c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===o){e.next=6;break}return n=(t=o||{name:"",picture:"",email:""}).name,t.picture,c=t.email,a=n,r=T(c),e.next=6,k({party:r,token:g.makeToken(r)});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),I=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0),!1===d&&n({screen_hint:"signup"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log(d),!0===d&&!0===O?(D(),Object(A.jsx)(A.Fragment,{})):S(Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(u.a,{container:!0,direction:"column",style:{width:"400px"},spacing:2,children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(h.a,{variant:"contained",color:"primary",className:"test-select-login-button",onClick:I,style:{width:"100%"},children:"Create A Vote"})}),Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(h.a,{variant:"contained",color:"primary",className:"test-select-login-button",component:w.b,to:"/VoteLogin",style:{width:"100%"},children:"Vote"})})]})}))},P=function(e){var t=e.onLogin,n=Object(V.f)(),i=Object(c.useCallback)(function(){var e=Object(l.a)(j.a.mark((function e(a){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new m.a({token:a.token,httpBaseUrl:y}),e.next=4,c.fetchByKey(v.Voting.User,a.party);case 4:if(null!==e.sent){e.next=10;break}return r={username:a.party},e.next=9,c.create(v.Voting.User,r);case 9:e.sent;case 10:n("/Vote"),t(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),o=r.a.useState(""),d=Object(s.a)(o,2),b=d[0],x=d[1],p=function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=b,n=T(b),e.next=5,i({party:n,token:g.makeToken(n)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return S(Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(u.a,{container:!0,direction:"column",style:{width:"400px"},children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(O.a,{placeholder:"Enter Vote Key",value:b,className:"test-select-username-field",sx:{paddingBottom:2},style:{width:"100%"},onChange:function(e){return x(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),p(e))}})}),Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(h.a,{variant:"contained",color:"primary",className:"test-select-login-button",onClick:p,style:{width:"100%"},children:"Vote"})})]})}))},D=function(e){var t=e.onLogin,n=Object(V.f)(),i=Object(c.useCallback)(function(){var e=Object(l.a)(j.a.mark((function e(a){var c,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new m.a({token:a.token,httpBaseUrl:y}),e.next=4,c.fetchByKey(v.Voting.User,a.party);case 4:if(null!==e.sent){e.next=10;break}return r={username:a.party},e.next=9,c.create(v.Voting.User,r);case 9:e.sent;case 10:n("/CreateVote"),t(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),o=r.a.useState(""),d=Object(s.a)(o,2),b=d[0],x=d[1],p=function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=b,n=T(b),e.next=5,i({party:n,token:g.makeToken(n)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return S(Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(u.a,{container:!0,direction:"column",style:{width:"400px"},children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(O.a,{placeholder:"Username",value:b,className:"test-select-username-field",sx:{paddingBottom:2},style:{width:"100%"},onChange:function(e){return x(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),p(e))}})}),Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(h.a,{variant:"contained",className:"test-select-login-button",onClick:p,style:{width:"100%"},children:"Create A Vote"})})]})}))},I=n(739),M=function(e){var t=e.onLogout,n=Object(V.f)();return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(I.a,{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",style:{height:"100vh"},children:Object(A.jsxs)(x.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(A.jsx)(b.a,{variant:"h5",sx:{flexGrow:1},noWrap:!0,children:"Are you sure you want to logout?"}),Object(A.jsx)(h.a,{variant:"contained",color:"primary",component:w.b,to:"/",onClick:t,sx:{m:2},children:"Log Out"}),Object(A.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){return n(1)},sx:{m:2},children:"Take me back"})]})})})},_=function(){return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(I.a,{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",style:{height:"100vh"},children:Object(A.jsxs)(x.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(A.jsx)(b.a,{variant:"h5",sx:{flexGrow:1},noWrap:!0,children:"Oops! Page not found."}),Object(A.jsx)(h.a,{variant:"contained",color:"primary",component:w.b,to:"/",sx:{m:2},children:"Go to home page"})]})})})},E=n(740),U=n(741),R=n(742),z=n(730),N=n(738),K=n(724),F=n(743),H=n(744),B=n(351),W=n.n(B),G=n(699),q=n(700),J=n(701),Q=n(702),Y=n(46),X=n.n(Y),Z=function(e){e.onLogout;var t=Object(C.b)(),n=(t.isAuthenticated,t.logout),c=(Object(Y.useParty)(),r.a.useState(!1)),i=Object(s.a)(c,2),o=i[0],l=i[1];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(I.a,{sx:{flexGrow:1,m:2},children:Object(A.jsx)(E.a,{position:"static",sx:{borderRadius:"16px"},children:Object(A.jsxs)(U.a,{children:[Object(A.jsx)(R.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:function(){l(!0)},className:"menu-button",children:Object(A.jsx)(W.a,{})}),Object(A.jsx)(b.a,{variant:"h5",sx:{flexGrow:1},noWrap:!0,children:"Votencrypt"}),Object(A.jsx)(h.a,{variant:"outlined",color:"inherit",startIcon:Object(A.jsx)(G.a,{}),onClick:function(){n({returnTo:window.location.origin})},children:"Log Out"})]})})}),Object(A.jsxs)(b.a,{variant:"h3",textAlign:"center",color:"primary",sx:{padding:3},children:["Welcome, ",a,"!"]}),Object(A.jsx)(z.a,{anchor:"left",open:o,onClose:function(){return l(!1)},children:Object(A.jsxs)(I.a,{p:2,width:"250px",textAlign:"center",role:"presentation",children:[Object(A.jsx)(b.a,{variant:"h6",component:"div",children:"Menu"}),Object(A.jsxs)(N.a,{children:[Object(A.jsxs)(K.a,{button:!0,component:w.b,to:"/CreateVote",className:"test-select-list-item",children:[Object(A.jsx)(F.a,{children:Object(A.jsx)(q.a,{})}),Object(A.jsx)(H.a,{primary:"Create Vote"})]}),Object(A.jsxs)(K.a,{button:!0,component:w.b,to:"/VoteAnalytics",className:"test-select-list-item",children:[Object(A.jsx)(F.a,{children:Object(A.jsx)(J.a,{})}),Object(A.jsx)(H.a,{primary:"Analytics"})]}),Object(A.jsxs)(K.a,{button:!0,component:w.b,to:"/VoteManagement",className:"test-select-list-item",children:[Object(A.jsx)(F.a,{children:Object(A.jsx)(Q.a,{})}),Object(A.jsx)(H.a,{primary:"Vote Management"})]})]})]})})]})},$=n(745),ee=n(746),te=function(){var e,t,n,a,c,r,i,o=Object(Y.useLedger)(),s=Object(Y.useStreamQueries)(v.Voting.Voting);console.log(s);var d=function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.archiveByKey(v.Voting.Voting,null===(t=s.contracts[0])||void 0===t?void 0:t.signatories[0]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsx)($.a,{children:Object(A.jsx)(I.a,{sx:{p:1},children:Object(A.jsxs)(x.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(A.jsxs)(u.a,{container:!0,spacing:0,children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(Q.a,{sx:{fontSize:50},color:"primary"})}),Object(A.jsxs)(u.a,{item:!0,children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(b.a,{variant:"h5",display:"block",children:"Vote Management"})}),Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(b.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Manage active vote"})})]})]}),Object(A.jsxs)(x.a,{sx:{px:5,pb:3,borderRadius:"16px"},variant:"outlined",children:[Object(A.jsx)(b.a,{variant:"h6",sx:{pt:2},children:"Vote Description"}),null!==(e=null===(t=s.contracts[0])||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.subject)&&void 0!==e?e:"Loading...",Object(A.jsx)(ee.a,{sx:{pt:2}}),Object(A.jsx)(b.a,{variant:"h6",sx:{pt:2},children:"Vote Candidates"}),Object(A.jsx)(N.a,{children:null===(a=s.contracts[0])||void 0===a||null===(c=a.payload)||void 0===c?void 0:c.candidates.map((function(e,t){return Object(A.jsx)(K.a,{children:Object(A.jsx)(H.a,{primary:t+1+". "+e})},e)}))}),Object(A.jsx)(ee.a,{sx:{pt:2}}),Object(A.jsx)(b.a,{variant:"h6",sx:{pt:2},children:"Number of voters"}),null===(r=s.contracts[0])||void 0===r||null===(i=r.payload)||void 0===i?void 0:i.voters.length]}),Object(A.jsx)(I.a,{textAlign:"center",children:Object(A.jsx)(h.a,{variant:"contained",onClick:d,className:"button",name:"Arcive Vote",sx:{m:2,alignItems:"center"},children:"Archive Vote"})})]})})})},ne=n(736),ae=n(695),ce=n(731),re=n(747),ie=n(721),oe=n(725),se=n(703),le=n(704),de=function(e){var t,n,a,i,o,d=e.onLogout,O=Object(Y.useParty)(),p=Object(Y.useLedger)(),m=r.a.useState(!1),f=Object(s.a)(m,2),g=f[0],y=f[1],k=r.a.useState(""),V=Object(s.a)(k,2),C=V[0],T=V[1],S=function(e,t){"clickaway"!==t&&y(!1)},L=Object(A.jsx)(r.a.Fragment,{children:Object(A.jsx)(R.a,{size:"small","aria-label":"close",color:"inherit",onClick:S,children:Object(A.jsx)(se.a,{fontSize:"small"})})}),P=Object(Y.useStreamQueries)(v.Voting.Voting),D=Object(c.useState)(""),M=Object(s.a)(D,2),_=M[0],E=M[1],U=(new Date).getTime(),z=function(){var e=Object(l.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=P.contracts[0])||void 0===t||!t.payload.voted.includes(O)){e.next=5;break}T("You have already voted"),y(!0),e.next=9;break;case 5:return e.next=7,p.exerciseByKey(v.Voting.Voting.Vote,null===(n=P.contracts[0])||void 0===n?void 0:n.signatories[0],{voter:O,vote:_,unixTime:U}).catch(console.error);case 7:T("Your vote has been cast. Please or close the browser tab"),y(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(I.a,{textAlign:"right",sx:{p:1},children:Object(A.jsx)(h.a,{variant:"outlined",color:"inherit",startIcon:Object(A.jsx)(G.a,{}),onClick:d,component:w.b,to:"/",children:"Log Out"})}),Object(A.jsx)($.a,{children:Object(A.jsx)(u.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:"75vh"},children:Object(A.jsxs)(x.a,{sx:{p:3,borderRadius:"16px",width:"90%"},elevation:2,children:[Object(A.jsxs)(u.a,{container:!0,spacing:0,children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(le.a,{sx:{fontSize:50},color:"primary"})}),Object(A.jsxs)(u.a,{item:!0,children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(b.a,{variant:"h5",display:"block",children:"Vote"})}),Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(b.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Read the vote description carefully and choose an option"})})]})]}),Object(A.jsx)(ee.a,{}),Object(A.jsx)(b.a,{variant:"h6",sx:{pt:2},children:"Vote Description"}),null!==(t=null===(n=P.contracts[0])||void 0===n||null===(a=n.payload)||void 0===a?void 0:a.subject)&&void 0!==t?t:"Loading...",Object(A.jsx)(ee.a,{sx:{pb:2}}),Object(A.jsx)(I.a,{textAlign:"center",children:Object(A.jsxs)(ne.a,{children:[Object(A.jsx)(ae.a,{id:"demo-radio-buttons-group-label",children:"Options"}),Object(A.jsx)(ce.a,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"female",name:"radio-buttons-group",children:Object(A.jsx)(N.a,{children:null===(i=P.contracts[0])||void 0===i||null===(o=i.payload)||void 0===o?void 0:o.candidates.map((function(e){return Object(A.jsx)(K.a,{children:Object(A.jsx)(re.a,{value:e,control:Object(A.jsx)(ie.a,{}),label:e,onChange:function(t){E(e)}})},e)}))})})]})}),Object(A.jsx)(I.a,{textAlign:"center",children:Object(A.jsx)(h.a,{variant:"contained",onClick:z,className:"button",name:"Create Vote",sx:{m:2,alignItems:"center"},children:"Vote"})}),Object(A.jsx)(oe.a,{open:g,autoHideDuration:4e3,onClose:S,message:C,action:L})]})})})]})},je=n(717),ue=n(25),be=n(748),xe=n(705),he=n(185),Oe=n(363),pe=n(184),me=n(154),ve=n(727),fe=n(365),ge=n(125),ye=n(709),ke=n(710),Ve=n(711),we=n(53),Ce=n(186),Ae=n(370),Te=n(352),Se=n.n(Te),Le=function(){var e,t,n,a,r,i,o=Object(Y.useStreamQueries)(v.Voting.Voting),l=(null===(e=o.contracts[0])||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.votes)||[],d=(null===(n=o.contracts[0])||void 0===n||null===(a=n.payload)||void 0===a?void 0:a.voters)||[],j=(null===(r=o.contracts[0])||void 0===r||null===(i=r.payload)||void 0===i?void 0:i.voteTimes)||[],h=l.length/d.length*100||"Loading...",O=Object(c.useMemo)((function(){if(0!==l.length){var e=new Map;return l.forEach((function(t){e.has(t)?e.set(t,(e.get(t)||1)+1):e.set(t,1)})),Object(ue.a)(e).map((function(e){var t=Object(s.a)(e,2);return{name:t[0],value:t[1]}}))}return[{name:"No Data",value:0}]}),[l]),p=Object(c.useMemo)((function(){for(var e=[],t=0;t<O.length;t++)e.push("#".concat(Math.random().toString(16).slice(2,8)));return e}),[O]),m=Object(c.useMemo)((function(){if(0!==l.length){var e=new Map;return j.forEach((function(t){var n=t.slice(0,-5)+"00000";e.has(parseInt(n))?e.set(parseInt(n),(e.get(parseInt(n))||1)+1):e.set(parseInt(n),1)})),Object(ue.a)(e).map((function(e){var t=Object(s.a)(e,2);return{time:t[0],value:t[1]}})).reverse()}return[{time:1,value:0}]}),[j]);return Object(A.jsx)($.a,{children:Object(A.jsx)(I.a,{sx:{p:1},children:Object(A.jsxs)(x.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(A.jsxs)(u.a,{container:!0,spacing:0,children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(J.a,{sx:{fontSize:50},color:"primary"})}),Object(A.jsxs)(u.a,{item:!0,children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(b.a,{variant:"h5",display:"block",children:"Vote Analytics"})}),Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(b.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"View current vote results"})})]})]}),Object(A.jsx)(ee.a,{}),Object(A.jsxs)(b.a,{variant:"h5",children:["Vote Progress: ",h,"%"]}),Object(A.jsx)(be.a,{variant:"determinate",value:h}),Object(A.jsxs)(u.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsxs)(xe.a,{width:400,height:100,data:O,children:[Object(A.jsx)(he.a,{dataKey:"name"}),Object(A.jsx)(Oe.a,{dataKey:"value",fill:"#8884d8",children:O.map((function(e,t){return Object(A.jsx)(pe.a,{fill:p[t]},"cell-".concat(t))}))}),Object(A.jsx)(me.a,{})]})}),Object(A.jsx)(u.a,{item:!0,children:Object(A.jsxs)(ve.a,{width:400,height:400,children:[Object(A.jsxs)(fe.a,{data:O,dataKey:"value",nameKey:"name",children:[O.map((function(e,t){return Object(A.jsx)(pe.a,{fill:p[t]},"cell-".concat(t))})),Object(A.jsx)(ge.a,{dataKey:"name",fill:"white"})]}),Object(A.jsx)(me.a,{})]})})]}),Object(A.jsx)(b.a,{variant:"h5",textAlign:"center",children:"Votes Over Time"}),Object(A.jsx)(I.a,{style:{width:"100%",height:"20vh"},textAlign:"center",children:Object(A.jsx)(ye.a,{width:"100%",height:"100%",children:Object(A.jsxs)(ke.a,{width:500,height:300,data:m,margin:{top:5,right:30,left:20,bottom:20},children:[Object(A.jsx)(Ve.a,{strokeDasharray:"3 3"}),Object(A.jsx)(he.a,{dataKey:"time",tickFormatter:function(e){return Se()(e).format("HH:mm Do")},children:Object(A.jsx)(we.a,{value:"Time",fill:"#8884d8",position:"bottom"})}),Object(A.jsx)(Ce.a,{allowDecimals:!1,children:Object(A.jsx)(we.a,{value:"Votes",fill:"#8884d8",angle:-90})}),Object(A.jsx)(me.a,{}),Object(A.jsx)(Ae.a,{type:"monotone",name:"Votes",dataKey:"value",stroke:"#8884d8",activeDot:{r:8}})]})})})]})})})},Pe=n(722),De=n(713),Ie=n(714),Me=n(715),_e=n(732),Ee=n(726),Ue=n(712),Re=function(e){var t=e.heading,n=e.content,a=c.useState(!1),r=Object(s.a)(a,2),i=r[0],o=r[1];return Object(A.jsxs)("div",{children:[Object(A.jsx)(Ee.a,{ariaLabel:"SpeedDial basic example",sx:{position:"fixed",bottom:16,right:16},icon:Object(A.jsx)(Ue.a,{}),onClick:function(){o(!0)}}),Object(A.jsxs)(_e.a,{open:i,onClose:function(e){console.log(e),o(!1)},children:[Object(A.jsx)(b.a,{variant:"h6",textAlign:"center",sx:{p:1},children:t}),Object(A.jsx)(I.a,{sx:{p:4},children:Object(A.jsx)(b.a,{variant:"h6",children:n})})]})]})},ze=[],Ne=[],Ke=function(){var e=Object(Y.useParty)(),t=Object(c.useState)([]),a=Object(s.a)(t,2),i=a[0],o=a[1],d=r.a.useState(10),p=Object(s.a)(d,2),m=p[0],f=p[1],g=Object(c.useState)(""),y=Object(s.a)(g,2),V=y[0],w=y[1],C=Object(c.useState)(""),T=Object(s.a)(C,2),S=T[0],L=T[1],P=r.a.useState(!1),D=Object(s.a)(P,2),M=D[0],_=D[1],E=r.a.useState(""),U=Object(s.a)(E,2),z=U[0],F=U[1],B=Object(Y.useStreamQueries)(v.Voting.Voting),W=Object(Y.useLedger)(),G=function(){var t=Object(l.a)(j.a.mark((function t(n){var a,c,r,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),n.currentTarget.name,0===B.contracts.length?(F("Vote Created"),_(!0),a=J(m),c=Object(s.a)(a,2),c[0],r=c[1],o={username:e,voters:r,votes:[],voted:[],voteTimes:[],candidates:i,subject:V},W.create(v.Voting.Voting,o)):(F("Vote In Progress"),_(!0));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var J=function(e){for(var t=0;t<e;t++){var a=n(117).randomBytes(20).toString("hex");ze.push("".concat(a)),Ne.push((c=a,Object(k.createHash)("sha256").update(c).digest("hex")))}var c;return[ze,Ne]},Q=function(){i.includes(S)?(F("Candidate already exists"),_(!0)):(L(""),o([S].concat(Object(ue.a)(i))))},X=function(e,t){"clickaway"!==t&&_(!1)},Z=Object(A.jsx)(r.a.Fragment,{children:Object(A.jsx)(R.a,{size:"small","aria-label":"close",color:"inherit",onClick:X,children:Object(A.jsx)(se.a,{fontSize:"small"})})});return Object(A.jsxs)($.a,{children:[Object(A.jsx)(I.a,{sx:{p:1},children:Object(A.jsxs)(x.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(A.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[Object(A.jsx)(q.a,{sx:{fontSize:45},color:"primary"}),Object(A.jsx)(b.a,{variant:"h5",children:"Create A Vote"})]}),Object(A.jsx)(ee.a,{sx:{p:0}}),Object(A.jsx)(b.a,{variant:"h6",sx:{pt:2},children:"What is the vote on?"}),Object(A.jsx)(I.a,{textAlign:"center",children:Object(A.jsx)(O.a,{id:"outlined-basic",label:"Subject",variant:"outlined",value:V,onChange:function(e){w(e.target.value)},style:{width:"94%"},sx:{m:2}})}),Object(A.jsxs)(b.a,{variant:"h6",children:["Voters: ",m]}),Object(A.jsx)(I.a,{textAlign:"center",children:Object(A.jsx)(Pe.a,{value:m,"aria-label":"Default",valueLabelDisplay:"auto",name:"slider",sx:{m:2},style:{width:"95%"},onChange:function(e){f(e.target.value)}})}),Object(A.jsxs)(b.a,{variant:"h6",children:["Candidates: ",i.length]}),Object(A.jsxs)(I.a,{textAlign:"center",children:[Object(A.jsx)(O.a,{id:"outlined-basic",label:"Candidate",variant:"outlined",value:S,onChange:function(e){L(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),Q())},style:{width:"95%"},sx:{m:2},InputProps:{endAdornment:Object(A.jsx)(R.a,{onClick:Q,children:Object(A.jsx)(De.a,{})})}}),Object(A.jsx)(N.a,{style:{width:"95%"},sx:{ml:2},children:i.map((function(e){return Object(A.jsx)(K.a,{secondaryAction:Object(A.jsx)(R.a,{edge:"end","aria-label":"delete",onClick:function(t){o((function(t){return t.filter((function(t){return t!==e}))})),console.log(i)},children:Object(A.jsx)(Ie.a,{})}),children:Object(A.jsx)(H.a,{primary:e})},e)}))})]}),Object(A.jsx)(I.a,{textAlign:"center",children:Object(A.jsx)(h.a,{variant:"contained",onClick:G,className:"button",name:"Create Vote",sx:{m:2,alignItems:"center"},children:"Create Vote"})}),Object(A.jsx)(oe.a,{open:M,autoHideDuration:2e3,onClose:X,message:z,action:Z})]})}),Object(A.jsx)(I.a,{sx:{p:1},children:Object(A.jsxs)(x.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(A.jsxs)(u.a,{container:!0,children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(Me.a,{sx:{fontSize:45},color:"primary"})}),Object(A.jsxs)(u.a,{item:!0,children:[Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(b.a,{variant:"h5",display:"block",children:"Vote Keys"})}),Object(A.jsx)(u.a,{item:!0,children:Object(A.jsx)(b.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Distribute vote keys between voters"})})]}),Object(A.jsxs)(I.a,{textAlign:"right",sx:{flexGrow:1},children:[Object(A.jsx)(h.a,{sx:{margin:1},variant:"contained",onClick:function(){var e=ze.join("\n"),t=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="voteKeys.csv",a.click(),F("Keys Exported"),_(!0)},children:"Export CSV"}),Object(A.jsx)(h.a,{variant:"contained",onClick:function(){navigator.clipboard.writeText(ze.join("\n")),F("Keys Copied To Clipboard"),_(!0)},children:"Copy To Clipboard"})]})]}),Object(A.jsx)(N.a,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:"16px",position:"relative",overflow:"auto",maxHeight:300,"& ul":{padding:0}},subheader:Object(A.jsx)("li",{}),children:[0].map((function(e){return Object(A.jsx)("li",{children:Object(A.jsx)("ul",{children:ze.map((function(t){return Object(A.jsx)(K.a,{children:Object(A.jsx)(H.a,{primary:"".concat(t)})},"item-".concat(e,"-").concat(t))}))})},"section-".concat(e))}))})]})}),Object(A.jsx)(Re,{heading:"Help Heading",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n"})]})},Fe=n(716),He=n(371),Be=n(733);var We=function(){var e=r.a.useState(),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(Fe.a)("(prefers-color-scheme: dark)"),i=r.a.useMemo((function(){return Object(He.a)({palette:{mode:c?"dark":"light",primary:{main:"#387DF6"},secondary:{main:"#666666"}},typography:{fontFamily:"Roboto, sans-serif",subtitle1:{fontSize:16},h5:{fontWeight:700,fontSize:24},h6:{fontWeight:500}}})}),[c]);return n?Object(A.jsx)(X.a,{token:n.token,party:n.party,httpBaseUrl:y,children:Object(A.jsxs)(Be.a,{theme:i,children:[Object(A.jsx)(je.a,{}),Object(A.jsx)("div",{children:Object(A.jsxs)(V.c,{children:[Object(A.jsx)(V.a,{path:"/Vote",element:Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(de,{onLogout:function(){return a(void 0)}})})}),Object(A.jsx)(V.a,{path:"/CreateVote",element:Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Z,{onLogout:function(){return a(void 0)}}),Object(A.jsx)(Ke,{})]})}),Object(A.jsx)(V.a,{path:"/VoteAnalytics",element:Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Z,{onLogout:function(){return a(void 0)}}),Object(A.jsx)(Le,{})]})}),Object(A.jsx)(V.a,{path:"/VoteManagement",element:Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Z,{onLogout:function(){return a(void 0)}}),Object(A.jsx)(te,{})]})}),Object(A.jsx)(V.a,{path:"*",element:Object(A.jsx)(M,{onLogout:function(){return a(void 0)}})})]})})]})}):Object(A.jsxs)(Be.a,{theme:i,children:[Object(A.jsx)(je.a,{}),Object(A.jsx)("div",{children:Object(A.jsxs)(V.c,{children:[Object(A.jsx)(V.a,{path:"/",element:Object(A.jsx)(L,{onLogin:a})}),Object(A.jsx)(V.a,{path:"/VoteLogin",element:Object(A.jsx)(P,{onLogin:a})}),Object(A.jsx)(V.a,{path:"/CreateVoteLogin",element:Object(A.jsx)(D,{onLogin:a})}),Object(A.jsx)(V.a,{path:"*",element:Object(A.jsx)(_,{})})]})})]})},Ge=function(e){var t=e.children,n=Object(V.f)();return Object(A.jsx)(C.a,{domain:"dev-ktcahs46.us.auth0.com",clientId:"0gChG63iRdMfvnAovCRnyUspoaGiitVp",redirectUri:window.location.origin,onRedirectCallback:function(e){n((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},children:t})};o.a.render(Object(A.jsx)(w.a,{children:Object(A.jsx)(Ge,{children:Object(A.jsx)(We,{})})}),document.getElementById("root"))}},[[644,1,2]]]);
//# sourceMappingURL=main.efe07d78.chunk.js.map