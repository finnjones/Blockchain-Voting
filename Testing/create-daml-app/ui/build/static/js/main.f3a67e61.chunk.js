(this["webpackJsonpcreate-daml-app"]=this["webpackJsonpcreate-daml-app"]||[]).push([[0],{396:function(e,t,n){},401:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(402))},402:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(158),c=n(195),r=(n(101),n(403));t.Vote={decoder:c.lazyMemo((function(){return a.object({voter:c.Party.decoder,vote:c.Text.decoder,unixTime:c.Int.decoder})})),encode:function(e){return{voter:c.Party.encode(e.voter),vote:c.Text.encode(e.vote),unixTime:c.Int.encode(e.unixTime)}}},t.Voting={templateId:"882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643:Voting:Voting",keyDecoder:c.lazyMemo((function(){return c.lazyMemo((function(){return c.Party.decoder}))})),keyEncode:function(e){return c.Party.encode(e)},decoder:c.lazyMemo((function(){return a.object({username:c.Party.decoder,voters:c.List(c.Party).decoder,votes:c.List(c.Text).decoder,voted:c.List(c.Party).decoder,voteTimes:c.List(c.Int).decoder,candidates:c.List(c.Text).decoder,subject:c.Text.decoder})})),encode:function(e){return{username:c.Party.encode(e.username),voters:c.List(c.Party).encode(e.voters),votes:c.List(c.Text).encode(e.votes),voted:c.List(c.Party).encode(e.voted),voteTimes:c.List(c.Int).encode(e.voteTimes),candidates:c.List(c.Text).encode(e.candidates),subject:c.Text.encode(e.subject)}},Archive:{template:function(){return t.Voting},choiceName:"Archive",argumentDecoder:c.lazyMemo((function(){return r.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return r.DA.Internal.Template.Archive.encode(e)},resultDecoder:c.lazyMemo((function(){return c.Unit.decoder})),resultEncode:function(e){return c.Unit.encode(e)}},Vote:{template:function(){return t.Voting},choiceName:"Vote",argumentDecoder:c.lazyMemo((function(){return t.Vote.decoder})),argumentEncode:function(e){return t.Vote.encode(e)},resultDecoder:c.lazyMemo((function(){return c.ContractId(t.Voting).decoder})),resultEncode:function(e){return c.ContractId(t.Voting).encode(e)}}},c.registerTemplate(t.Voting),t.User={templateId:"882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643:Voting:User",keyDecoder:c.lazyMemo((function(){return c.lazyMemo((function(){return c.Party.decoder}))})),keyEncode:function(e){return c.Party.encode(e)},decoder:c.lazyMemo((function(){return a.object({username:c.Party.decoder})})),encode:function(e){return{username:c.Party.encode(e.username)}},Archive:{template:function(){return t.User},choiceName:"Archive",argumentDecoder:c.lazyMemo((function(){return r.DA.Internal.Template.Archive.decoder})),argumentEncode:function(e){return r.DA.Internal.Template.Archive.encode(e)},resultDecoder:c.lazyMemo((function(){return c.Unit.decoder})),resultEncode:function(e){return c.Unit.encode(e)}}},c.registerTemplate(t.User)},403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(404);t.DA=a,t.packageId="d14e08374fc7197d6a0de468c968ae8ba3aadbf9315476fd39071831f5923662"},404:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(405);t.Internal=a},405:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(406);t.Template=a},406:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(407))},407:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(158),c=n(195);n(101);t.Archive={decoder:c.lazyMemo((function(){return a.object({})})),encode:function(e){return{}}}},413:function(e,t){},415:function(e,t){},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(401);t.Voting=a,t.packageId="882924905da2ef1e5c9a7c6b53d0ec1554a7ce58f5ae313b605a0d71a508a643"},425:function(e,t){},427:function(e,t){},453:function(e,t){},455:function(e,t){},456:function(e,t){},461:function(e,t){},463:function(e,t){},469:function(e,t){},471:function(e,t){},490:function(e,t){},502:function(e,t){},505:function(e,t){},644:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(69),i=n.n(r),o=(n(396),n(10)),s=n(57),l=n(33),d=n.n(l),j=n(728),u=n(734),b=n(735),x=n(729),h=n(718),O=n(101),p=n.n(O),m=n(42),v=n(346);console.log(false);var f,g=function(){var e,t=null!==(e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_LEDGER_ID)&&void 0!==e?e:"create-daml-app-sandbox";return{provider:"none",ledgerId:t,makeToken:function(e){var n={"https://daml.com/ledger-api":{ledgerId:t,applicationId:"create-daml-app",actAs:[e]}};return Object(v.encode)(n,"secret","HS256")}}}(),y=void 0,k=n(117),V=n(24),w=n(52),C=n(102),T=n(1);function S(e){return Object(k.createHash)("sha256").update(e).digest("hex")}var A=function(e){return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(j.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:"100vh"},children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h3",color:"primary",textAlign:"center",children:"Votencrypt"})}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h6",fontWeight:"600",color:"primary",textAlign:"center",children:"Secure Voting On The Blockchain"})}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(b.a,{sx:{p:2,borderRadius:"16px"},elevation:2,children:e})})]})})},_=function(e){var t=e.onLogin,n=Object(C.b)().loginWithPopup,r=Object(C.b)(),i=r.user,l=r.isAuthenticated,u=c.a.useState(!1),b=Object(o.a)(u,2),h=b[0],O=b[1],v=Object(V.f)(),k=Object(a.useCallback)(function(){var e=Object(s.a)(d.a.mark((function e(n){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=new p.a({token:n.token,httpBaseUrl:y}),e.next=4,a.fetchByKey(m.Voting.User,n.party);case 4:if(null!==e.sent){e.next=10;break}return c={username:n.party},e.next=9,a.create(m.Voting.User,c);case 9:e.sent;case 10:v("/CreateVote"),t(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),_=c.a.useState(""),D=Object(o.a)(_,2),P=(D[0],D[1],function(){var e=Object(s.a)(d.a.mark((function e(){var t,n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i){e.next=6;break}return n=(t=i||{name:"",picture:"",email:""}).name,t.picture,a=t.email,f=n,c=S(a),e.next=6,k({party:c,token:g.makeToken(c)});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),L=function(){var e=Object(s.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O(!0),!1===l&&n({screen_hint:"signup"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.log(l),!0===l&&!0===h?(P(),Object(T.jsx)(T.Fragment,{})):A(Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(j.a,{container:!0,direction:"column",style:{width:"400px"},spacing:2,children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(x.a,{variant:"contained",color:"primary",className:"test-select-login-button",onClick:L,style:{width:"100%"},children:"Create A Vote"})}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(x.a,{variant:"contained",color:"primary",className:"test-select-login-button",component:w.b,to:"/VoteLogin",style:{width:"100%"},children:"Vote"})})]})}))},D=function(e){var t=e.onLogin,n=Object(V.f)(),r=Object(a.useCallback)(function(){var e=Object(s.a)(d.a.mark((function e(a){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new p.a({token:a.token,httpBaseUrl:y}),e.next=4,c.fetchByKey(m.Voting.User,a.party);case 4:if(null!==e.sent){e.next=10;break}return r={username:a.party},e.next=9,c.create(m.Voting.User,r);case 9:e.sent;case 10:n("/Vote"),t(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),i=c.a.useState(""),l=Object(o.a)(i,2),u=l[0],b=l[1],O=function(){var e=Object(s.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f=u,n=S(u),e.next=5,r({party:n,token:g.makeToken(n)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return A(Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(j.a,{container:!0,direction:"column",style:{width:"400px"},children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(h.a,{placeholder:"Enter Vote Key",value:u,className:"test-select-username-field",sx:{paddingBottom:2},style:{width:"100%"},onChange:function(e){return b(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),O(e))}})}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(x.a,{variant:"contained",color:"primary",className:"test-select-login-button",onClick:O,style:{width:"100%"},children:"Vote"})})]})}))},P=function(e){var t=e.onLogin,n=Object(V.f)(),r=Object(a.useCallback)(function(){var e=Object(s.a)(d.a.mark((function e(a){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=new p.a({token:a.token,httpBaseUrl:y}),e.next=4,c.fetchByKey(m.Voting.User,a.party);case 4:if(null!==e.sent){e.next=10;break}return r={username:a.party},e.next=9,c.create(m.Voting.User,r);case 9:e.sent;case 10:n("/CreateVote"),t(a),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Unknown error:\n".concat(JSON.stringify(e.t0)));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),[t]),i=c.a.useState(""),l=Object(o.a)(i,2),u=l[0],b=l[1],O=function(){var e=Object(s.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),f=u,n=S(u),e.next=5,r({party:n,token:g.makeToken(n)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return A(Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)(j.a,{container:!0,direction:"column",style:{width:"400px"},children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(h.a,{placeholder:"Username",value:u,className:"test-select-username-field",sx:{paddingBottom:2},style:{width:"100%"},onChange:function(e){return b(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),O(e))}})}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(x.a,{variant:"contained",className:"test-select-login-button",onClick:O,style:{width:"100%"},children:"Create A Vote"})})]})}))},L=n(739),E=function(e){var t=e.onLogout,n=Object(V.f)();return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(L.a,{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",style:{height:"100vh"},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsx)(u.a,{variant:"h5",sx:{flexGrow:1},noWrap:!0,children:"Are you sure you want to logout?"}),Object(T.jsx)(x.a,{variant:"contained",color:"primary",component:w.b,to:"/",onClick:t,sx:{m:2},children:"Log Out"}),Object(T.jsx)(x.a,{variant:"contained",color:"primary",onClick:function(){return n(1)},sx:{m:2},children:"Take me back"})]})})})},I=function(){return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(L.a,{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",style:{height:"100vh"},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsx)(u.a,{variant:"h5",sx:{flexGrow:1},noWrap:!0,children:"Oops! Page not found."}),Object(T.jsx)(x.a,{variant:"contained",color:"primary",component:w.b,to:"/",sx:{m:2},children:"Go to home page"})]})})})},M=n(740),U=n(741),R=n(742),K=n(730),N=n(738),z=n(724),H=n(743),F=n(744),B=n(351),W=n.n(B),G=n(699),q=n(700),J=n(701),Q=n(702),Y=n(46),X=n.n(Y),Z=function(e){e.onLogout;var t=Object(C.b)(),n=(t.isAuthenticated,t.logout),a=(Object(Y.useParty)(),c.a.useState(!1)),r=Object(o.a)(a,2),i=r[0],s=r[1];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(L.a,{sx:{flexGrow:1,m:2},children:Object(T.jsx)(M.a,{position:"static",sx:{borderRadius:"16px"},children:Object(T.jsxs)(U.a,{children:[Object(T.jsx)(R.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:function(){s(!0)},className:"menu-button",children:Object(T.jsx)(W.a,{})}),Object(T.jsx)(u.a,{variant:"h5",sx:{flexGrow:1},noWrap:!0,children:"Votencrypt"}),Object(T.jsx)(x.a,{variant:"outlined",color:"inherit",startIcon:Object(T.jsx)(G.a,{}),onClick:function(){n({returnTo:window.location.origin})},children:"Log Out"})]})})}),Object(T.jsxs)(u.a,{variant:"h3",textAlign:"center",color:"primary",sx:{padding:3},children:["Welcome, ",f,"!"]}),Object(T.jsx)(K.a,{anchor:"left",open:i,onClose:function(){return s(!1)},children:Object(T.jsxs)(L.a,{p:2,width:"250px",textAlign:"center",role:"presentation",children:[Object(T.jsx)(u.a,{variant:"h6",component:"div",children:"Menu"}),Object(T.jsxs)(N.a,{children:[Object(T.jsxs)(z.a,{button:!0,component:w.b,to:"/CreateVote",className:"test-select-list-item",children:[Object(T.jsx)(H.a,{children:Object(T.jsx)(q.a,{})}),Object(T.jsx)(F.a,{primary:"Create Vote"})]}),Object(T.jsxs)(z.a,{button:!0,component:w.b,to:"/VoteAnalytics",className:"test-select-list-item",children:[Object(T.jsx)(H.a,{children:Object(T.jsx)(J.a,{})}),Object(T.jsx)(F.a,{primary:"Analytics"})]}),Object(T.jsxs)(z.a,{button:!0,component:w.b,to:"/VoteManagement",className:"test-select-list-item",children:[Object(T.jsx)(H.a,{children:Object(T.jsx)(Q.a,{})}),Object(T.jsx)(F.a,{primary:"Vote Management"})]})]})]})})]})},$=n(745),ee=n(746),te=function(){var e,t,n,a,c,r,i,o=Object(Y.useLedger)(),l=Object(Y.useStreamQueries)(m.Voting.Voting);console.log(l);var h=function(){var e=Object(s.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.archiveByKey(m.Voting.Voting,null===(t=l.contracts[0])||void 0===t?void 0:t.signatories[0]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsx)($.a,{children:Object(T.jsx)(L.a,{sx:{p:1},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)(j.a,{container:!0,spacing:0,children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(Q.a,{sx:{fontSize:50},color:"primary"})}),Object(T.jsxs)(j.a,{item:!0,children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h5",display:"block",children:"Vote Management"})}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Manage active vote"})})]})]}),Object(T.jsxs)(b.a,{sx:{px:5,pb:3,borderRadius:"16px"},variant:"outlined",children:[Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"Vote Description"}),null!==(e=null===(t=l.contracts[0])||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.subject)&&void 0!==e?e:"Loading...",Object(T.jsx)(ee.a,{sx:{pt:2}}),Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"Vote Candidates"}),Object(T.jsx)(N.a,{children:null===(a=l.contracts[0])||void 0===a||null===(c=a.payload)||void 0===c?void 0:c.candidates.map((function(e,t){return Object(T.jsx)(z.a,{children:Object(T.jsx)(F.a,{primary:t+1+". "+e})},e)}))}),Object(T.jsx)(ee.a,{sx:{pt:2}}),Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"Number of voters"}),null===(r=l.contracts[0])||void 0===r||null===(i=r.payload)||void 0===i?void 0:i.voters.length]}),Object(T.jsx)(L.a,{textAlign:"center",children:Object(T.jsx)(x.a,{variant:"contained",onClick:h,className:"button",name:"Arcive Vote",sx:{m:2,alignItems:"center"},children:"Archive Vote"})})]})})})},ne=n(736),ae=n(695),ce=n(731),re=n(747),ie=n(721),oe=n(725),se=n(703),le=n(704),de=function(e){var t,n,r,i,l,h=e.onLogout,O=Object(Y.useParty)(),p=Object(Y.useLedger)(),v=c.a.useState(!1),f=Object(o.a)(v,2),g=f[0],y=f[1],k=c.a.useState(""),V=Object(o.a)(k,2),C=V[0],S=V[1],A=function(e,t){"clickaway"!==t&&y(!1)},_=Object(T.jsx)(c.a.Fragment,{children:Object(T.jsx)(R.a,{size:"small","aria-label":"close",color:"inherit",onClick:A,children:Object(T.jsx)(se.a,{fontSize:"small"})})}),D=Object(Y.useStreamQueries)(m.Voting.Voting),P=Object(a.useState)(""),E=Object(o.a)(P,2),I=E[0],M=E[1],U=(new Date).getTime(),K=function(){var e=Object(s.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=D.contracts[0])||void 0===t||!t.payload.voted.includes(O)){e.next=5;break}S("You have already voted"),y(!0),e.next=9;break;case 5:return e.next=7,p.exerciseByKey(m.Voting.Voting.Vote,null===(n=D.contracts[0])||void 0===n?void 0:n.signatories[0],{voter:O,vote:I,unixTime:U}).catch(console.error);case 7:S("Your vote has been cast. Please or close the browser tab"),y(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(L.a,{textAlign:"right",sx:{p:1},children:Object(T.jsx)(x.a,{variant:"outlined",color:"inherit",startIcon:Object(T.jsx)(G.a,{}),onClick:h,component:w.b,to:"/",children:"Log Out"})}),Object(T.jsx)($.a,{children:Object(T.jsx)(j.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",style:{height:"75vh"},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px",width:"90%"},elevation:2,children:[Object(T.jsxs)(j.a,{container:!0,spacing:0,children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(le.a,{sx:{fontSize:50},color:"primary"})}),Object(T.jsxs)(j.a,{item:!0,children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h5",display:"block",children:"Vote"})}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Read the vote description carefully and choose an option"})})]})]}),Object(T.jsx)(ee.a,{}),Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"Vote Description"}),null!==(t=null===(n=D.contracts[0])||void 0===n||null===(r=n.payload)||void 0===r?void 0:r.subject)&&void 0!==t?t:"Loading...",Object(T.jsx)(ee.a,{sx:{pb:2}}),Object(T.jsx)(L.a,{textAlign:"center",children:Object(T.jsxs)(ne.a,{children:[Object(T.jsx)(ae.a,{id:"demo-radio-buttons-group-label",children:"Options"}),Object(T.jsx)(ce.a,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"female",name:"radio-buttons-group",children:Object(T.jsx)(N.a,{children:null===(i=D.contracts[0])||void 0===i||null===(l=i.payload)||void 0===l?void 0:l.candidates.map((function(e){return Object(T.jsx)(z.a,{children:Object(T.jsx)(re.a,{value:e,control:Object(T.jsx)(ie.a,{}),label:e,onChange:function(t){M(e)}})},e)}))})})]})}),Object(T.jsx)(L.a,{textAlign:"center",children:Object(T.jsx)(x.a,{variant:"contained",onClick:K,className:"button",name:"Create Vote",sx:{m:2,alignItems:"center"},children:"Vote"})}),Object(T.jsx)(oe.a,{open:g,autoHideDuration:4e3,onClose:A,message:C,action:_})]})})})]})},je=n(717),ue=n(25),be=n(748),xe=n(705),he=n(185),Oe=n(363),pe=n(184),me=n(154),ve=n(727),fe=n(365),ge=n(125),ye=n(709),ke=n(710),Ve=n(711),we=n(53),Ce=n(186),Te=n(370),Se=n(352),Ae=n.n(Se),_e=function(){var e,t,n,c,r,i,s=Object(Y.useStreamQueries)(m.Voting.Voting),l=(null===(e=s.contracts[0])||void 0===e||null===(t=e.payload)||void 0===t?void 0:t.votes)||[],d=(null===(n=s.contracts[0])||void 0===n||null===(c=n.payload)||void 0===c?void 0:c.voters)||[],x=(null===(r=s.contracts[0])||void 0===r||null===(i=r.payload)||void 0===i?void 0:i.voteTimes)||[],h=l.length/d.length*100||"Loading...",O=Object(a.useMemo)((function(){if(0!==l.length){var e=new Map;return l.forEach((function(t){e.has(t)?e.set(t,(e.get(t)||1)+1):e.set(t,1)})),Object(ue.a)(e).map((function(e){var t=Object(o.a)(e,2);return{name:t[0],value:t[1]}}))}return[{name:"No Data",value:0}]}),[l]),p=Object(a.useMemo)((function(){for(var e=[],t=0;t<O.length;t++)e.push("#".concat(Math.random().toString(16).slice(2,8)));return e}),[O]),v=Object(a.useMemo)((function(){if(0!==l.length){var e=new Map;return x.forEach((function(t){var n=t.slice(0,-5)+"00000";e.has(parseInt(n))?e.set(parseInt(n),(e.get(parseInt(n))||1)+1):e.set(parseInt(n),1)})),Object(ue.a)(e).map((function(e){var t=Object(o.a)(e,2);return{time:t[0],value:t[1]}})).reverse()}return[{time:1,value:0}]}),[x]);return Object(T.jsx)($.a,{children:Object(T.jsx)(L.a,{sx:{p:1},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)(j.a,{container:!0,spacing:0,children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(J.a,{sx:{fontSize:50},color:"primary"})}),Object(T.jsxs)(j.a,{item:!0,children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h5",display:"block",children:"Vote Analytics"})}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"View current vote results"})})]})]}),Object(T.jsx)(ee.a,{}),Object(T.jsxs)(u.a,{variant:"h5",children:["Vote Progress: ",h,"%"]}),Object(T.jsx)(be.a,{variant:"determinate",value:h}),Object(T.jsxs)(j.a,{container:!0,justifyContent:"center",alignItems:"center",children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsxs)(xe.a,{width:400,height:100,data:O,children:[Object(T.jsx)(he.a,{dataKey:"name"}),Object(T.jsx)(Oe.a,{dataKey:"value",fill:"#8884d8",children:O.map((function(e,t){return Object(T.jsx)(pe.a,{fill:p[t]},"cell-".concat(t))}))}),Object(T.jsx)(me.a,{})]})}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsxs)(ve.a,{width:400,height:400,children:[Object(T.jsxs)(fe.a,{data:O,dataKey:"value",nameKey:"name",children:[O.map((function(e,t){return Object(T.jsx)(pe.a,{fill:p[t]},"cell-".concat(t))})),Object(T.jsx)(ge.a,{dataKey:"name",fill:"white"})]}),Object(T.jsx)(me.a,{})]})})]}),Object(T.jsx)(u.a,{variant:"h5",textAlign:"center",children:"Votes Over Time"}),Object(T.jsx)(L.a,{style:{width:"100%",height:"20vh"},textAlign:"center",children:Object(T.jsx)(ye.a,{width:"100%",height:"100%",children:Object(T.jsxs)(ke.a,{width:500,height:300,data:v,margin:{top:5,right:30,left:20,bottom:20},children:[Object(T.jsx)(Ve.a,{strokeDasharray:"3 3"}),Object(T.jsx)(he.a,{dataKey:"time",tickFormatter:function(e){return Ae()(e).format("HH:mm Do")},children:Object(T.jsx)(we.a,{value:"Time",fill:"#8884d8",position:"bottom"})}),Object(T.jsx)(Ce.a,{allowDecimals:!1,children:Object(T.jsx)(we.a,{value:"Votes",fill:"#8884d8",angle:-90})}),Object(T.jsx)(me.a,{}),Object(T.jsx)(Te.a,{type:"monotone",name:"Votes",dataKey:"value",stroke:"#8884d8",activeDot:{r:8}})]})})})]})})})},De=n(722),Pe=n(713),Le=n(714),Ee=n(715),Ie=n(732),Me=n(726),Ue=n(712),Re=function(e){var t=e.heading,n=e.content,c=a.useState(!1),r=Object(o.a)(c,2),i=r[0],s=r[1];return Object(T.jsxs)("div",{children:[Object(T.jsx)(Me.a,{ariaLabel:"SpeedDial basic example",sx:{position:"fixed",bottom:16,right:16},icon:Object(T.jsx)(Ue.a,{}),onClick:function(){s(!0)}}),Object(T.jsxs)(Ie.a,{open:i,onClose:function(e){console.log(e),s(!1)},children:[Object(T.jsx)(u.a,{variant:"h6",textAlign:"center",sx:{p:1},children:t}),Object(T.jsx)(L.a,{sx:{p:4},children:Object(T.jsx)(u.a,{variant:"h6",children:n})})]})]})},Ke=[],Ne=[],ze=function(){var e=Object(Y.useParty)(),t=Object(a.useState)([]),r=Object(o.a)(t,2),i=r[0],l=r[1],O=c.a.useState(10),p=Object(o.a)(O,2),v=p[0],f=p[1],g=Object(a.useState)(""),y=Object(o.a)(g,2),V=y[0],w=y[1],C=Object(a.useState)(""),S=Object(o.a)(C,2),A=S[0],_=S[1],D=c.a.useState(!1),P=Object(o.a)(D,2),E=P[0],I=P[1],M=c.a.useState(""),U=Object(o.a)(M,2),K=U[0],H=U[1],B=Object(Y.useStreamQueries)(m.Voting.Voting),W=Object(Y.useLedger)(),G=function(){var t=Object(s.a)(d.a.mark((function t(n){var a,c,r,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),n.currentTarget.name,0===B.contracts.length?(H("Vote Created"),I(!0),a=J(v),c=Object(o.a)(a,2),c[0],r=c[1],s={username:e,voters:r,votes:[],voted:[],voteTimes:[],candidates:i,subject:V},W.create(m.Voting.Voting,s)):(H("Vote In Progress"),I(!0));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var J=function(e){for(var t=0;t<e;t++){var a=n(117).randomBytes(20).toString("hex");Ke.push("".concat(a)),Ne.push((c=a,Object(k.createHash)("sha256").update(c).digest("hex")))}var c;return[Ke,Ne]},Q=function(){i.includes(A)?(H("Candidate already exists"),I(!0)):(_(""),l([A].concat(Object(ue.a)(i))))},X=function(e,t){"clickaway"!==t&&I(!1)},Z=Object(T.jsx)(c.a.Fragment,{children:Object(T.jsx)(R.a,{size:"small","aria-label":"close",color:"inherit",onClick:X,children:Object(T.jsx)(se.a,{fontSize:"small"})})});return Object(T.jsxs)($.a,{children:[Object(T.jsx)(L.a,{sx:{p:1},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap"},children:[Object(T.jsx)(q.a,{sx:{fontSize:45},color:"primary"}),Object(T.jsx)(u.a,{variant:"h5",children:"Create A Vote"})]}),Object(T.jsx)(ee.a,{sx:{p:0}}),Object(T.jsx)(u.a,{variant:"h6",sx:{pt:2},children:"What is the vote on?"}),Object(T.jsx)(L.a,{textAlign:"center",children:Object(T.jsx)(h.a,{id:"outlined-basic",label:"Subject",variant:"outlined",value:V,onChange:function(e){w(e.target.value)},style:{width:"94%"},sx:{m:2}})}),Object(T.jsxs)(u.a,{variant:"h6",children:["Voters: ",v]}),Object(T.jsx)(L.a,{textAlign:"center",children:Object(T.jsx)(De.a,{value:v,"aria-label":"Default",valueLabelDisplay:"auto",name:"slider",sx:{m:2},style:{width:"95%"},onChange:function(e){f(e.target.value)}})}),Object(T.jsxs)(u.a,{variant:"h6",children:["Candidates: ",i.length]}),Object(T.jsxs)(L.a,{textAlign:"center",children:[Object(T.jsx)(h.a,{id:"outlined-basic",label:"Candidate",variant:"outlined",value:A,onChange:function(e){_(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),Q())},style:{width:"95%"},sx:{m:2},InputProps:{endAdornment:Object(T.jsx)(R.a,{onClick:Q,children:Object(T.jsx)(Pe.a,{})})}}),Object(T.jsx)(N.a,{style:{width:"95%"},sx:{ml:2},children:i.map((function(e){return Object(T.jsx)(z.a,{secondaryAction:Object(T.jsx)(R.a,{edge:"end","aria-label":"delete",onClick:function(t){l((function(t){return t.filter((function(t){return t!==e}))})),console.log(i)},children:Object(T.jsx)(Le.a,{})}),children:Object(T.jsx)(F.a,{primary:e})},e)}))})]}),Object(T.jsx)(L.a,{textAlign:"center",children:Object(T.jsx)(x.a,{variant:"contained",onClick:G,className:"button",name:"Create Vote",sx:{m:2,alignItems:"center"},children:"Create Vote"})}),Object(T.jsx)(oe.a,{open:E,autoHideDuration:2e3,onClose:X,message:K,action:Z})]})}),Object(T.jsx)(L.a,{sx:{p:1},children:Object(T.jsxs)(b.a,{sx:{p:3,borderRadius:"16px"},elevation:2,children:[Object(T.jsxs)(j.a,{container:!0,children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(Ee.a,{sx:{fontSize:45},color:"primary"})}),Object(T.jsxs)(j.a,{item:!0,children:[Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"h5",display:"block",children:"Vote Keys"})}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(u.a,{variant:"subtitle1",color:"secondary",display:"block",style:{lineHeight:"15px"},children:"Distribute vote keys between voters"})})]}),Object(T.jsxs)(L.a,{textAlign:"right",sx:{flexGrow:1},children:[Object(T.jsx)(x.a,{sx:{margin:1},variant:"contained",onClick:function(){var e=Ke.join("\n"),t=new Blob([e],{type:"text/csv"}),n=URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download="voteKeys.csv",a.click(),H("Keys Exported"),I(!0)},children:"Export CSV"}),Object(T.jsx)(x.a,{variant:"contained",onClick:function(){navigator.clipboard.writeText(Ke.join("\n")),H("Keys Copied To Clipboard"),I(!0)},children:"Copy To Clipboard"})]})]}),Object(T.jsx)(N.a,{sx:{width:"100%",bgcolor:"background.paper",borderRadius:"16px",position:"relative",overflow:"auto",maxHeight:300,"& ul":{padding:0}},subheader:Object(T.jsx)("li",{}),children:[0].map((function(e){return Object(T.jsx)("li",{children:Object(T.jsx)("ul",{children:Ke.map((function(t){return Object(T.jsx)(z.a,{children:Object(T.jsx)(F.a,{primary:"".concat(t)})},"item-".concat(e,"-").concat(t))}))})},"section-".concat(e))}))})]})}),Object(T.jsx)(Re,{heading:"Help Heading",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n"})]})},He=n(716),Fe=n(371),Be=n(733);var We=function(){var e=c.a.useState(),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(He.a)("(prefers-color-scheme: dark)"),i=c.a.useMemo((function(){return Object(Fe.a)({palette:{mode:r?"dark":"light",primary:{main:"#387DF6"},secondary:{main:"#666666"}},typography:{fontFamily:"Roboto, sans-serif",subtitle1:{fontSize:16},h5:{fontWeight:700,fontSize:24},h6:{fontWeight:500}}})}),[r]);return n?Object(T.jsx)(X.a,{token:n.token,party:n.party,httpBaseUrl:y,wsBaseUrl:undefined,children:Object(T.jsxs)(Be.a,{theme:i,children:[Object(T.jsx)(je.a,{}),Object(T.jsx)("div",{children:Object(T.jsxs)(V.c,{children:[Object(T.jsx)(V.a,{path:"/Vote",element:Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(de,{onLogout:function(){return a(void 0)}})})}),Object(T.jsx)(V.a,{path:"/CreateVote",element:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Z,{onLogout:function(){return a(void 0)}}),Object(T.jsx)(ze,{})]})}),Object(T.jsx)(V.a,{path:"/VoteAnalytics",element:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Z,{onLogout:function(){return a(void 0)}}),Object(T.jsx)(_e,{})]})}),Object(T.jsx)(V.a,{path:"/VoteManagement",element:Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(Z,{onLogout:function(){return a(void 0)}}),Object(T.jsx)(te,{})]})}),Object(T.jsx)(V.a,{path:"*",element:Object(T.jsx)(E,{onLogout:function(){return a(void 0)}})})]})})]})}):Object(T.jsxs)(Be.a,{theme:i,children:[Object(T.jsx)(je.a,{}),Object(T.jsx)("div",{children:Object(T.jsxs)(V.c,{children:[Object(T.jsx)(V.a,{path:"/",element:Object(T.jsx)(_,{onLogin:a})}),Object(T.jsx)(V.a,{path:"/VoteLogin",element:Object(T.jsx)(D,{onLogin:a})}),Object(T.jsx)(V.a,{path:"/CreateVoteLogin",element:Object(T.jsx)(P,{onLogin:a})}),Object(T.jsx)(V.a,{path:"*",element:Object(T.jsx)(I,{})})]})})]})},Ge=function(e){var t=e.children,n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_DOMAIN,a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH0_CLIENT_ID,c=Object(V.f)();return Object(T.jsx)(C.a,{domain:n,clientId:a,redirectUri:window.location.origin,onRedirectCallback:function(e){c((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},children:t})};i.a.render(Object(T.jsx)(w.a,{children:Object(T.jsx)(Ge,{children:Object(T.jsx)(We,{})})}),document.getElementById("root"))}},[[644,1,2]]]);
//# sourceMappingURL=main.f3a67e61.chunk.js.map