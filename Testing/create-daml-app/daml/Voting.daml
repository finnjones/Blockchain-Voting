module Voting where


template User with
    username: Party

  where
    signatory username

    key username: Party
    maintainer key


template Voting with
    username: Party
    following: [Party]
    votes: [Text]
    voted: [Party]
    candidates: [Text]
    subject: Text
    
  where
    signatory username
    observer following

    key username: Party
    maintainer key

 
    nonconsuming choice Vote: ContractId Voting with
        voter: Party
        vote: Text
        
      controller voter
      do
        archive self
        create this with voted = voter :: voted; votes = vote :: votes
 
